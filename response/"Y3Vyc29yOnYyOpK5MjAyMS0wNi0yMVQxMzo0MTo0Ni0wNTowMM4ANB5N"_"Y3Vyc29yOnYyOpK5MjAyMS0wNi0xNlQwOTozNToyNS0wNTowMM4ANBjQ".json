{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyMS0wNi0xNlQwOTozNToyNS0wNTowMM4ANBjQ"
    },
    "edges": [
      {
        "node": {
          "title": "[Anisotropy] GBAnisotropy Question when there are many grains",
          "author": {
            "login": "syeonk"
          },
          "bodyText": "Hello!\nI'm interested in grain growth mechanism, so I have referred your simulation nowadays.\nI'm really happy to use phase field simulation easily :)\nBut I have a problem on the anisotropy grain growth.\nWhen I run it through below conditions, it did not converge at the time step although I apply large number of iterations in executioner. Moreover, it did not look like general grain growth case. (boundary goes to bend)\n(Conditions: in 'combined' module, set initial points of 22 grains using txt file.\n100X100 meshes on 2D surface (10nmX10nm).\ntime step 0.25 ns.\nmaking matrices of GB properties (GB energy, mobility prefactor) through a paper, 'Eisuke Miyoshi, et al. Large-scale phase-field study of anisotropic grain growth: Effects of misorientation-dependent grain boundary energy and mobility, Comp. Mater. Sci. 186 (2021) 109992')\nI also tested using 'combined' module in moose program for 6 grains on same conditions (just reduce the number of grains), however, it works.\nIs there a problem when I increase the number of grains?\nI would appreciate your reply :)\nThanks,",
          "url": "https://github.com/idaholab/moose/discussions/18091",
          "updatedAt": "2022-06-29T07:32:01Z",
          "publishedAt": "2021-06-16T03:25:27Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "simopier"
                  },
                  "bodyText": "Hi @syeonk,\nCould you provide the input files and other txt files of the two simulations (the one that works and the one that does not), and the associated output files? That would help identify where the issue is coming from.\nThank you!",
                  "url": "https://github.com/idaholab/moose/discussions/18091#discussioncomment-899376",
                  "updatedAt": "2022-06-29T07:32:01Z",
                  "publishedAt": "2021-06-21T18:08:21Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Calculations of total concentration generated and at the boundaries",
          "author": {
            "login": "styyokuda"
          },
          "bodyText": "Dear MOOSE Group,\nI have a concentration diffusion model with a source term (please see the attached figure).\nIn the model, the concentration is generated in Block 1 and diffused to the boundaries.\nI would like to calculate the total concentration [moles] generated in Block 1 and the concentration [moles] on the top, right, bottom, and left boundaries to confirm the conservation.\nI am looking for examples for these calculations.\nPlease help me.\nThomas\nDiffusion_Model_with_Source.pdf",
          "url": "https://github.com/idaholab/moose/discussions/18040",
          "updatedAt": "2023-08-29T18:36:47Z",
          "publishedAt": "2021-06-09T17:49:14Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThere are plenty of diffusion-source examples on the website. Let me know If you need me to find one for you\nYou should be able to use postprocessors to calculate the concentration:\n\nSideAverageValue for the boundaries\nElementAverageValue for block 1 https://mooseframework.inl.gov/source/postprocessors/ElementExtremeValue.html\n\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/18040#discussioncomment-899267",
                  "updatedAt": "2023-08-29T18:36:47Z",
                  "publishedAt": "2021-06-21T17:39:03Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Implementing a custom factor in steady-state calculation",
          "author": {
            "login": "mistloin"
          },
          "bodyText": "Hi. I studied about \"time-stepping\" framework in moose like the below equation; (increase or cutoff timestep along with residual value).\ndt_new = dt_old * \"Factor\"      --> \"Factor\" adjusted along with residual value\nI currently use the moose library to solve a steady-state equation, and I want to implement a similar concept as;\nX_new = X_old - \"Factor\" * Inv(J) * F     --> \"Factor\" adjusted along with residual vlaue;\nwhere X is solution vector, J is a jacobian matrix, F is residual\nI have searched the moose framework which supports this kind of concept, but I have found nothing yet.\nShould I develop a custom user object or other functional files for my question?\nOr is there any framework that supports the above concept?\nAlso, is there any way to get residual value (printed on-screen after each iteration) in my kernel?\n(I tried to approach the printed value, the value may be printed through \"PetscOutput.C\", but I failed to access them)\nThanks for reading my question. Have a good day.",
          "url": "https://github.com/idaholab/moose/discussions/17999",
          "updatedAt": "2023-02-23T17:20:57Z",
          "publishedAt": "2021-06-03T12:38:09Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThere is a timestepper that can grow the time step by a constant factor. See https://mooseframework.inl.gov/source/timesteppers/IterationAdaptiveDT.html\nFor the update, I m not sure why you would want to add a factor there. Could you please give a reference for this method?\nIn the kernel? The kernel is executed at every quadrature point, so you want the residual at every quadrature point (which the kernel is contributing to)? Or do you want the residual for the whole domain?\nBest,\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/17999#discussioncomment-836909",
                  "updatedAt": "2023-02-23T17:20:58Z",
                  "publishedAt": "2021-06-07T20:52:20Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "mistloin"
                          },
                          "bodyText": "Thanks for your response.\nThe reason why I want to use the factor in a steady-state is that the factor may improve convergence of my problem.\nWhen I solve Newton method using MATLAB, I found that the problem (which was not converged) was converged by using the factor. (Initially the factor is very small value such as 1e-10, and along with residual, the factor increases up to 1)\nI want to access the residual value for whole domain, because I should decides the factor value along with whole domain residual.",
                          "url": "https://github.com/idaholab/moose/discussions/17999#discussioncomment-837809",
                          "updatedAt": "2023-02-23T17:20:58Z",
                          "publishedAt": "2021-06-08T02:53:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Ok that makes sense. Somehow I thought the factor would be bigger than 1.\nYou can use relaxed Picard iterations to achieve the same effect. In those you will have:\nX_new_picard = a * X_new + (1-a) * X_old = (a + 1 -a) * X_old  - a * invJ F\nWe currently do not support varying relaxation factors, though that feature would not be very hard all to add in executioners/PicardSolve.C. I would make the relaxation factor a function then. This function could be the same as the one used by the timestepper to control the timestep.\nFor getting the residual in a kernel, you can use a Residual postprocessor, then create a new kernel that can take it as an input, then use getPostprocessorValueByName to get the value.\nOr you can look at postprocessors/Residual.C and import some of that code into your kernel\nBest,\nGuillaume",
                          "url": "https://github.com/idaholab/moose/discussions/17999#discussioncomment-837855",
                          "updatedAt": "2023-02-23T17:20:58Z",
                          "publishedAt": "2021-06-08T03:14:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "mistloin"
                          },
                          "bodyText": "Thanks for your advice! I will study about the Picard iteration and the residual post-proccessor just right now.",
                          "url": "https://github.com/idaholab/moose/discussions/17999#discussioncomment-897562",
                          "updatedAt": "2023-02-23T18:00:04Z",
                          "publishedAt": "2021-06-21T12:36:37Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "[Material property assign on boundary]",
          "author": {
            "login": "coskrrb2002"
          },
          "bodyText": "Dear moose users,\nI am trying to find a way to implement material properties only on boundaries (Surfaces or points).\nIs there any way to do this?\nI found the Interfacematerials.C, but it's for interfaces of two different domains.",
          "url": "https://github.com/idaholab/moose/discussions/18124",
          "updatedAt": "2021-06-21T07:45:12Z",
          "publishedAt": "2021-06-21T04:53:41Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou can specify the 'boundary' parameter in the same way that you define 'block' for a material defined inside the domain.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/18124#discussioncomment-895978",
                  "updatedAt": "2022-06-14T14:32:21Z",
                  "publishedAt": "2021-06-21T06:02:19Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "coskrrb2002"
                          },
                          "bodyText": "Thank you for your comment @GiudGiud .\nIt works!\nCheers,\nNakkyu",
                          "url": "https://github.com/idaholab/moose/discussions/18124#discussioncomment-896296",
                          "updatedAt": "2022-06-14T14:32:21Z",
                          "publishedAt": "2021-06-21T07:44:58Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Can not build a navier stokes app",
          "author": {
            "login": "majumdararn"
          },
          "bodyText": "I want to build an app with the Navier_Stokes module on. When I make this app, it shows following error.\n/home/amajumda/anaconda3/envs/moose/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: /home/amajumda/moose/modules/module_loader/lib/libmodule_loader_with_fp_ray_hc_rdg_ns-opt.so: undefined reference to NavierStokesApp::registerExecFlags(Factory&)' /home/amajumda/anaconda3/envs/moose/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: /home/amajumda/moose/modules/module_loader/lib/libmodule_loader_with_fp_ray_hc_rdg_ns-opt.so: undefined reference to NavierStokesApp::registerObjects(Factory&)'\n/home/amajumda/anaconda3/envs/moose/bin/../lib/gcc/x86_64-conda-linux-gnu/9.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: /home/amajumda/moose/modules/module_loader/lib/libmodule_loader_with_fp_ray_hc_rdg_ns-opt.so: undefined reference to `NavierStokesApp::associateSyntax(Syntax&, ActionFactory&)'\ncollect2: error: ld returned 1 exit status\nmake: *** [/home/amajumda/moose/framework/app.mk:407: /home/amajumda/navier_stokes/navier_stokes-opt] Error 1\nCould anyone help?",
          "url": "https://github.com/idaholab/moose/discussions/18108",
          "updatedAt": "2022-08-23T22:40:51Z",
          "publishedAt": "2021-06-17T09:58:39Z",
          "category": {
            "name": "Q&A Modules: Navier-Stokes"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nLet\u2019s first try to update moose and libmesh.\nfor moose pull from the repository, for lib mesh run conda update \u2014all\nthen make clobberall to clean up and make -j<the number of cores> again\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/18108#discussioncomment-883637",
                  "updatedAt": "2022-08-23T22:40:52Z",
                  "publishedAt": "2021-06-17T14:25:27Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "majumdararn"
                          },
                          "bodyText": "@GiudGiud Thank you very much for your suggestion\nIt worked.\nI ran git pull inside moose directory and then did conda update --all\nfinally did make clobberall and then make -j",
                          "url": "https://github.com/idaholab/moose/discussions/18108#discussioncomment-885681",
                          "updatedAt": "2022-08-23T22:40:52Z",
                          "publishedAt": "2021-06-17T23:55:23Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Boundary condition in annular geometry",
          "author": {
            "login": "FloPasselaigue"
          },
          "bodyText": "Hello,\nI would like to apply a constant, non-uniform, Dirichlet boundary condition on an annular geometry. I tried using FunctionDirichletBC with a PiecewiseLinear function but it doesn't work.\nI assume it's because I can't indicate the coordinate to use is theta in PiecewiseLinear, since it can only take x, y, or z. Is there another class to use?\nBelow is my attempted input file, thanks for the help!\n[Mesh]\n  [./amg]\n    type = AnnularMeshGenerator\n    nr = 10\n    nt = 12\n    rmin = 8.93e-3\n    rmax = 9.5e-3\n    dmin = 0\n    dmax = 180\n  []\n[]\n\n[Variables]\n  [temperature]\n  []\n[]\n\n[Functions]\n # These functions give the temperature as a function of theta (given in degrees) \n # at the inner and outer boundaries\n  [temperature_in]\n    type = PiecewiseLinear\n    x = '0\t5\t10\t15\t20\t25\t30\t35\t40\t45\t50\t55\t60\t65\t70\t75\t80\t85\t90\t95\t100\t105\t110\t115\t120\t125\t130\t135\t140\t145\t150\t155\t160\t165\t170\t175\t180'\n    y = '313\t312\t312\t312\t312\t311\t311\t310\t310\t309\t309\t308\t307\t307\t305\t304\t302\t298\t260\t298\t302\t304\t305\t307\t307\t308\t309\t309\t310\t310\t311\t311\t312\t312\t312\t312\t313'\n  []\n  [temperature_out]\n    type = PiecewiseLinear\n    x = '0\t5\t10\t15\t20\t25\t30\t35\t40\t45\t50\t55\t60\t65\t70\t75\t80\t85\t90\t95\t100\t105\t110\t115\t120\t125\t130\t135\t140\t145\t150\t155\t160\t165\t170\t175\t180'\n    y = '312\t312\t312\t312\t311\t311\t311\t310\t310\t309\t309\t308\t307\t306\t305\t304\t302\t299\t296\t299\t302\t304\t305\t306\t307\t308\t309\t309\t310\t310\t311\t311\t311\t312\t312\t312\t312'\n  []\n[]\n\n[BCs]\n  [Tin]\n    type = FunctionDirichletBC\n    variable = temperature\n    boundary = 0\n    function = temperature_in\n  []\n  [Tout]\n    type = FunctionDirichletBC\n    variable = temperature\n    boundary = 1\n    function = temperature_out\n  []\n[]\n\n[Kernels]\n  [heatflow]\n    type = CoefDiffusion\n    variable = temperature\n    coef = 1e-4\n  []\n[]\n\n[Executioner]\n  type = Steady\n[]\n\n[Outputs]\n  exodus = true\n[]",
          "url": "https://github.com/idaholab/moose/discussions/18112",
          "updatedAt": "2022-06-06T14:39:14Z",
          "publishedAt": "2021-06-17T14:04:54Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nI d try to make it work with a FunctionSeries in the functional expansion module (you might need to add this dependency in your makefile)\nhttps://mooseframework.inl.gov/moose/source/functions/FunctionSeries.html\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/18112#discussioncomment-884048",
                  "updatedAt": "2023-08-17T00:07:04Z",
                  "publishedAt": "2021-06-17T15:41:44Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "External Libraries in MOOSE",
          "author": {
            "login": "AmerMalik9"
          },
          "bodyText": "Hi,\nWe are planning to use MOOSE for our commercial software and for that we need to make sure that we don't violate any of the license rules both for MOOSE and for all the external libraries within MOOSE. Could anyone provide us with the complete list of external libraries that are being used within MOOSE. I found this list: https://mooseframework.inl.gov/sqa/library_requirements.html but I am not sure if it's complete or updated?\nThank you!",
          "url": "https://github.com/idaholab/moose/discussions/18096",
          "updatedAt": "2022-08-02T16:22:08Z",
          "publishedAt": "2021-06-16T13:51:35Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "The items on the provided list look up to date and accurate to my eyes.",
                  "url": "https://github.com/idaholab/moose/discussions/18096#discussioncomment-878151",
                  "updatedAt": "2022-08-02T16:22:08Z",
                  "publishedAt": "2021-06-16T13:54:56Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "doquang"
                          },
                          "bodyText": "@AmerMalik9 - MOOSE uses PETSc, and the default configuration of PETSc on MOOSE requires:\n\nHyper\nfblaslapack\nmetis\nptscotch\nparmetis\nsuperlu\nmumps\nstrumpack\nscalapack\nslepc\n(See moose/scripts/update_and_rebuild_petsc.sh)",
                          "url": "https://github.com/idaholab/moose/discussions/18096#discussioncomment-878376",
                          "updatedAt": "2022-08-02T16:22:58Z",
                          "publishedAt": "2021-06-16T14:22:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AmerMalik9"
                          },
                          "bodyText": "@doquang Thanks Minh! Will get back to you for more questions.\n@milljm Thanks for the confirmation.",
                          "url": "https://github.com/idaholab/moose/discussions/18096#discussioncomment-881900",
                          "updatedAt": "2022-08-02T16:23:03Z",
                          "publishedAt": "2021-06-17T07:47:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aeslaughter"
                          },
                          "bodyText": "You can also take a look at our manual install instructions to control/follow everything you need: https://mooseframework.inl.gov/getting_started/installation/manual_installation_gcc.html\nOur default builds for libMesh and PETSc can be found in our scripts directory, these scripts should be relying on anything compatible. However, it is possible to configure them with things that are not.\nhttps://github.com/idaholab/moose/blob/next/scripts/update_and_rebuild_libmesh.sh\nhttps://github.com/idaholab/moose/blob/next/scripts/update_and_rebuild_petsc.sh\nFinally, framework/contrib contains some software packages that we rely on as well. To the best of our knowledge everything is compatible with LGPL 2.1.",
                          "url": "https://github.com/idaholab/moose/discussions/18096#discussioncomment-883557",
                          "updatedAt": "2022-08-02T16:23:04Z",
                          "publishedAt": "2021-06-17T14:16:43Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "set a value of porepressure of a particular block?",
          "author": {
            "login": "Traiwit"
          },
          "bodyText": "Hi guys,\nis it possible to set a value of pore-pressure of a particular block (sub-domain), maybe via [Materials] block?\nI know I can define the boundaries of a sub-domain and then set the boundary of that block to zero (below).\nHowever, when I have like 100+ sub-domains, my input file gets real ugly.\nNote: I am currently using PorousFlowFullySaturated action\nKind regards,\nTraiwit\n  [add_side_sets_block6]\n    type = SideSetsAroundSubdomainGenerator\n    block = 6\n    input = add_side_sets\n    fixed_normal = true\n    new_boundary = 'front6 top6 right6 back6 bottom6 left6'\n    variance = 0.5\n  []\n\n  [./water_grad_block6]\n     type = DirichletBC\n     variable = porepressure\n     boundary = 'front6 top6 right6 back6 bottom6 left6'\n     value = 0\n  [../]",
          "url": "https://github.com/idaholab/moose/discussions/18090",
          "updatedAt": "2024-09-10T08:05:39Z",
          "publishedAt": "2021-06-16T01:26:43Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "WilkAndy"
                  },
                  "bodyText": "Yep, usually input files are looooong when you have lots of subdomains because lots of things are going on.   i usually write a python script to write my input files, to avoid mistakes.",
                  "url": "https://github.com/idaholab/moose/discussions/18090#discussioncomment-875953",
                  "updatedAt": "2024-09-10T08:05:41Z",
                  "publishedAt": "2021-06-16T01:57:06Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @WilkAndy, this is probably the easiest way to deal with the input file. Thanks!",
                          "url": "https://github.com/idaholab/moose/discussions/18090#discussioncomment-881105",
                          "updatedAt": "2024-09-10T08:05:41Z",
                          "publishedAt": "2021-06-17T03:30:25Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "permcody"
                  },
                  "bodyText": "The other solution to this problem is to create a custom \"Action\". Actions allow you to programmatically setup your problem (add variables, kernels, bcs, other objects). You can then replace a long list of complicated blocks with a much smaller, higher-level input block for your application.",
                  "url": "https://github.com/idaholab/moose/discussions/18090#discussioncomment-880506",
                  "updatedAt": "2024-09-10T08:05:43Z",
                  "publishedAt": "2021-06-16T21:46:59Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "For this example, if it's 0 DirichletBC all the time for all pores, then you could:\n\nadd many blocks to SideSetsAroundSubdomainGenerator to have all the sidesets (can one sideset cover them all? I m not sure)\nadd all the boundaries (or just one if that worked) to the DirichletBC",
                  "url": "https://github.com/idaholab/moose/discussions/18090#discussioncomment-880561",
                  "updatedAt": "2024-09-10T08:05:59Z",
                  "publishedAt": "2021-06-16T22:11:36Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "@GiudGiud thank you for your reply, I was thinking about that too, but it wouldn't work if I want to change the properties of each block at each particular time.",
                          "url": "https://github.com/idaholab/moose/discussions/18090#discussioncomment-881110",
                          "updatedAt": "2024-09-10T08:06:02Z",
                          "publishedAt": "2021-06-17T03:32:07Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "MOOSE for HPC",
          "author": {
            "login": "adfboyd"
          },
          "bodyText": "Hello,\nI'm attempting to run some NS simulations on an HPC cluster that uses slurm scheduling, and I was wondering if anyone had any experience with what a job submission script should look like in this case. I installed Moose using conda in the normal way used for Linux systems.\nAlso any advice on the recommended flags to use in terms of MPIexec and threads in the context of HPC where we will hope to use several thousand cores would be very much appreciated!",
          "url": "https://github.com/idaholab/moose/discussions/17946",
          "updatedAt": "2022-06-10T13:51:19Z",
          "publishedAt": "2021-05-27T10:36:20Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "Conda isn't really a very optimized solution when running on thousands of cores. It would be best to get in touch with your HPC admins, and ask them how to use the MPI stack they created specially for their cluster.\nWe have some basic instructions on how to build this compiler stack if they truly do not have one available for you: https://mooseframework.inl.gov/getting_started/installation/hpc_install_moose.html\nYou can still use Conda. And it will work. But the MPI stack distributed with this product was only intended to run on a single node (aka: your workstation).\nAs for as how to create a SLURM launch script, I can only suggest the results of a google search: https://ubccr.freshdesk.com/support/solutions/articles/5000688140-submitting-a-slurm-job-script\nLots of things we can't fill in the blanks for though, since each HPC cluster is different (module load this, module load that, resource allocation, etc)",
                  "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-793336",
                  "updatedAt": "2022-06-10T13:51:19Z",
                  "publishedAt": "2021-05-27T14:31:14Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "Thanks, I wasn't aware of the drawbacks of conda. In terms of scripting, I was just more concerned with how best to use the -nthreads and -mpiexec flags with Moose, although of course I understand that this might be very hard to make any statements about in the general case too.",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-811825",
                          "updatedAt": "2022-06-10T13:51:25Z",
                          "publishedAt": "2021-06-01T16:12:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "permcody"
                          },
                          "bodyText": "@adfboyd - You'll likely want to talk to your system administrators for some advice. Typically, schedulers and their associated submission scripts are MPI aware so you'll focus on how many nodes/cores you want in the submission script and then run your application with something like mpiexec <path to my application> without any -n <cpus> option. Things can get more complex when running MPI+threading, but I'll advise against that unless you know you'll need it or have already mastered the pure MPI runs.",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-812044",
                          "updatedAt": "2022-06-10T13:51:23Z",
                          "publishedAt": "2021-06-01T16:59:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "fdkong"
                          },
                          "bodyText": "I was just more concerned with how best to use the -nthreads and -mpiexec flags with Moose, although of course I understand that this might be very hard to make any statements about in the general case too.\n\nFor most of cases, I would suggest stay with pure MPIs unless your application has very specific structure where threading concurrency can be explored.\nIn my experience, the pure MPI often performs better than the hybrid",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-812463",
                          "updatedAt": "2022-06-10T13:51:23Z",
                          "publishedAt": "2021-06-01T18:39:25Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "adfboyd"
                  },
                  "bodyText": "Thank you for the advice. We're having a bit of trouble installing MOOSE as per the HPC instructions.\nThe commands that we are using to build MOOSE are:\n\n\ncd /work/e643/e643/dmse643/\nmkdir projects\ncd projects/\ngit clone https://github.com/idaholab/moose.git\ncd moose\ngit checkout master\nmodule restore PrgEnv-gnu\nmodule load cmake\nmodule load cray-python\nunset PETSC_DIR PETSC_ARCH\n./scripts/update_and_rebuild_petsc.sh\n./scripts/update_and_rebuild_libmesh.sh\ncd test\nmake -j 4\n\n\nLibmesh is built successfully (although it takes a long time) but the compilation of MOOSE fails because the linker cannot find libdsmml.la:\n\n\n/usr/bin/grep: /install/dsmml/opt/lib/libdsmml.la: No such file or directory\nand indeed there is no such file, however\n/opt/cray/pe/dsmml/0.1.2/dsmml/lib/libdsmml.la\nexists.\n\n\nWe do not yet know how to tell the build system where to find it, how can we do this?\nThanks again!",
                  "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-816987",
                  "updatedAt": "2022-06-10T13:51:24Z",
                  "publishedAt": "2021-06-02T17:02:49Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Do you need to add /opt/cray/pe/dsmml/0.1.2/dsmml/lib/ to your LIBRARY_PATH?",
                  "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-817041",
                  "updatedAt": "2022-06-10T13:51:28Z",
                  "publishedAt": "2021-06-02T17:14:36Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "Thank you for this suggestion. Unfortunately we're still having problems which we suspect are due to the system software - we're having this investigated at the moment.",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-820374",
                          "updatedAt": "2022-06-10T13:51:28Z",
                          "publishedAt": "2021-06-03T11:47:58Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "Can you perform a module list after your module load events and list those modules? Also, an env afterwards would help as well.",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-821005",
                          "updatedAt": "2022-06-10T13:51:29Z",
                          "publishedAt": "2021-06-03T14:04:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "I have attached the output of 'module list' and 'env'\nOnce libmesh is installed incorrect paths to dsmml are specified in\nlibmesh/installed/lib/libmesh_opt.la\nlibmesh/installed/lib/libmesh_dbg.la\nlibmesh/installed/lib/libtimpi_oprof.la\nlibmesh/installed/lib/libtimpi_dbg.la\nlibmesh/installed/lib/libmetaphysicl.la\nlibmesh/installed/lib/libtimpi_opt.la\nlibmesh/installed/lib/libmesh_oprof.la\nFor example, in libmesh/installed/lib/libmesh_opt.la:\ndependency_libs='\n/work/e643/e643/dmse643/projects/moose/scripts/../libmesh/installed/lib/libnetcdf.la\n/work/e643/e643/dmse643/projects/moose/scripts/../libmesh/installed/lib/libtimpi_opt.la\n/install/dsmml/opt/lib/libdsmml.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libgfortran.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libquadmath.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libstdc++.la\n-L/work/e643/e643/dmse643/projects/moose/petsc/arch-moose/lib\n-L/opt/cray/pe/dsmml/0.1.2/dsmml/lib -L/opt/gcc/10.1.0/snos/lib64\n-L/opt/gcc/10.1.0/snos/lib -lz -lslepc -lpetsc -lHYPRE -lcmumps -ldmumps\n-lsmumps -lzmumps -lmumps_common -lpord -lstrumpack -lscalapack\n-lsuperlu_dist -lflapack -lfblas -lptesmumps -lptscotchparmetis\n-lptscotch -lptscotcherr -lesmumps -lscotch -lscotcherr -lX11 -lparmetis\n-lmetis -lmpifort_gnu_91 -lrt /install/dsmml/opt/lib/libdsmml.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libgfortran.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libquadmath.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libquadmath.la\n/opt/gcc/10.1.0/snos/lib/../lib64/libstdc++.la'\nThe last two lines of\n/opt/cray/pe/dsmml/0.1.2/dsmml/lib/libdsmml.la\nare\nDirectory that this library needs to be installe\nd in:\nlibdir='/install/dsmml/opt/lib'\nwhich may be the cause of the problem.\nmodule_and_env[3745].txt",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-821337",
                          "updatedAt": "2022-06-10T13:51:33Z",
                          "publishedAt": "2021-06-03T15:10:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "Apologies, the 3rd last line should not be a header, it was merely a hashtag indent.",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-821365",
                          "updatedAt": "2022-08-02T15:22:57Z",
                          "publishedAt": "2021-06-03T15:14:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I like to use markdown for preformatted text:\n```\npreformatted text goes here\n```\npreformatted text goes here\n\nYou can even declare the language for syntax highlighting:\n```bash\nfor i in `seq 1 9`;  do\necho $i\ndone\n```\nfor i in `seq 1 9`;  do\n  echo $i\ndone \nPython:\n```python\nfor i in []:\nprint(i)\n```\nfor i in []:\n  print(i)\nAnyways!!! I am not seeing anything stand out as an issue within your environment. I think you are on the right track about something off in link library instruction file (or whatever .la files are used for). Would it be possible to unload that one specific module?\nmodule unload cray-dsmml/0.1.2\nAnd then rebuild libMesh. MOOSE gets all (maybe most) of its compiler links/flags from libMesh.\nI think modulecmd is pretty lenient about unloading dependency modules. As in; it shouldn't unload anything else. But do check after unloading it to see if it only unloads that one specific module.\nThis may not be a solution, but I am curious as to the results. To speed up building libMesh, you can export the following variable to instruct the build script how many cores are available to build with:\nexport MOOSE_JOBS=n      # where n is the number of cores you are allowed to use\nEDIT:\nYou can also instruct libMesh to only build one method (by default we are asking you to build it three times opt devel oprof):\nexport METHODS='opt'\nwill only build optimized version",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-821538",
                          "updatedAt": "2022-08-02T15:22:57Z",
                          "publishedAt": "2021-06-03T15:43:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "It seems that\ngit clone https://github.com/idaholab/moose.git\ncd moose\ngit checkout master\nmodule restore PrgEnv-gnu\nmodule load cmake\nmodule load cray-python\nmodule unload cray-dsmml\nexport MOOSE_JOBS=8\nunset PETSC_DIR PETSC_ARCH\n./scripts/update_and_rebuild_petsc.sh\n./scripts/update_and_rebuild_libmesh.sh\ncd test\nmake -j 8\n\nworked as the build terminated with\nLinking Library /work/e643/e643/dmse643/projects/moose/framework/libmoose-opt.la...\nLinking Library /work/e643/e643/dmse643/projects/moose/test/lib/libmoose_test-opt.la...\nLinking Executable /work/e643/e643/dmse643/projects/moose/test/moose_test-opt...\n\nDoes this seem like a successful installation? Thank you again!",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-821938",
                          "updatedAt": "2022-08-02T15:22:58Z",
                          "publishedAt": "2021-06-03T17:14:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "It does... not sure what is wrong with that module. But, if it is not needed, I'd say continue to not use it!\nStill, do the tests pass?\ncd /work/e643/e643/dmse643/projects/moose/test\n./run_tests -j 8",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-821953",
                          "updatedAt": "2022-08-02T15:22:59Z",
                          "publishedAt": "2021-06-03T17:18:44Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "I have attached the output from an attempt to run the tests. It seems to have failed, any insights on what to do next would be very helpful. This was run as a batch job, but I did try just doing\n./run_tests -j 8\n\non the login node, that failed too.\nMoosetestoutputs.txt",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-834444",
                          "updatedAt": "2022-08-02T15:22:59Z",
                          "publishedAt": "2021-06-07T11:33:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "Everything that tried to run failed due to a timeout. It feels as though this job was not allowed to run with the resources requested or something.\nBefore we try to make this work on the nodes, I suggest we try to make this work on the headnode first. What are the errors when you tried runing ./run_tests -j 8 on the headnode? Were they also timeout errors? Can you run one test manually and see what happens?\nPicking a random one that failed, I mean to say, can you run the same exact command that ./run_tests was trying to run:\n\ufffd[31mmesh_modifiers/add_extra_nodeset.extra/test: \ufffd[0mWorking Directory: /lus/cls01095/work/e643/e643/shared/mooseprojects/moose/test/tests/mesh_modifiers/add_extra_nodeset\n\ufffd[31mmesh_modifiers/add_extra_nodeset.extra/test: \ufffd[0mRunning command: /lus/cls01095/work/e643/e643/shared/mooseprojects/moose/test/moose_test-opt -i extra_nodeset_test.i --error --error-unused --error-override --no-gdb-backtrace\nThat is, establish your environment (load modules) and then run:\ncd /lus/cls01095/work/e643/e643/shared/mooseprojects/moose/test/tests/mesh_modifiers/add_extra_nodeset\n/lus/cls01095/work/e643/e643/shared/mooseprojects/moose/test/moose_test-opt -i extra_nodeset_test.i --error --error-unused --error-override --no-gdb-backtrace",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-835748",
                          "updatedAt": "2022-08-02T15:22:59Z",
                          "publishedAt": "2021-06-07T16:17:33Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "adfboyd"
                          },
                          "bodyText": "I ran\nmodule restore PrgEnv-gnu\nmodule load cray-python\ncd /lus/cls01095/work/e643/e643/shared/mooseprojects/moose/test/tests/mesh_modifiers/add_extra_nodeset\n/lus/cls01095/work/e643/e643/shared/mooseprojects/moose/test/moose_test-opt -i extra_nodeset_test.i --error --error-unused --error-override --no-gdb-backtrace\n\nThe errors were:\nMPICH ERROR [Rank 0] [job id unknown] [Mon Jun  7 17:51:15 2021] [unknown] [uan01] - Abort(590863) (rank 0 in comm 0): Fatal error in PMPI_Init_thread: Other MPI error, error stack:\nMPIR_Init_thread(632): \nMPID_Init(286).......:  PMI2 init failed: 1 \n\naborting job:\nFatal error in PMPI_Init_thread: Other MPI error, error stack:\nMPIR_Init_thread(632): \nMPID_Init(286).......:  PMI2 init failed: 1 \n\nIn general the errors I saw on the login node were not timeout errors - it would happen quickly, and \"Pool not running\"  was common.",
                          "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-835925",
                          "updatedAt": "2022-08-02T15:23:00Z",
                          "publishedAt": "2021-06-07T16:56:00Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "adfboyd"
                  },
                  "bodyText": "Thank you! I've arranged a meeting with a support team for the cluster next week, if we're still stuck he may be able to help out a bit.",
                  "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-858409",
                  "updatedAt": "2022-06-10T13:51:31Z",
                  "publishedAt": "2021-06-11T14:15:59Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "I have created an issue: #18099 to address supporting Slurm.",
                  "url": "https://github.com/idaholab/moose/discussions/17946#discussioncomment-878787",
                  "updatedAt": "2022-06-10T13:51:31Z",
                  "publishedAt": "2021-06-16T15:00:12Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Frozen solving environment step in installing moose in linux",
          "author": {
            "login": "Ali1990dashti"
          },
          "bodyText": "Dear community,\nSince yesterday I have bee tryin to install moose. I am usnig ubunu 20.04 and conda 4.8.3. I exactly followed explained instructions. But, when I try the line conda create --name moose moose-libmesh moose-tools  it stucks in the solving environment step. I tried to install it also in my base environemnt and also out of conda but the results was the same and I stuck in the same step. Uploaded fig also shows it I do appreciate any help to solve my issue.",
          "url": "https://github.com/idaholab/moose/discussions/18093",
          "updatedAt": "2023-01-14T02:23:34Z",
          "publishedAt": "2021-06-16T08:32:09Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Try\nconda create -n moose -q -y\nconda activate moose\nconda install moose-tools\nconda install moose-libmesh\nIt solves faster",
                  "url": "https://github.com/idaholab/moose/discussions/18093#discussioncomment-878407",
                  "updatedAt": "2023-01-14T02:23:39Z",
                  "publishedAt": "2021-06-16T14:27:22Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Ali1990dashti"
                          },
                          "bodyText": "Dear @GiudGiud ,\nThanks a lot.\nYour solution fixed my problem.",
                          "url": "https://github.com/idaholab/moose/discussions/18093#discussioncomment-878571",
                          "updatedAt": "2023-01-14T02:23:44Z",
                          "publishedAt": "2021-06-16T14:35:25Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}