{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyNC0wMS0yM1QxOTowNDo1My0wNjowMM4AXNZ5"
    },
    "edges": [
      {
        "node": {
          "title": "multiply material matrix in computeQpResidual and Jacobian",
          "author": {
            "login": "tqcthai"
          },
          "bodyText": "Dear all,\nI am not so familiar with how to exact multiply test function with matrices. I want to compute (u_i A_{i,j} u_j) kernel where u is a variable, u_i is its spatial gradient, A_{i,j} is a second order tensor. Let's make A is an identity matrix.\nFor the computeResidual, I coded as:\nRankTwoTensor A(1., 1., 1., 0., 0., 0.);\n return _grad_u[_qp] *  A(_i, _j) * _grad_test[_i][_qp];\n\nAnd computeJacobian:\nRankTwoTensor A(1., 1., 1., 0., 0., 0.);\n return _grad_phi[_j][_qp] *  A(_i, _j) * _grad_test[_i][_qp];\n\nAre they correct? I have an issue of convergence with it.\nThanks,\nThai.",
          "url": "https://github.com/idaholab/moose/discussions/26637",
          "updatedAt": "2024-01-25T17:04:31Z",
          "publishedAt": "2024-01-25T16:19:43Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThe initialization of A might not be correct? Which size is it supposed to be?\nTo troubleshoot convergence issue we have this page\nhttps://mooseframework.inl.gov/moose/application_usage/failed_solves.html\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/26637#discussioncomment-8247597",
                  "updatedAt": "2024-01-25T16:45:37Z",
                  "publishedAt": "2024-01-25T16:45:37Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "tqcthai"
                          },
                          "bodyText": "It 3x3 symmetric. I saw its initialization from the deoxygen:\nRankTwoTensor A(1, 2, 3, 4, 5, 6);\n// A = [ 1 6 5\n//       6 2 4\n//       5 4 3 ]\nDefinition at line 154 of file RankTwoTensorImplementation.h.\n156 {\n157   (*this)(0, 0) = S11;\n158   (*this)(1, 1) = S22;\n159   (*this)(2, 2) = S33;\n160   (*this)(1, 2) = (*this)(2, 1) = S23;\n161   (*this)(0, 2) = (*this)(2, 0) = S13;\n162   (*this)(0, 1) = (*this)(1, 0) = S12;\n163 }",
                          "url": "https://github.com/idaholab/moose/discussions/26637#discussioncomment-8247657",
                          "updatedAt": "2024-01-25T16:52:49Z",
                          "publishedAt": "2024-01-25T16:51:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "looks correct to me then, thx for checking",
                          "url": "https://github.com/idaholab/moose/discussions/26637#discussioncomment-8247681",
                          "updatedAt": "2024-01-25T16:53:59Z",
                          "publishedAt": "2024-01-25T16:53:58Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "tqcthai"
                          },
                          "bodyText": "So, in the A(_i, _j) * _grad_test[_i][_qp], does it really return A_{i,j} N_i. Do I need to write a sum loop over i from 1 to 3 or Moose do it automatically?",
                          "url": "https://github.com/idaholab/moose/discussions/26637#discussioncomment-8247761",
                          "updatedAt": "2024-01-25T17:01:53Z",
                          "publishedAt": "2024-01-25T17:01:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "you mean the matrix-vector product? No I dont think so. You are accessing a component, you are getting the component times the vector",
                          "url": "https://github.com/idaholab/moose/discussions/26637#discussioncomment-8247798",
                          "updatedAt": "2024-01-25T17:04:31Z",
                          "publishedAt": "2024-01-25T17:04:31Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Subdomain only for postproccessing",
          "author": {
            "login": "lyyc199586"
          },
          "bodyText": "Can I create a subdomain only for postprocessing? For example, I want to create a box inside the main domain name box, but I don't want it to affect the current kernels (they will still running on the whole domain)",
          "url": "https://github.com/idaholab/moose/discussions/26633",
          "updatedAt": "2024-01-29T18:45:08Z",
          "publishedAt": "2024-01-25T15:50:43Z",
          "category": {
            "name": "Q&A Meshing"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou can create a new block with any of the mesh generators, and add that new block to the block restriction of the kernels / the variables.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/26633#discussioncomment-8246922",
                  "updatedAt": "2024-01-25T16:05:04Z",
                  "publishedAt": "2024-01-25T16:05:03Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "lyyc199586"
                          },
                          "bodyText": "ok, looks like that's the only way.",
                          "url": "https://github.com/idaholab/moose/discussions/26633#discussioncomment-8247292",
                          "updatedAt": "2024-01-25T16:17:58Z",
                          "publishedAt": "2024-01-25T16:17:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "you can use MeshDivisions or extra-element ids if you want too.\nthis does not modify the blocks so it wont influence the kernels.\nThere are a lot less postprocessors implemented for those techniaues though",
                          "url": "https://github.com/idaholab/moose/discussions/26633#discussioncomment-8247584",
                          "updatedAt": "2024-01-25T16:44:14Z",
                          "publishedAt": "2024-01-25T16:44:13Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Bad termination of application",
          "author": {
            "login": "amassaf"
          },
          "bodyText": "Hello, I'm trying to run this file (attached) but I'm getting the error message :\n\nTime Step 0, time = 0\n\nTime Step 1, time = 5e-05, dt = 5e-05\n 0 Nonlinear |R| = 4.248216e+02\n\n===================================================================================\n=   BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES\n=   PID 10962 RUNNING AT amval\n=   EXIT CODE: 9\n=   CLEANING UP REMAINING PROCESSES\n=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES\n===================================================================================\nYOUR APPLICATION TERMINATED WITH THE EXIT STRING: Segmentation fault (signal 11)\nThis typically refers to a problem with your application.\nPlease see the FAQ page for debugging suggestions\n\nbi_material_pf.txt",
          "url": "https://github.com/idaholab/moose/discussions/26620",
          "updatedAt": "2024-01-25T16:12:46Z",
          "publishedAt": "2024-01-24T14:16:02Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "amassaf"
                  },
                  "bodyText": "I am using two different materials, one is elastic and the other one with phase field damage (ComputeLinearElasticPFFractureStress).",
                  "url": "https://github.com/idaholab/moose/discussions/26620#discussioncomment-8243867",
                  "updatedAt": "2024-01-25T11:13:37Z",
                  "publishedAt": "2024-01-25T11:13:36Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I did not see anything obvious. We would have to start debugging\nDo you mind getting a backtrace for the error? There are instructions here\nhttps://mooseframework.inl.gov/application_development/debugging.html\n@laagesen for awareness",
                          "url": "https://github.com/idaholab/moose/discussions/26620#discussioncomment-8247241",
                          "updatedAt": "2024-01-25T16:12:47Z",
                          "publishedAt": "2024-01-25T16:12:46Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Simulating borehole falling head test",
          "author": {
            "login": "nlosacco"
          },
          "bodyText": "Hi all,\nI wish to simulate a variable head permeability test (Lefranc test) in a borehole. A borehole with an open tip is filled with water and the decrease in water level in time is measured. Few possibilities:\n\nsimulate the borehole as filled with a fictitious porous very permeable material, with a quasi step-function water retention curve\nsimulate water in the borehole with as a fluid in an Eulerian mesh, copuled at the bottom with a lagrangian mesh of the soil, where the varying water flow at the bottom acts as a flux into the soil\n\n1 is feasible but i\u2019d rather go for 2 as it\u2019s more realistic and does not require fictitious material properties.\nIs there such a possibility in MOOSE? What options should I look at? Any other suggestions?",
          "url": "https://github.com/idaholab/moose/discussions/26599",
          "updatedAt": "2024-01-25T16:07:48Z",
          "publishedAt": "2024-01-21T09:50:18Z",
          "category": {
            "name": "Q&A Modules: Porous Flow"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "josebastiase"
                  },
                  "bodyText": "Hi,\nAn alternative would be to write a ScalarKernel, with the variable being the height of the water in the well (or the porepressure at the bottom, etc \u2013 whatever is convenient. i.e. dh/dt ), which gets fed the water from your Sinks.  This is fully-coupled.  Look at things like ParsedODEKernel, or PPValue, and (Coef)ODETimeDerivative.   Ideally, you want the Jacobian (derivative of height of water wrt the porepressures at the well screen) to be correct so your fully-coupled system converges nicely, otherwise you might be forced back to short timesteps.\nTry to make MOOSE to compute the coupling between variables in every non-linear step.\nTry this as an starting point\nhttps://github.com/josebastiase/TSA---Numerical-study/blob/main/Fig_7/S6/k10/Sim_files\nI hope this makes sense",
                  "url": "https://github.com/idaholab/moose/discussions/26599#discussioncomment-8205802",
                  "updatedAt": "2024-01-22T08:53:54Z",
                  "publishedAt": "2024-01-22T08:53:53Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "nlosacco"
                          },
                          "bodyText": "Thanks @josebastiase I\u2019ll have a look at the link. Although, maybe I misunderstood, there are no sinks in the model, but water from the water column itself should infiltrate into the porous soil at the bottom. And the water column height should decrease consequently",
                          "url": "https://github.com/idaholab/moose/discussions/26599#discussioncomment-8206244",
                          "updatedAt": "2024-01-22T09:34:25Z",
                          "publishedAt": "2024-01-22T09:34:24Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "josebastiase"
                          },
                          "bodyText": "yeah the sink is the conection between your well and your porous media. So you have a sink/sourve which moves liquid in/out of your system based on the column of your well",
                          "url": "https://github.com/idaholab/moose/discussions/26599#discussioncomment-8211450",
                          "updatedAt": "2024-01-22T17:11:55Z",
                          "publishedAt": "2024-01-22T17:11:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "nlosacco"
                          },
                          "bodyText": "Hi @josebastiase\nI started from your examples and modified them to suit my needs, but I'm quite stuck. I'm simulating a simple falling head test, in plane strain, the soil column is 1 m wide, 10 m tall, and the initial water column in the well, at the top of the soil column, is 10 m.\nA zero porepressure is applied at the bottom at all times. Can you have a look at my input file? Please find it attached.\nI have convergence issues, the problem won't converge with default settings, if I increase nl_abs_tol to 1.E-8, for instance, it converges but mostly it does not iterate (which I assume means it's not solving anything). And when I manage to make it converge, the height of the water column h does not change during the analysis.\ntest.i.txt\nThanks,\nN",
                          "url": "https://github.com/idaholab/moose/discussions/26599#discussioncomment-8242360",
                          "updatedAt": "2024-01-25T08:49:19Z",
                          "publishedAt": "2024-01-25T08:49:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "nlosacco"
                          },
                          "bodyText": "Hi all, @vabufano\nsomehow I managed to get what I expected, but I really don't know how. I need someone to explain better how the execute_on flags work, as this seems to be the key issue.\nWith respect to the approach proposed by @josebastiase (many thanks) I tackled the problem in a simpler way, i.e. by using a simple Diffusion Kernel. As in the previous file, the rate of water level change in the borehole, dh/dt, is given by the flux Postprocessor, that is a NodalSum of nodal fluxes, saved into the AuxVariable fluxes by a CoupledVarNeumannBC. The latter uses another AuxVariable diff equal to pwp - wellPP at the boundary, where pwp is the nonlinear variable of the diffusion kernel, wellPP is an AuxVariable representing the pressure of the bottom of the borehole (set equal to the scalar variable h).\nI copied the entire Preconditioning block from Jose's example (no idea of what all those options are) but used a standard Executioner.\nNow, the only way to make all this stuff work was setting execute_on = 'TIMESTEP_BEGIN' for the flux Postprocessor, while for the AuxVariables diff and wellPP I also had to set execute_on = 'LINEAR NONLINEAR'. Can someone explain me why? Shouldn't I compute flux also during the iterations? If I do the analysis goes bananas.\nAlso, with this approach the flux is 0 at the first timestep, can I have it start with the correct value?\nThank you in advance\ntest2.i.txt",
                          "url": "https://github.com/idaholab/moose/discussions/26599#discussioncomment-8246106",
                          "updatedAt": "2024-01-25T15:08:31Z",
                          "publishedAt": "2024-01-25T15:02:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Hello\nWhen you pick execute_on flags you are defining the numerical scheme. Executing on linear is as often as possible, while you are solving the linear systems on every iteration.\nnonlinear is in between each newton / nonlinear iteration\ntimestep_begin is only once per time step. This is lagging the quantity, you freeze it at the beginning of the time step.\nThis decision on the execute_on flag can influence the time integration scheme convergence order. It also generally helps to lag things to get convergence. It s a double edged sword\nGuillaume",
                          "url": "https://github.com/idaholab/moose/discussions/26599#discussioncomment-8247102",
                          "updatedAt": "2024-01-25T16:07:49Z",
                          "publishedAt": "2024-01-25T16:07:48Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "PerfGraphOutput",
          "author": {
            "login": "selarem"
          },
          "bodyText": "hello,\nI would like to print the perfolog at the end of  each timestep but with this :\n[pgraph]\ntype = PerfGraphOutput\nexecute_on = 'initial final'\nlevel = 2\nheaviest_branch = true\nheaviest_sections = 7         # Default is 0\ninterval =1\n[]\nI have only at the beginning of the first step.  Is execute_on = 'initial final'   refers to the start and end of the  entire computation ?\nregards,",
          "url": "https://github.com/idaholab/moose/discussions/26632",
          "updatedAt": "2024-02-19T16:15:51Z",
          "publishedAt": "2024-01-25T12:02:18Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYes exactly.\nFor timestep begin and end it s execute_on = timestep_begin/end respectively\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/26632#discussioncomment-8245600",
                  "updatedAt": "2024-01-25T14:17:21Z",
                  "publishedAt": "2024-01-25T14:17:20Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Saturations in NCG",
          "author": {
            "login": "marinsiebert"
          },
          "bodyText": "Hello,\nis there a way to output the saturations of the components resulting from calculations of the NCG fluid state?\nSo far I have only been able to see saturations for each phase (liquid, gas), however I would like to be able to differentiate between NCG and vapor - as I understand it, the PorousflowPropertyAux does only account for phases when calculating the saturations. Are there any other possiblities to do this?",
          "url": "https://github.com/idaholab/moose/discussions/26624",
          "updatedAt": "2024-01-25T11:35:08Z",
          "publishedAt": "2024-01-24T15:25:39Z",
          "category": {
            "name": "Q&A Modules: Porous Flow"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "@1runer",
                  "url": "https://github.com/idaholab/moose/discussions/26624#discussioncomment-8234288",
                  "updatedAt": "2024-01-24T15:31:39Z",
                  "publishedAt": "2024-01-24T15:31:38Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "1runer"
                  },
                  "bodyText": "PorousflowPropertyAux just allows for outputting the phase saturations or each mass fraction variable in each phase.\nI don't think there are component saturations within each phase calculated.\nMaybe this page is helpful.\nOtherwise @cpgr could probably correct me.",
                  "url": "https://github.com/idaholab/moose/discussions/26624#discussioncomment-8238727",
                  "updatedAt": "2024-01-24T23:23:37Z",
                  "publishedAt": "2024-01-24T23:23:36Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "cpgr"
                          },
                          "bodyText": "@1runer is correct. You can output the mass fraction of each component in the gas phase using PorousFlowPropertyAux. If you want to compute the fraction of gas phase saturation of each gas component, you could probably do so knowing the mass fractions and densities?",
                          "url": "https://github.com/idaholab/moose/discussions/26624#discussioncomment-8238948",
                          "updatedAt": "2024-01-25T00:06:55Z",
                          "publishedAt": "2024-01-25T00:06:54Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "marinsiebert"
                  },
                  "bodyText": "Thank you,  I will look into it.",
                  "url": "https://github.com/idaholab/moose/discussions/26624#discussioncomment-8244045",
                  "updatedAt": "2024-01-25T11:35:09Z",
                  "publishedAt": "2024-01-25T11:35:08Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Error message",
          "author": {
            "login": "nourriahi"
          },
          "bodyText": "Hello,\nI was trying to run again a code that I have written two months ago which was working perfectly at that time, but, today I am getting this error message which I can not understand the reason for, bearing in mind that I have not changed anything in that code.\n\nThanks,",
          "url": "https://github.com/idaholab/moose/discussions/26621",
          "updatedAt": "2024-01-24T17:12:37Z",
          "publishedAt": "2024-01-24T14:26:12Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThe input file may have changed, it looks like a simple syntax error like a missing quote or an empty field after an =  sign\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233357",
                  "updatedAt": "2024-01-24T14:28:52Z",
                  "publishedAt": "2024-01-24T14:28:51Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "nourriahi"
                  },
                  "bodyText": "Hello,\nI have looked into the driving files many times and there is nothing missing,\n[Mesh]\n  [generated_mesh]\n    type = GeneratedMeshGenerator\n    dim = 3               # Mesh Dimension\n    nx = 100              # Number of elements in x direction\n    ny = 100              # Number of elements in y direction\n    nz = 40               # Number of elements in z direction\n    xmax = 1000           # Length of microsructure domain units in um\n    ymax = 1000           # width of microsructure domain  units in um\n    zmax = 100            # depth of microsructure domain units in um\n  []\n[]\n\n[Variables]\n  [temperature]\n  initial_condition = 473                       # powder preheated temperature 300\u00b0C\n  []\n[]\n\n[Kernels]\n  [heat_conduction]\n    type = ADHeatConduction                     # steady_state_term\n    variable = temperature\n  []\n\n  [heat_conduction_time_derivative]\n    type = ADHeatConductionTimeDerivative       # time_dependent_term\n    variable = temperature\n  []\n  \n  [laser_heat_source]\n    type = ADMatHeatSource                      # laser_heat_source\n    material_property = volumetric_heat         # Gaussien elepsoid model\n    variable = temperature\n  []\n[]\n\n[BCs]\n  [back_fixed_temperature]\n    type = ADDirichletBC                        # Fixed BC in the back of the domain\n    variable = temperature\n    boundary = back\n    value = 473\n  []\n  [front_convection]\n    type = HeatConvectionOutFlow                # Radiation and convection losses\n    variable = temperature\n    boundary = front\n    value = 298\n  []\n  [front_radiation]\n    type = HeatRadiationOutFlow                 # Radiation and convection losses\n    variable = temperature\n    boundary = front\n    value = 298\n  []\n[]\n\n[Materials]\n  [Constant]                                               # Constant Material and Process Parameters\n    type = ADGenericConstantMaterial\n    prop_names = ' radiation_heat_transfer_coefficient convective_heat_transfer_coefficient T_infinity '\n    prop_values = ' 4.536e-20 11.2e-12 298 '   # rhtc= W/(um^2*k^4), chtc= W/(um^2.k) T= k\n  []\n\n  [Column]\n  type = PackedColumn\n  temperature = temperature\n  thermal_conductivity_file = data/data/thermal_conductivity_file3.csv              # k=W/(um.k)\n  heat_capacity_file = data/data/heat_capacity_file3.csv                            # cp=J/(kg.k)\n  density_file = data/data/density_file3.csv                                        # rho=kg/um^3\n  outputs = exodus\n  []\n\n  [volumetric_heat]\n  type= FunctionPathEllipsoidHeatSource                    # Double Elipsoid Heat source mode\n  rx = 28                                                  # a for elepsoid (um)\n  ry = 50                                                  # laser radius which is b for elepsoid (um)\n  rz = 40                                                  # c for elepsoid (um)   \n  power = 100                                              # laser power (W)\n  efficiency = 0.4                                         # laser efficiency\n  factor = 1\n  function_x = path_x                                      # laser source path in the 3 directions\n  function_y = path_y\n  function_z = path_z\n  []\n[]\n\n[Functions] \n  [path_x]                                             # laser source path function in x direction\n  type = ParsedFunction\n  value = 500\n  []\n\n  [path_y]                                             # laser source path function in x direction\n  type = ParsedFunction\n  value = 0.8e6*t\n  []\n\n  [path_z]                                             # laser source path function in x direction\n  type = ParsedFunction\n  value = 100\n  []\n[]\n\n[Problem]\n  type = FEProblem                                      # This is a normal type of FE problem in moose\n[]\n\n[VectorPostprocessors]                                  # post_processing of data into a csv file \n  [t_sampler]\n    type = LineValueSampler\n    variable = temperature\n    start_point = '500 500 0'\n    end_point = '500 500 100'\n    num_points = 40\n    sort_by = z\n  []\n[]\n\n[Executioner]\n  type = Transient                                     # time_dependent_problem \n  start_time = 0.0\n  end_time = 3e-3\n\n  dt = 2e-5                                            # timestepper \n  dtmin = 1e-8                                         # minimum timestepper in case of divergeance \n\n  solve_type = PJFNK                                   # preconditionned jacobian\n  petsc_options_iname = '-pc_type -pc_hypre_type'\n  petsc_options_value = 'hypre boomeramg'\n  \n  steady_state_tolerance = 10e-4\n  steady_state_detection = true\n\n   \n[]\n\n[Controls]\n  [Laser_Source]                                             # Laser source off (outside domain)\n   type = TimePeriod\n   disable_objects = 'Kernels/laser_heat_source'\n   start_time = '1.25e-3'\n   execute_on  = 'initial timestep_begin'\n  []\n  [Radiation]                                                # No radiation (laser source is off)\n   type = TimePeriod\n   disable_objects = 'BCs/front_radiation'\n   start_time = '1.25e-3'\n   execute_on  = 'initial timestep_begin'\n  []\n[]\n\n[Outputs]\n  exodus = true\n\n  [csv]\n    type = CSV                                                          # Extraction of data in the form of a CSV FILE\n    file_base = excel_Al12Si/additive_manufacturing_temperature_profile_output_Al12Si\n    start_time = 0.0\n    end_time = 3e-3\n    interval = 1\n    execute_on = timestep_end\n  []\n[]",
                  "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233464",
                  "updatedAt": "2024-01-24T14:39:44Z",
                  "publishedAt": "2024-01-24T14:37:06Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Are you using WSL?\nThere could be some screwy conversion of the input file.\nThe input file actually runs fine on my machine once I comment out the objects i dont have in my code",
                  "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233590",
                  "updatedAt": "2024-01-24T14:43:43Z",
                  "publishedAt": "2024-01-24T14:43:42Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "nourriahi"
                          },
                          "bodyText": "I have not changed anything since I installed moose 6months ago, I did not have any problems before but now I keep getting the same error message. I am not aware of what I am using since IT did the installation on the remote computer but I have sent them the instructions on your website which I believe they have followed.",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233657",
                          "updatedAt": "2024-01-24T14:48:17Z",
                          "publishedAt": "2024-01-24T14:48:16Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I think your text editor did something.\nI copy pasted, removed some objects that dont run with my executable and it runs.\nWhat are you using to edit the input file on the remote computer?\n\n\n*** Warning, This code is deprecated and will be removed in future versions:\n/Users/giudgl/projects/Studies/Discussions/test.i:92: (Functions/path_x/value):\nThe parameter 'value' is deprecated.\nUse 'expression' instead.\n\nSetting Up\n  Initializing\n    Finished Initializing Equation Systems                                               [  3.07 s] [  668 MB]\n  Finished Initializing                                                                  [  3.59 s] [  668 MB]\nFinished Setting Up                                                                      [  6.55 s] [  668 MB]\nFramework Information:\nMOOSE Version:           git commit 1b566e464c on 2024-01-22\nLibMesh Version:         \nPETSc Version:           3.20.1\nSLEPc Version:           3.20.0\nCurrent Time:            Wed Jan 24 07:45:50 2024\nExecutable Timestamp:    Mon Jan 22 14:46:52 2024\n\nParallelism:\n  Num Processors:          1\n  Num Threads:             1\n\nMesh: \n  Parallel Type:           replicated\n  Mesh Dimension:          3\n  Spatial Dimension:       3\n  Nodes:                   418241\n  Elems:                   400000\n  Num Subdomains:          1\n\nNonlinear System:\n  Num DOFs:                418241\n  Num Local DOFs:          418241\n  Variables:               \"temperature\" \n  Finite Element Types:    \"LAGRANGE\" \n  Approximation Orders:    \"FIRST\" \n\nExecution Information:\n  Executioner:             Transient\n  TimeStepper:             ConstantDT\n  TimeIntegrator:          ImplicitEuler\n  Solver Mode:             Preconditioned JFNK\n  PETSc Preconditioner:    hypre boomeramg strong_threshold: 0.7 (auto)\n\nCurrently Executing\n  Performing Initial Setup\n    Projecting Initial Solutions                                                         [ 14.16 s] [  670 MB]\n    Currently Setting Up Materials\n      Computing Initial Material Values.                                                 [ 12.25 s] [  671 MB]\n    Finished Setting Up Materials                                                        [ 12.25 s] [  671 MB]\n    Finished Building SemiLocalElemMap                                                   [  8.50 s] [  743 MB]\n  Finished Performing Initial Setup                                                      [ 35.52 s] [  796 MB]\n\nTime Step 0, time = 0\n\nTime Step 1, time = 2e-05, dt = 2e-05\n\n    Computing Initial Residual\n      Finished Computing Residual                                                        [  5.55 s] [  874 MB]\n    Finished Computing Initial Residual                                                  [  5.55 s] [  874 MB]\n    Computing Residual                                                                   [  5.49 s] [  892 MB]\n 0 Nonlinear |R| = 1.851355e+00\n    Computing Jacobian.....                                                              [ 33.35 s] [  983 MB]\n      0 Linear |R| = 1.851355e+00\n    Computing Residual                                                                   [  5.50 s] [ 1769 MB]\n    Computing Residual                                                                   [  5.58 s] [ 1786 MB]\n      1 Linear |R| = 7.336903e-02",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233693",
                          "updatedAt": "2024-01-24T14:50:35Z",
                          "publishedAt": "2024-01-24T14:50:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "nourriahi"
                          },
                          "bodyText": "I was using notepad earlier, but now I have switched to VS code and I have taken off all the comments but still the same",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233844",
                          "updatedAt": "2024-01-24T15:01:35Z",
                          "publishedAt": "2024-01-24T15:01:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Something must have gone wrong when you did that\ncan you paste the very current verison of the input file? Use cat to output it",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8233998",
                          "updatedAt": "2024-01-24T15:11:02Z",
                          "publishedAt": "2024-01-24T15:11:01Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "nourriahi"
                          },
                          "bodyText": "[Mesh]\n  [generated_mesh]\n    type = GeneratedMeshGenerator\n    dim = 3\n    nx = 100\n    ny = 100\n    nz = 40\n    xmax = 1000\n    ymax = 1000\n    zmax = 100\n  []\n[]\n\n[Variables]\n  [temperature]\n    initial_condition = 473\n  []\n[]\n\n[Kernels]\n  [heat_conduction]\n    type = ADHeatConduction\n    variable = temperature\n  []\n\n  [heat_conduction_time_derivative]\n    type = ADHeatConductionTimeDerivative\n    variable = temperature\n  []\n\n  [laser_heat_source]\n    type = ADMatHeatSource\n    material_property = volumetric_heat\n    variable = temperature\n  []\n[]\n\n[BCs]\n  [back_fixed_temperature]\n    type = ADDirichletBC\n    variable = temperature\n    boundary = back\n    value = 473\n  []\n  [front_convection]\n    type = HeatConvectionOutFlow\n    variable = temperature\n    boundary = front\n    value = 298\n  []\n  [front_radiation]\n    type = HeatRadiationOutFlow\n    variable = temperature\n    boundary = front\n    value = 298\n  []\n[]\n\n[Materials]\n  [Constant]\n    type = ADGenericConstantMaterial\n    prop_names = ' radiation_heat_transfer_coefficient convective_heat_transfer_                                                                                                             coefficient T_infinity '\n    prop_values = ' 4.536e-20 11.2e-12 298 '\n  []\n\n  [Column]\n  type = PackedColumn\n  temperature = temperature\n  thermal_conductivity_file = data/data/thermal_conductivity_file3.csv                                                                                                                       \n  heat_capacity_file = data/data/heat_capacity_file3.csv                                                                                                                                     \n  density_file = data/data/density_file3.csv                                                                                                                                                 \n  outputs = exodus\n  []\n\n  [volumetric_heat]\n  type= FunctionPathEllipsoidHeatSource\n  rx = 28\n  ry = 50\n  rz = 40\n  power = 100\n  efficiency = 0.4\n  factor = 1\n  function_x = path_x\n  function_y = path_y\n  function_z = path_z\n  []\n[]\n\n[Functions]\n  [path_x]\n  type = ParsedFunction\n  value = 500\n  []\n\n  [path_y]\n  type = ParsedFunction\n  value = 0.8e6*t\n  []\n\n  [path_z]\n  type = ParsedFunction\n  value = 100\n  []\n[]\n\n[Problem]\n  type = FEProblem\n[]\n\n[VectorPostprocessors]\n  [t_sampler]\n    type = LineValueSampler\n    variable = temperature\n    start_point = '500 500 0'\n    end_point = '500 500 100'\n    num_points = 40\n    sort_by = z\n  []\n[]\n\n[Executioner]\n  type = Transient\n  start_time = 0.0\n  end_time = 3e-3\n\n  dt = 2e-5\n  dtmin = 1e-8\n\n  solve_type = PJFNK\n  petsc_options_iname = '-pc_type -pc_hypre_type'\n  petsc_options_value = 'hypre boomeramg'\n\n  steady_state_tolerance = 10e-4\n  steady_state_detection = true\n\n\n[]\n\n[Controls]\n  [Laser_Source]\n   type = TimePeriod\n   disable_objects = 'Kernels/laser_heat_source'\n   start_time = '1.25e-3'\n   execute_on  = 'initial timestep_begin'\n  []\n  [Radiation]\n   type = TimePeriod\n   disable_objects = 'BCs/front_radiation'\n   start_time = '1.25e-3'\n   execute_on  = 'initial timestep_begin'\n  []\n[]\n\n[Outputs]\n  exodus = true\n\n  [csv]\n    type = CSV\n    file_base = excel_Al12Si/additive_manufacturing_temperature_profile_output_A                                                                                                             l12Si\n    start_time = 0.0\n    end_time = 3e-3\n    interval = 1\n    execute_on = timestep_end\n  []\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8234328",
                          "updatedAt": "2024-01-24T22:02:08Z",
                          "publishedAt": "2024-01-24T15:34:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "this block is wrong\n\n[Outputs]\nexodus = true\n\n[csv]\ntype = CSV\nfile_base = excel_Al12Si/additive_manufacturing_temperature_profile_output_A l12Si\nstart_time = 0.0\nend_time = 3e-3\ninterval = 1\nexecute_on = timestep_end\n[]\n[]\n\nthis line has an extra space\nfile_base = excel_Al12Si/additive_manufacturing_temperature_profile_output_A l12Si",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8234566",
                          "updatedAt": "2024-01-24T15:53:53Z",
                          "publishedAt": "2024-01-24T15:53:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "nourriahi"
                          },
                          "bodyText": "fixed it but still the same error",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8234669",
                          "updatedAt": "2024-01-24T16:00:45Z",
                          "publishedAt": "2024-01-24T16:00:44Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "parses for me fine with that fix.\nYou need to find other similar issues",
                          "url": "https://github.com/idaholab/moose/discussions/26621#discussioncomment-8235624",
                          "updatedAt": "2024-01-24T17:12:37Z",
                          "publishedAt": "2024-01-24T17:12:37Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Question about Handling Information Between Nested Grids in MOOSE",
          "author": {
            "login": "hityyds"
          },
          "bodyText": "Hi MOOSE community,\nI've been working on a problem involving two nested grids recently. I've learned that CoarseMeshExtraElementIDGenerator can help establish a mapping between coarse and fine grid elements. However, besides the mapping between elements, I'm interested in preserving some additional information about the coarse grid.\nI'm curious about whether the coarse grid can still be accessed after leaving the Mesh block. Specifically, I'd like to know if its memory is released, and if MOOSE only retains information about the fine grid.\nAdditionally, I'm wondering if there's a way to pass data structures, like std::vector, between different kernels in MOOSE. I'm considering saving the coarse grid information in a vector or another suitable form and then inputting it into the required object. If using std::vector directly, I'm unsure about how to declare it in the input file (input.i). I've thought about creating a custom user object to store this information, but I'm not sure how to handle its execute and other functions since I don't need it to perform any calculations.\nAny insights or guidance on these questions would be greatly appreciated!\nThank you,\nhityyds",
          "url": "https://github.com/idaholab/moose/discussions/26623",
          "updatedAt": "2024-01-24T16:05:01Z",
          "publishedAt": "2024-01-24T15:00:34Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThere is a save_in parameter in the mesh generator blocks to let you save another mesh.\nThen the memory wont be released and you can access it during the simulation,\n\nAdditionally, I'm wondering if there's a way to pass data structures, like std::vector, between different kernels in MOOSE\n\nYou can either\n\nsave data to tagged vectors and matrices but it s not an arbitrary data structure.\nuse a material property to compute the quantity you need and share it that way\n\nBut for the coarse grid, looking at save_in is probably the way\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/26623#discussioncomment-8233979",
                  "updatedAt": "2024-01-24T15:10:23Z",
                  "publishedAt": "2024-01-24T15:10:22Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "hityyds"
                          },
                          "bodyText": "Thank you very much for your detailed explanation. Additionally, do you know how to make an object able to load a mesh? I've tried to learn the meshgenerator code, but it includes so many files that I can't figure out which ones I need to include in order to have the functional interfaces.",
                          "url": "https://github.com/idaholab/moose/discussions/26623#discussioncomment-8234326",
                          "updatedAt": "2024-01-24T15:34:47Z",
                          "publishedAt": "2024-01-24T15:34:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "look at the test object\nmeshgenerators/TestMeshGenerator.C\nand getMeshByName",
                          "url": "https://github.com/idaholab/moose/discussions/26623#discussioncomment-8234555",
                          "updatedAt": "2024-01-24T15:52:36Z",
                          "publishedAt": "2024-01-24T15:52:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hityyds"
                          },
                          "bodyText": "Thanks again for your help.",
                          "url": "https://github.com/idaholab/moose/discussions/26623#discussioncomment-8234717",
                          "updatedAt": "2024-01-24T16:04:57Z",
                          "publishedAt": "2024-01-24T16:04:56Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "MPI error building libmesh",
          "author": {
            "login": "ke7kto"
          },
          "bodyText": "This question is related to  discussion #18008. Building libmesh I get the following error:\nSource/moose/petsc/include/petscsys.h:279:25: error: invalid conversion from 'MPI_Comm' {aka 'ompi_communicator_t*'} to 'TIMPI::communicator' {aka 'int'} [-fpermissive]\nI have openmpi-4.1.6-1 installed through my system package manager, which also installed VTK (HDF5 is also installed via system package manager, but petsc requires a static library and my distribution only supplies dynamic libs).\nI can successfully build libmesh with the --download-mpich option, but then building moose fails, as moose still builds with the system openmpi. I'm happy to try to hide the system environment and only pull in the necessary components, but I'm not sure how to do that in the build process.\nThe output of printenv is\nSHELL=/bin/bash\nWINDOWID=50331658\nCOLORTERM=truecolor\nXDG_CONFIG_DIRS=/home/adriaan/.config/kdedefaults:/etc/xdg\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nLANGUAGE=\nSHELL_SESSION_ID=76fb94c65d39499b912cd4cd0e332820\nMEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=\nDESKTOP_SESSION=plasma\nGTK_RC_FILES=/etc/gtk/gtkrc:/home/adriaan/.gtkrc:/home/adriaan/.config/gtkrc\nXCURSOR_SIZE=24\nGTK_MODULES=canberra-gtk-module\nXDG_SEAT=seat0\nPWD=/home/adriaan/Source/moose/scripts\nXDG_SESSION_DESKTOP=KDE\nLOGNAME=adriaan\nXDG_SESSION_TYPE=x11\nSYSTEMD_EXEC_PID=829\nXAUTHORITY=/tmp/xauth_mpBLKW\nMOTD_SHOWN=pam\nGTK2_RC_FILES=/etc/gtk-2.0/gtkrc:/home/adriaan/.gtkrc-2.0:/home/adriaan/.config/gtkrc-2.0\nHOME=/home/adriaan\nLANG=C.UTF-8\nNVCC_PREPEND_FLAGS=-ccbin /opt/cuda/bin\nXDG_CURRENT_DESKTOP=KDE\nKONSOLE_DBUS_SERVICE=:1.59\nMEMORY_PRESSURE_WATCH=/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/background.slice/plasma-kglobalaccel.service/memory.pressure\nKONSOLE_DBUS_SESSION=/Sessions/1\nPROFILEHOME=\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nINVOCATION_ID=2d879f8aa9fa4f55a7514fd672c41abe\nKONSOLE_VERSION=230804\nMANAGERPID=717\nKDE_SESSION_UID=1000\nXDG_SESSION_CLASS=user\nTERM=xterm-256color\nUSER=adriaan\nCUDA_PATH=/opt/cuda\nCOLORFGBG=15;0\nKDE_SESSION_VERSION=5\nDISPLAY=:0\nSHLVL=1\nXDG_VTNR=2\nXDG_SESSION_ID=1\nXDG_RUNTIME_DIR=/run/user/1000\nMKLROOT=/opt/intel/oneapi/mkl/latest\nDEBUGINFOD_URLS=https://debuginfod.archlinux.org\nQT_AUTO_SCREEN_SCALE_FACTOR=0\nJOURNAL_STREAM=8:8707\nXCURSOR_THEME=breeze_cursors\nKDE_FULL_SESSION=true\nPATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/opt/apache-spark/bin:/opt/apache-spark/sbin:/opt/cuda/bin:/opt/cuda/nsight_compute:/opt/cuda/nsight_systems/bin:/usr/lib/jvm/default/bin:/usr/local/bin:/home/adriaan/.local/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\nKDE_APPLICATIONS_AS_SCOPE=1\nMAIL=/var/spool/mail/adriaan\nKONSOLE_DBUS_WINDOW=/Windows/1\nOLDPWD=/home/adriaan/Source/moose\n\nThis is me playing around at home and partially to keep track of my thoughts, not an urgent support request.",
          "url": "https://github.com/idaholab/moose/discussions/26538",
          "updatedAt": "2024-01-24T13:24:00Z",
          "publishedAt": "2024-01-11T20:06:19Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "Can you run the diagnostic script and report those results?\ncd /home/adriaan/Source/moose/scripts\n./diagnostics.sh",
                  "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8100730",
                  "updatedAt": "2024-01-11T20:53:43Z",
                  "publishedAt": "2024-01-11T20:53:43Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "ke7kto"
                          },
                          "bodyText": "Thu Jan 11 15:27:27 MST 2024\n\nSystem Arch: LSB Version: n/a Distributor ID: Arch Description: Arch Linux Release: rolling Codename: n/a\n\nMOOSE Package Version: Custom Build\n\nCPU Count: 16\n\nMemory Free: 14800.590 MB\n\n$CC not set\n\nMPICC:\nwhich mpicc:\n        /usr/bin/mpicc\nmpicc -show:\n        gcc -Wl,-rpath -Wl,/usr/lib -Wl,--enable-new-dtags -lmpi\n\nCOMPILER gcc:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nPython:\n        /usr/bin/python\n        Python 3.11.6\n\nMODULES NOT AVAILABLE\n\nPETSC_DIR not set\n\nENVIRONMENT:\nCOLORFGBG=15;0\nCOLORTERM=truecolor\nCUDA_PATH=/opt/cuda\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\nDEBUGINFOD_URLS=https://debuginfod.archlinux.org\nDESKTOP_SESSION=plasma\nDISPLAY=:0\nGTK2_RC_FILES=/etc/gtk-2.0/gtkrc:/home/adriaan/.gtkrc-2.0:/home/adriaan/.config/gtkrc-2.0\nGTK_MODULES=canberra-gtk-module\nGTK_RC_FILES=/etc/gtk/gtkrc:/home/adriaan/.gtkrc:/home/adriaan/.config/gtkrc\nHOME=/home/adriaan\nINVOCATION_ID=2d879f8aa9fa4f55a7514fd672c41abe\nJOURNAL_STREAM=8:8707\nKDE_APPLICATIONS_AS_SCOPE=1\nKDE_FULL_SESSION=true\nKDE_SESSION_UID=1000\nKDE_SESSION_VERSION=5\nKONSOLE_DBUS_SERVICE=:1.59\nKONSOLE_DBUS_SESSION=/Sessions/2\nKONSOLE_DBUS_WINDOW=/Windows/1\nKONSOLE_VERSION=230804\nLANG=C.UTF-8\nLANGUAGE=\nLOGNAME=adriaan\nMAIL=/var/spool/mail/adriaan\nMANAGERPID=717\nMEMORY_PRESSURE_WATCH=/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/background.slice/plasma-kglobalaccel.service/memory.pressure\nMEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=\nMKLROOT=/opt/intel/oneapi/mkl/latest\nMOTD_SHOWN=pam\nNVCC_PREPEND_FLAGS=-ccbin /opt/cuda/bin\nOLDPWD=/home/adriaan/Source/moose/libmesh/build\nPATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/opt/apache-spark/bin:/opt/apache-spark/sbin:/opt/cuda/bin:/opt/cuda/nsight_compute:/opt/cuda/nsight_systems/bin:/usr/lib/jvm/default/bin:/usr/local/bin:/home/adriaan/.local/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nPROFILEHOME=\nPWD=/home/adriaan/Source/moose/scripts\nQT_AUTO_SCREEN_SCALE_FACTOR=0\nSHELL=/bin/bash\nSHELL_SESSION_ID=9034abfde29a4d85b10dd368a4c2e0b3\nSHLVL=2\nSYSTEMD_EXEC_PID=829\nTERM=xterm-256color\nUSER=adriaan\nWINDOWID=50331658\nXAUTHORITY=/tmp/xauth_mpBLKW\nXCURSOR_SIZE=24\nXCURSOR_THEME=breeze_cursors\nXDG_CONFIG_DIRS=/home/adriaan/.config/kdedefaults:/etc/xdg\nXDG_CURRENT_DESKTOP=KDE\nXDG_RUNTIME_DIR=/run/user/1000\nXDG_SEAT=seat0\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nXDG_SESSION_CLASS=user\nXDG_SESSION_DESKTOP=KDE\nXDG_SESSION_ID=1\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nXDG_SESSION_TYPE=x11\nXDG_VTNR=2\n_=/usr/bin/env",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8101438",
                          "updatedAt": "2024-01-11T22:28:13Z",
                          "publishedAt": "2024-01-11T22:28:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "so /usr/bin/mpicc is openmpi ? It definitely shows as the first one it finds to build moose\nwhy did you install with --download-mpich?\nI would set CC, FC, CXX to whichever mpicc/f90/cxx you want to use",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8101472",
                          "updatedAt": "2024-01-11T22:34:21Z",
                          "publishedAt": "2024-01-11T22:34:20Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ke7kto"
                          },
                          "bodyText": "I set --download-mpich as a troubleshooting step, I only mentioned that as it seems the issue is partially resolved by avoiding the system openmpi. Explicitly setting to system mpi (and running git clean -fdx):\nadriaan@Fermat:~/Source/moose/scripts$ export CC=$(which mpicc)\nadriaan@Fermat:~/Source/moose/scripts$ export f90=$(which mpif90)\nadriaan@Fermat:~/Source/moose/scripts$ echo $CXX $CC $f90\n/usr/bin/mpicxx /usr/bin/mpicc /usr/bin/mpif90\nadriaan@Fermat:~/Source/moose/scripts$ ./diagnostics.sh \nThu Jan 11 16:02:21 MST 2024\n\nSystem Arch: LSB Version: n/a Distributor ID: Arch Description: Arch Linux Release: rolling Codename: n/a\n\nMOOSE Package Version: Custom Build\n\nCPU Count: 16\n\nMemory Free: 14456.875 MB\n\nVariable `which $CC` check:\n/usr/bin/mpicc\n\n$CC --version:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nMPICC:\nwhich mpicc:\n        /usr/bin/mpicc\nmpicc -show:\n        gcc -Wl,-rpath -Wl,/usr/lib -Wl,--enable-new-dtags -lmpi\n\nCOMPILER gcc:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nPython:\n        /usr/bin/python\n        Python 3.11.6\n\nMODULES NOT AVAILABLE\n\nPETSC_DIR not set\n\nENVIRONMENT:\nCC=/usr/bin/mpicc\nCOLORFGBG=15;0\nCOLORTERM=truecolor\nCUDA_PATH=/opt/cuda\nCXX=/usr/bin/mpicxx\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\nDEBUGINFOD_URLS=https://debuginfod.archlinux.org\nDESKTOP_SESSION=plasma\nDISPLAY=:0\nGTK2_RC_FILES=/etc/gtk-2.0/gtkrc:/home/adriaan/.gtkrc-2.0:/home/adriaan/.config/gtkrc-2.0\nGTK_MODULES=canberra-gtk-module\nGTK_RC_FILES=/etc/gtk/gtkrc:/home/adriaan/.gtkrc:/home/adriaan/.config/gtkrc\nHOME=/home/adriaan\nINVOCATION_ID=2d879f8aa9fa4f55a7514fd672c41abe\nJOURNAL_STREAM=8:8707\nKDE_APPLICATIONS_AS_SCOPE=1\nKDE_FULL_SESSION=true\nKDE_SESSION_UID=1000\nKDE_SESSION_VERSION=5\nKONSOLE_DBUS_SERVICE=:1.59\nKONSOLE_DBUS_SESSION=/Sessions/2\nKONSOLE_DBUS_WINDOW=/Windows/1\nKONSOLE_VERSION=230804\nLANG=C.UTF-8\nLANGUAGE=\nLOGNAME=adriaan\nMAIL=/var/spool/mail/adriaan\nMANAGERPID=717\nMEMORY_PRESSURE_WATCH=/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/background.slice/plasma-kglobalaccel.service/memory.pressure\nMEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=\nMKLROOT=/opt/intel/oneapi/mkl/latest\nMOTD_SHOWN=pam\nNVCC_PREPEND_FLAGS=-ccbin /opt/cuda/bin\nOLDPWD=/home/adriaan/Source/moose/petsc\nPATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/opt/apache-spark/bin:/opt/apache-spark/sbin:/opt/cuda/bin:/opt/cuda/nsight_compute:/opt/cuda/nsight_systems/bin:/usr/lib/jvm/default/bin:/usr/local/bin:/home/adriaan/.local/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nPROFILEHOME=\nPWD=/home/adriaan/Source/moose/scripts\nQT_AUTO_SCREEN_SCALE_FACTOR=0\nSHELL=/bin/bash\nSHELL_SESSION_ID=9034abfde29a4d85b10dd368a4c2e0b3\nSHLVL=2\nSYSTEMD_EXEC_PID=829\nTERM=xterm-256color\nUSER=adriaan\nWINDOWID=50331658\nXAUTHORITY=/tmp/xauth_mpBLKW\nXCURSOR_SIZE=24\nXCURSOR_THEME=breeze_cursors\nXDG_CONFIG_DIRS=/home/adriaan/.config/kdedefaults:/etc/xdg\nXDG_CURRENT_DESKTOP=KDE\nXDG_RUNTIME_DIR=/run/user/1000\nXDG_SEAT=seat0\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nXDG_SESSION_CLASS=user\nXDG_SESSION_DESKTOP=KDE\nXDG_SESSION_ID=1\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nXDG_SESSION_TYPE=x11\nXDG_VTNR=2\n_=/usr/bin/env\nf90=/usr/bin/mpif90\n\nI get: ../src/base/libmesh.C: In constructor 'libMesh::LibMeshInit::LibMeshInit(int, const char* const*, TIMPI::communicator, int)': /home/adriaan/Source/moose/petsc/include/petscsys.h:279:25: error: invalid conversion from 'MPI_Comm' {aka 'ompi_communicator_t*'} to 'TIMPI::communicator' {aka 'int'} [-fpermissive] \nIf, on the other hand, I run with:\nadriaan@Fermat:~/Source/moose/scripts$ ./update_and_rebuild_petsc.sh --download-mpich Then setting CC, FC and CXX to the petsc arch-moose directory:\nThu Jan 11 16:36:14 MST 2024\n\nSystem Arch: LSB Version: n/a Distributor ID: Arch Description: Arch Linux Release: rolling Codename: n/a\n\nMOOSE Package Version: Custom Build\n\nCPU Count: 16\n\nMemory Free: 13332.328 MB\n\nVariable `which $CC` check:\n/home/adriaan/Source/moose/petsc/arch-moose/bin/mpicc\n\n$CC --version:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nMPICC:\nwhich mpicc:\n        /usr/bin/mpicc\nmpicc -show:\n        gcc -Wl,-rpath -Wl,/usr/lib -Wl,--enable-new-dtags -lmpi\n\nCOMPILER gcc:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nPython:\n        /usr/bin/python\n        Python 3.11.6\n\nMODULES NOT AVAILABLE\n\nPETSC_DIR not set\n\nENVIRONMENT:\nCC=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpicc\nCOLORFGBG=15;0\nCOLORTERM=truecolor\nCUDA_PATH=/opt/cuda\nCXX=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpicxx\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\nDEBUGINFOD_URLS=https://debuginfod.archlinux.org\nDESKTOP_SESSION=plasma\nDISPLAY=:0\nF90=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpif90\nFC=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpif90\nGTK2_RC_FILES=/etc/gtk-2.0/gtkrc:/home/adriaan/.gtkrc-2.0:/home/adriaan/.config/gtkrc-2.0\nGTK_MODULES=canberra-gtk-module\nGTK_RC_FILES=/etc/gtk/gtkrc:/home/adriaan/.gtkrc:/home/adriaan/.config/gtkrc\nHOME=/home/adriaan\nINVOCATION_ID=2d879f8aa9fa4f55a7514fd672c41abe\nJOURNAL_STREAM=8:8707\nKDE_APPLICATIONS_AS_SCOPE=1\nKDE_FULL_SESSION=true\nKDE_SESSION_UID=1000\nKDE_SESSION_VERSION=5\nKONSOLE_DBUS_SERVICE=:1.59\nKONSOLE_DBUS_SESSION=/Sessions/2\nKONSOLE_DBUS_WINDOW=/Windows/1\nKONSOLE_VERSION=230804\nLANG=C.UTF-8\nLANGUAGE=\nLOGNAME=adriaan\nMAIL=/var/spool/mail/adriaan\nMANAGERPID=717\nMEMORY_PRESSURE_WATCH=/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/background.slice/plasma-kglobalaccel.service/memory.pressure\nMEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=\nMKLROOT=/opt/intel/oneapi/mkl/latest\nMOTD_SHOWN=pam\nNVCC_PREPEND_FLAGS=-ccbin /opt/cuda/bin\nOLDPWD=/home/adriaan/Source/moose/petsc\nPATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/opt/apache-spark/bin:/opt/apache-spark/sbin:/opt/cuda/bin:/opt/cuda/nsight_compute:/opt/cuda/nsight_systems/bin:/usr/lib/jvm/default/bin:/usr/local/bin:/home/adriaan/.local/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nPROFILEHOME=\nPWD=/home/adriaan/Source/moose/scripts\nQT_AUTO_SCREEN_SCALE_FACTOR=0\nSHELL=/bin/bash\nSHELL_SESSION_ID=9034abfde29a4d85b10dd368a4c2e0b3\nSHLVL=2\nSYSTEMD_EXEC_PID=829\nTERM=xterm-256color\nUSER=adriaan\nWINDOWID=50331658\nXAUTHORITY=/tmp/xauth_mpBLKW\nXCURSOR_SIZE=24\nXCURSOR_THEME=breeze_cursors\nXDG_CONFIG_DIRS=/home/adriaan/.config/kdedefaults:/etc/xdg\nXDG_CURRENT_DESKTOP=KDE\nXDG_RUNTIME_DIR=/run/user/1000\nXDG_SEAT=seat0\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nXDG_SESSION_CLASS=user\nXDG_SESSION_DESKTOP=KDE\nXDG_SESSION_ID=1\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nXDG_SESSION_TYPE=x11\nXDG_VTNR=2\n_=/usr/bin/env\nf90=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpif90\n\nThere's a warning (when building libmesh):\n/usr/bin/ld: warning: libmpi.so.40, needed by /lib/libvtkParallelMPI.so, may conflict with libmpi.so.12\nand although ./update_and_rebuild_petsc.sh; ./update_and_rebuild_libmesh.sh; ./update_and_rebuild_wasp.sh  works just fine, when I go into framework and make, I get errors such as the following:\n  257 | MPI_Comm swapLibMeshComm(MPI_Comm new_comm);\n      | ^~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:264:29: error: expected ')' before 'new_comm'\n  264 |   ScopedCommSwapper(MPI_Comm new_comm) : _orig(swapLibMeshComm(new_comm)) {}\n      |                    ~        ^~~~~~~~~\n      |                             )\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:273:3: error: 'MPI_Comm' does not name a type\n  273 |   MPI_Comm _orig;\n      |   ^~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h: In destructor 'virtual Moose::ScopedCommSwapper::~ScopedCommSwapper()':\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:265:50: error: '_orig' was not declared in this scope\n  265 |   virtual ~ScopedCommSwapper() { swapLibMeshComm(_orig); }\n      |                                                  ^~~~~\nIn file included from /home/adriaan/Source/moose/framework/build/header_symlinks/MooseTypes.h:12,\n                 from /home/adriaan/Source/moose/framework/build/header_symlinks/VectorPostprocessor.h:13,\n                 from /home/adriaan/Source/moose/framework/build/header_symlinks/GeneralVectorPostprocessor.h:13,\n                 from /home/adriaan/Source/moose/framework/build/header_symlinks/CSVReaderVectorPostprocessor.h:13,\n                 from /home/adriaan/Source/moose/framework/src/vectorpostprocessors/CSVReaderVectorPostprocessor.C:14,\n                 from /home/adriaan/Source/moose/framework/build/unity_src/vectorpostprocessors_Unity.C:2:\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:257:1: error: 'MPI_Comm' does not name a type\n  257 | MPI_Comm swapLibMeshComm(MPI_Comm new_comm);\n      | ^~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:264:29: error: expected ')' before 'new_comm'\n  264 |   ScopedCommSwapper(MPI_Comm new_comm) : _orig(swapLibMeshComm(new_comm)) {}\n      |                    ~        ^~~~~~~~~\n      |                             )\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:273:3: error: 'MPI_Comm' does not name a type\n  273 |   MPI_Comm _orig;\n      |   ^~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h: In destructor 'virtual Moose::ScopedCommSwapper::~ScopedCommSwapper()':\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:265:50: error: '_orig' was not declared in this scope\n  265 |   virtual ~ScopedCommSwapper() { swapLibMeshComm(_orig); }\n      |                                                  ^~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:265:34: error: 'swapLibMeshComm' was not declared in this scope\n  265 |   virtual ~ScopedCommSwapper() { swapLibMeshComm(_orig); }\n      |                                  ^~~~~~~~~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:265:34: error: 'swapLibMeshComm' was not declared in this scope\n  265 |   virtual ~ScopedCommSwapper() { swapLibMeshComm(_orig); }\n      |                                  ^~~~~~~~~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h: In member function 'void Moose::ScopedCommSwapper::forceSwap()':\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:270:22: error: '_orig' was not declared in this scope\n  270 |   void forceSwap() { _orig = swapLibMeshComm(_orig); }\n      |                      ^~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h: In member function 'void Moose::ScopedCommSwapper::forceSwap()':\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:270:22: error: '_orig' was not declared in this scope\n  270 |   void forceSwap() { _orig = swapLibMeshComm(_orig); }\n      |                      ^~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:270:30: error: 'swapLibMeshComm' was not declared in this scope\n  270 |   void forceSwap() { _orig = swapLibMeshComm(_orig); }\n      |                              ^~~~~~~~~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:270:30: error: 'swapLibMeshComm' was not declared in this scope\n  270 |   void forceSwap() { _orig = swapLibMeshComm(_orig); }\n      |                              ^~~~~~~~~~~~~~~",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8102643",
                          "updatedAt": "2024-01-12T00:41:08Z",
                          "publishedAt": "2024-01-12T00:41:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "A) openmpi\n\nI get: ../src/base/libmesh.C: In constructor 'libMesh::LibMeshInit::LibMeshInit(int, const char* const*, TIMPI::communicator, int)': /home/adriaan/Source/moose/petsc/include/petscsys.h:279:25: error: invalid conversion from 'MPI_Comm' {aka 'ompi_communicator_t*'} to 'TIMPI::communicator' {aka 'int'} [-fpermissive]\n\nyou get that when building libmesh with openmpi, but petsc built fine?\nB) in your mpich attempt you still have this:\nMPICC:\nwhich mpicc:\n        /usr/bin/mpicc\n\nit should not be that one, it needs to find your mpich one",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8103369",
                          "updatedAt": "2024-01-12T01:34:03Z",
                          "publishedAt": "2024-01-12T01:34:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ke7kto"
                          },
                          "bodyText": "you get that when building libmesh with openmpi, but petsc built fine?\n\nYes. Running make check in the petsc folder comes back clean as well.\n\nit should not be that one, it needs to find your mpich one\n\nThanks for catching that. I put the petsc bin folder at the beginning of the path and tried again.\nThu Jan 11 21:07:27 MST 2024\n\nSystem Arch: LSB Version: n/a Distributor ID: Arch Description: Arch Linux Release: rolling Codename: n/a\n\nMOOSE Package Version: Custom Build\n\nCPU Count: 16\n\nMemory Free: 14887.379 MB\n\nVariable `which $CC` check:\n/home/adriaan/Source/moose/petsc/arch-moose/bin/mpicc\n\n$CC --version:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nMPICC:\nwhich mpicc:\n        /home/adriaan/Source/moose/petsc/arch-moose/bin/mpicc\nmpicc -show:\n        gcc -fPIC -Wno-lto-type-mismatch -Wno-stringop-overflow -g -O -I/home/adriaan/Source/moose/petsc/arch-moose/include -L/home/adriaan/Source/moose/petsc/arch-moose/lib -Wl,-rpath -Wl,/home/adriaan/Source/moose/petsc/arch-moose/lib -Wl,--enable-new-dtags -lmpi\n\nCOMPILER gcc:\ngcc (GCC) 13.2.1 20230801\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nPython:\n        /usr/bin/python\n        Python 3.11.6\n\nMODULES NOT AVAILABLE\n\nPETSC_DIR not set\n\nENVIRONMENT:\nCC=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpicc\nCOLORFGBG=15;0\nCOLORTERM=truecolor\nCUDA_PATH=/opt/cuda\nCXX=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpicxx\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus\nDEBUGINFOD_URLS=https://debuginfod.archlinux.org\nDESKTOP_SESSION=plasma\nDISPLAY=:0\nF90=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpif90\nFC=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpif90\nGTK2_RC_FILES=/etc/gtk-2.0/gtkrc:/home/adriaan/.gtkrc-2.0:/home/adriaan/.config/gtkrc-2.0\nGTK_MODULES=canberra-gtk-module\nGTK_RC_FILES=/etc/gtk/gtkrc:/home/adriaan/.gtkrc:/home/adriaan/.config/gtkrc\nHOME=/home/adriaan\nINVOCATION_ID=2d879f8aa9fa4f55a7514fd672c41abe\nJOURNAL_STREAM=8:8707\nKDE_APPLICATIONS_AS_SCOPE=1\nKDE_FULL_SESSION=true\nKDE_SESSION_UID=1000\nKDE_SESSION_VERSION=5\nKONSOLE_DBUS_SERVICE=:1.59\nKONSOLE_DBUS_SESSION=/Sessions/2\nKONSOLE_DBUS_WINDOW=/Windows/1\nKONSOLE_VERSION=230804\nLANG=C.UTF-8\nLANGUAGE=\nLOGNAME=adriaan\nMAIL=/var/spool/mail/adriaan\nMANAGERPID=717\nMEMORY_PRESSURE_WATCH=/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/background.slice/plasma-kglobalaccel.service/memory.pressure\nMEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=\nMKLROOT=/opt/intel/oneapi/mkl/latest\nMOTD_SHOWN=pam\nNVCC_PREPEND_FLAGS=-ccbin /opt/cuda/bin\nOLDPWD=/home/adriaan/Source/moose/framework\nPATH=/home/adriaan/Source/moose/petsc/arch-moose/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/opt/apache-spark/bin:/opt/apache-spark/sbin:/opt/cuda/bin:/opt/cuda/nsight_compute:/opt/cuda/nsight_systems/bin:/usr/lib/jvm/default/bin:/usr/local/bin:/home/adriaan/.local/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nPROFILEHOME=\nPWD=/home/adriaan/Source/moose/scripts\nQT_AUTO_SCREEN_SCALE_FACTOR=0\nSHELL=/bin/bash\nSHELL_SESSION_ID=9034abfde29a4d85b10dd368a4c2e0b3\nSHLVL=2\nSYSTEMD_EXEC_PID=829\nTERM=xterm-256color\nUSER=adriaan\nWINDOWID=50331658\nXAUTHORITY=/tmp/xauth_mpBLKW\nXCURSOR_SIZE=24\nXCURSOR_THEME=breeze_cursors\nXDG_CONFIG_DIRS=/home/adriaan/.config/kdedefaults:/etc/xdg\nXDG_CURRENT_DESKTOP=KDE\nXDG_RUNTIME_DIR=/run/user/1000\nXDG_SEAT=seat0\nXDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\nXDG_SESSION_CLASS=user\nXDG_SESSION_DESKTOP=KDE\nXDG_SESSION_ID=1\nXDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\nXDG_SESSION_TYPE=x11\nXDG_VTNR=2\n_=/usr/bin/env\nf90=/home/adriaan/Source/moose/petsc/arch-moose/bin/mpif90\n\nPetsc and libmesh and wasp seem to compile fine, but get\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:257:1: error: 'MPI_Comm' does not name a type\n  257 | MPI_Comm swapLibMeshComm(MPI_Comm new_comm);\n      | ^~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:264:29: error: expected ')' before 'new_comm'\n  264 |   ScopedCommSwapper(MPI_Comm new_comm) : _orig(swapLibMeshComm(new_comm)) {}\n      |                    ~        ^~~~~~~~~\n      |                             )\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:273:3: error: 'MPI_Comm' does not name a type\n  273 |   MPI_Comm _orig;\n      |   ^~~~~~~~\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h: In destructor 'virtual Moose::ScopedCommSwapper::~ScopedCommSwapper()':\n/home/adriaan/Source/moose/framework/build/header_symlinks/Moose.h:265:50: error: '_orig' was not declared in this scope\n  265 |   virtual ~ScopedCommSwapper() { swapLibMeshComm(_orig); }\n      |                                                  ^~~~~\n\nand similar errors on running moose make.",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8104572",
                          "updatedAt": "2024-01-12T04:12:54Z",
                          "publishedAt": "2024-01-12T04:12:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Did you git clean moose before recompiling?\nI don't see anything wrong in the diagnostics at this point for the mpich route.",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8109197",
                          "updatedAt": "2024-01-12T11:38:54Z",
                          "publishedAt": "2024-01-12T11:38:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I suspect MOOSE is being asked to link to libraries among the system path. And in so doing, it is linking to the system OpenMPI library still.\nCan you run the following script, and report the results?\n/home/adriaan/Source/moose/libmesh/installed/bin/libmesh-config --libs",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8133076",
                          "updatedAt": "2024-01-15T13:22:32Z",
                          "publishedAt": "2024-01-15T13:22:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ke7kto"
                          },
                          "bodyText": "Did you git clean moose before recompiling?\n\nYes.\n\nCan you run the following script, and report the results?\n\nadriaan@Fermat:~/Source/moose/scripts$ /home/adriaan/Source/moose/libmesh/installed/bin/libmesh-config --libs\n-Wl,-rpath,/home/adriaan/Source/moose/scripts/../libmesh/installed/lib \n-L/home/adriaan/Source/moose/scripts/../libmesh/installed/lib -lmesh_opt \n-ltimpi_opt -Wl,-rpath,/home/adriaan/Source/moose/petsc/arch-moose/lib \n-L/home/adriaan/Source/moose/petsc/arch-moose/lib -L/lib -Wl,-rpath,/lib \n-Wl,-rpath,/usr/lib -L/usr/lib -Wl,-rpath,/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.1 \n-L/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.1 -lvtkIOCore -lvtkCommonCore -lvtkCommonDataModel \n-lvtkFiltersCore -lvtkIOXML -lvtkImagingCore -lvtkIOImage -lvtkImagingMath -lvtkIOParallelXML \n-lvtkParallelMPI -lvtkParallelCore -lvtkCommonExecutionModel -lvtksys -lz -lslepc -lpetsc -lHYPRE \n-ldmumps -lmumps_common -lpord -lpthread -lstrumpack -lscalapack -lsuperlu_dist -lflapack \n-lfblas -lptesmumps -lptscotchparmetisv3 -lptscotch -lptscotcherr -lesmumps -lscotch -lscotcherr \n-lparmetis -lmetis -lhdf5_hl -lhdf5 -lX11 -lmpifort -lmpi -lgfortran -lm -lgcc_s -lquadmath -lstdc++ -lrt -ltirpc\n\nIf I understand correctly, the system VTK is being linked, which uses the system openmpi.\nI'll try building and linking VTK using PETSC's mpich tomorrow. Are there other libs I should be watching out for?",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8139591",
                          "updatedAt": "2024-01-16T05:19:04Z",
                          "publishedAt": "2024-01-16T03:56:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I believe this will most likely be the culprit:\n-L/lib -Wl,\n-rpath,/lib\n-Wl,-rpath,/usr/lib\n-L/usr/lib\n-Wl,-rpath,/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.1 \n-L/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.1 \n\n<trimmed>\n\n-lmpifort -lmpi -lgfortran -lm -lgcc_s -lquadmath -lstdc++ -lrt -ltirpc\n\nWith the above -L pointing to those directories, and then later a -lmpi, it will link to system MPI libraries.\nI think we need to figure out why System OpenMPI does not work as your MPI wrapper/stack...",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8143710",
                          "updatedAt": "2024-01-16T12:37:38Z",
                          "publishedAt": "2024-01-16T12:37:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ke7kto"
                          },
                          "bodyText": "Got the system OpenMPI to compile! The answer was in the output from the libmesh build script:\nnote: Checking /lib and /include for MPI\nnote: testing /lib/libmpi(.a/.so/.dylib)\nchecking for lam_show_version in -llam... no\nchecking for MPI_Init in -lmpi... yes\nFound valid MPI installation...\nCould not find MPI header <mpi.h>...\n\nMy mpi.h is at /usr/include/mpi.h, which was not checked. Simply adding --with-mpi-include=/usr/include let moose compile!",
                          "url": "https://github.com/idaholab/moose/discussions/26538#discussioncomment-8161974",
                          "updatedAt": "2024-01-17T21:21:55Z",
                          "publishedAt": "2024-01-17T21:21:54Z",
                          "isAnswer": true
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "RBE3/Distributing constraint",
          "author": {
            "login": "b1llg"
          },
          "bodyText": "I would like to implement an RBE3 constraint. I've read about ConstantRate and I believe it could be a good starting point. However, I need to retrieve all \"secondary nodes\" position to compute the load applied at each node.\nMy goal was to define something like this:\n[Mesh]\n  [rbe3_main]\n    type = ExtraNodesetGenerator\n    new_boundary = 'main_node'\n    coord = '0.0 5.0'\n    input = part\n  []\n[]\n[NodalKernels]\n  [rbe3_constraint]\n    type = DistributingNodalConstraint\n    main_node = rbe3_main\n    variable = disp_y\n    boundary = top\n  []\n[]\n\nFirst I wanted to know if something similar does already exist ? If not, can I get some suggestion about what should I use and how can I contribute.\nThank you.",
          "url": "https://github.com/idaholab/moose/discussions/26571",
          "updatedAt": "2024-01-24T01:04:53Z",
          "publishedAt": "2024-01-17T00:05:15Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "@hugary1995 and @lindsayad on whether something already exists",
                  "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8151150",
                  "updatedAt": "2024-01-17T02:02:57Z",
                  "publishedAt": "2024-01-17T02:02:38Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "Isn't RBE3 a special case of LinearNodalConstraint?",
                          "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8151363",
                          "updatedAt": "2024-01-17T02:36:43Z",
                          "publishedAt": "2024-01-17T02:36:42Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "Well okay, I guess if you want to use LinearNodalConstraint, you need to set weights equal to 1/N where N is the number of primary nodes. This could be tricky if you don't know the number of primary nodes a priori... So maybe creating your own constraint (by deriving from LinearNodalConstraint) is the way to go. Anyways, LinearNodalConstraint is a good starting point.",
                          "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8151374",
                          "updatedAt": "2024-01-17T02:39:27Z",
                          "publishedAt": "2024-01-17T02:39:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "b1llg"
                          },
                          "bodyText": "It looks like it is doing something similar. The only thing is the weight is not the same on secondary nodes.\n\nYou can see that in the rbe3, the load applied on the main node is distributed on the selected surface. However, the load applied depends on the position of the secondary nodes vs the main node. So I need to retrieve the nodes on the selected boundaries (or node set in this case?) and compute the weight associated to each node.",
                          "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8154880",
                          "updatedAt": "2024-01-17T10:25:16Z",
                          "publishedAt": "2024-01-17T10:25:15Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "The weights are 1/N.",
                          "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8155875",
                          "updatedAt": "2024-01-17T11:59:56Z",
                          "publishedAt": "2024-01-17T11:59:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "oldninja"
                          },
                          "bodyText": "@hugary1995, your insights into this code are highly valued! I'm interested in understanding the rationale behind setting weights as 1/N in the context of LinearNodalConstraint. Could you provide more clarity on the reasons behind this choice?\nIt would be beneficial to have a nodal constraint that mimics the function of the RBE3s (Nastran naming) / distributing coupling (Abaqus) directly from the source code.",
                          "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8226748",
                          "updatedAt": "2024-01-24T00:18:37Z",
                          "publishedAt": "2024-01-24T00:18:37Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "I think the corresponding Abaqus theory manual provides a decent explanation of the constraint. https://classes.engineering.wustl.edu/2009/spring/mase5513/abaqus/docs/v6.6/books/stm/default.htm\nWithout a prescribed rigid body rotation on the master node, each of the slave node is constrained by the translation of the master node. RBE3/distributing coupling satisfies the constraint in an average sense, the weights are therefore uniformly distributed among the slave nodes. In the notation of LinearNodalConstraint that corresponds to weights of 1/N. As stated by the Abaqus user manual, there are alternative ways of distributing the weights, e.g., linear/quadratic decay as a function of master/slave distance.\nNeither rigid body rotation nor higher order weights are implemented in LinearNodalConstraint. But as I said, LinearNodalConstraint should be a good place to start. Pull requests are welcome, but a careful benchmarking with either Nastran or Abaqus will be preferred.",
                          "url": "https://github.com/idaholab/moose/discussions/26571#discussioncomment-8226982",
                          "updatedAt": "2024-01-24T01:04:54Z",
                          "publishedAt": "2024-01-24T01:04:53Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}