{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyNC0wNS0xOVQxODoxNzozMS0wNTowMM4AZhJM"
    },
    "edges": [
      {
        "node": {
          "title": "Using FluidPropertiesMaterialPT in a THM model",
          "author": {
            "login": "amerallaf"
          },
          "bodyText": "Hello,\nI am trying to make my fluid properties as a function of temperature-pressure, based on the example given in the following link:\nhttps://mooseframework.inl.gov/source/fluidproperties/TemperaturePressureFunctionFluidProperties.html.\nI am simply using the Heattransfer - THM coupled model that is presented in the following link:\nhttps://mooseframework.inl.gov/source/actions/CoupledHeatTransferAction.html\nI am simplying trying to make the fluid density value as a function of temperature-pressure.\nHowever, I getting the following error:\nthm0: *** ERROR ***\nthm0: The following error occurred in the MaterialBase 'pipe1:fp_mat' of type ADFluidProperties3EqnMaterial.\nthm0:\nthm0: The declared AD material property 'e' of type 'double'\nthm0: is already retrieved or declared as a non-AD property of type 'double'.\n\nWhich I am not really able to understand what it is.\nThe sub input is presented below (the master file is the same as in https://mooseframework.inl.gov/source/actions/CoupledHeatTransferAction.html).\nI would appreciate your help and time in resolving this.\n# This is a part of T_wall_action test.\n\n[GlobalParams]\n  initial_p = 1.e5\n  initial_vel = 0.\n  initial_T = 300.\n\n  closures = simple_closures\n[]\n\n[Functions]\n  [rho]\n    type = ParsedFunction\n    symbol_names = 'TT pp'\n    symbol_values = 'temperature pressure'\n    expression = '1.5e3 + 0.13 * TT - 1.5e-4 * pp'\n  []\n[]\n\n[AuxVariables]\n  [Hw]\n    family = monomial\n    order = constant\n    block = pipe1\n  []\n  [temperature]\n    initial_condition = 300.\n  []\n  [pressure]\n    initial_condition = 253727.1\n  []\n[]\n\n[AuxKernels]\n  [Hw_ak]\n    type = ADMaterialRealAux\n    variable = Hw\n    property = 'Hw'\n  []\n  [./rho]\n    type = MaterialRealAux\n    variable = rho\n    property = density\n  [../]\n[]\n\n[FluidProperties]\n  [eos]\n    type = StiffenedGasFluidProperties\n    gamma = 2.35\n    q = -1167e3\n    q_prime = 0\n    p_inf = 1.e9\n    cv = 1816\n  []\n[]\n\n[Materials]\n  [to_vars]\n    type = FluidPropertiesMaterialPT\n    pressure = pressure\n    temperature = temperature\n    fp = eos\n  []\n[]\n\n[Closures]\n  [simple_closures]\n    type = Closures1PhaseSimple\n  []\n[]\n\n[UserObjects]\n  [T_uo]\n    type = LayeredAverage\n    direction = y\n    variable = T\n    num_layers = 10\n    block = pipe1\n  []\n  [Hw_uo]\n    type = LayeredAverage\n    direction = y\n    variable = Hw\n    num_layers = 10\n    block = pipe1\n  []\n[]\n\n[Components]\n  [pipe1]\n    type = FlowChannel1Phase\n    position = '0 0 0'\n    orientation = '0 1 0'\n    length = 1\n    n_elems = 10\n    A   = 1.28584e-01\n    D_h = 8.18592e-01\n    f = 0.01\n    fp = eos\n  []\n\n  [hxconn]\n    type = HeatTransferFromExternalAppTemperature1Phase\n    flow_channel = pipe1\n    Hw = 10000\n    P_hf = 6.28319e-01\n    initial_T_wall = 300.\n    var_type = elemental\n  []\n\n  [inlet]\n    type = InletMassFlowRateTemperature1Phase\n    input = 'pipe1:in'\n    m_dot = 10\n    T = 400\n  []\n\n  [outlet]\n    type = Outlet1Phase\n    input = 'pipe1:out'\n    p = 1e5\n  []\n[]\n\n[Preconditioning]\n  [pc]\n    type = SMP\n    full = true\n  []\n[]\n\n[Postprocessors]\n  [T_wall_avg]\n    type = ElementAverageValue\n    variable = T_wall\n    execute_on = 'INITIAL TIMESTEP_END'\n  []\n\n  [htc_avg]\n    type = ElementAverageValue\n    variable = Hw\n    execute_on = 'INITIAL TIMESTEP_END'\n  []\n\n  [T_avg]\n    type = ElementAverageValue\n    variable = T\n    execute_on = 'INITIAL TIMESTEP_END'\n  []\n[]\n\n[Executioner]\n  type = Transient\n  scheme = 'bdf2'\n  dt = 0.1\n  dtmin = 1e-7\n  abort_on_solve_fail = true\n\n  solve_type = 'NEWTON'\n  line_search = 'basic'\n  nl_rel_tol = 1e-7\n  nl_abs_tol = 1e-4\n  nl_max_its = 20\n\n  l_tol = 1e-3\n  l_max_its = 300\n\n  start_time = 0.0\n\n  petsc_options_iname = '-pc_type'\n  petsc_options_value = ' lu'\n[]\n\n[Outputs]\n  [out]\n    type = Exodus\n    show = 'T_wall T Hw'\n  []\n[]",
          "url": "https://github.com/idaholab/moose/discussions/27692",
          "updatedAt": "2024-05-22T22:03:16Z",
          "publishedAt": "2024-05-22T17:33:56Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "hello\nthe FluidPropertiesMaterialPT and the ADFluidProperties3EqnMaterial are conflicting because they declare properties with the same names\ndo you really need the first one? This is just for output usually?\nIf so, then add a suffix to the properties if possible",
                  "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9525584",
                  "updatedAt": "2024-05-22T18:21:32Z",
                  "publishedAt": "2024-05-22T18:21:32Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "amerallaf"
                          },
                          "bodyText": "Hello @GiudGiud, thank you so much for your help.\nJust to clarify, which properties that I am having with the same names that are causing the issue?\nAlso what do you mean by \"the first one?\", I would appreciate it if you can guide me in the script.",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526351",
                          "updatedAt": "2024-05-22T19:27:13Z",
                          "publishedAt": "2024-05-22T19:27:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the first one is FluidPropertiesMaterialPT. Do you really need this one? I only use it for output\nSeems to be e, the internal energy, that is duplicated between both materials",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526382",
                          "updatedAt": "2024-05-22T19:28:53Z",
                          "publishedAt": "2024-05-22T19:28:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "amerallaf"
                          },
                          "bodyText": "Oh thank you for the clarification.\nIt seems to me that such practice (making density as a function of P,T) always requires to have:\n[Materials]\n  [to_vars]\n    type = FluidPropertiesMaterialPT\n    pressure = pressure\n    temperature = temperature\n    fp = eos\n  []\n[]\nTo define the temperature and the pressure variables of the fluid, otherwise I don't care much about having it.\nIs there another way you would recommend in this case?",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526851",
                          "updatedAt": "2024-05-22T20:15:03Z",
                          "publishedAt": "2024-05-22T20:15:02Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "StiffenedGasFluidProperties should already have density as a function of P and T. are you trying to override that dependence?\nI am asking this because I see a rho function in your input",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526914",
                          "updatedAt": "2024-05-22T20:30:48Z",
                          "publishedAt": "2024-05-22T20:23:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "density is one of the variables btw, so you are not computing it directly from P and T, it is being solved for\nTwo ways forward:\n\ndelete FluidPropertiesMaterialPT from your input and adapt the rest of the input to less properties being defined\nmodify FluidPropertiesMaterialPT to be able to not compute 'e'. There's already such a modification in the code for entropy and the sound speed. it s a simple change",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526935",
                          "updatedAt": "2024-05-22T20:31:57Z",
                          "publishedAt": "2024-05-22T20:26:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "amerallaf"
                          },
                          "bodyText": "Yes I want to have my own function, and then ultimately do that for more variables (k, mu, etc.).",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526959",
                          "updatedAt": "2024-05-22T20:31:11Z",
                          "publishedAt": "2024-05-22T20:31:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Ideally you would use this\nhttps://mooseframework.inl.gov/source/fluidproperties/TemperaturePressureFunctionFluidProperties.html\nbut it will take quite a bit of coding to get it to work with the thermal hydraulics module\nMaybe instead of adding a 'rho' function, set parameters in StiffenedGasFluidProperties to make density close to what you need\n@joshuahansel thoughts ?",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9526980",
                          "updatedAt": "2024-05-22T20:34:03Z",
                          "publishedAt": "2024-05-22T20:34:02Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "amerallaf"
                          },
                          "bodyText": "Yes, I was working on that\n    type = TemperaturePressureFunctionFluidProperties\nat first, because that would be better to estimate of NaK coolant properties.\nHere I am trying to have rho, k, and mu as function of T,P, and I was getting the same error.\nError:\nthm0: *** ERROR ***\nthm0: The following error occurred in the MaterialBase 'pipe1:fp_mat' of type ADFluidProperties3EqnMaterial.\nthm0:\nthm0: The declared AD material property 'e' of type 'double'\nthm0: is already retrieved or declared as a non-AD property of type 'double'.\nScript:\n# This is a part of T_wall_action test.\n\ncv = 4000\n\n[GlobalParams]\n  initial_p = 1.e5\n  initial_vel = 0.\n  initial_T = 300.\n\n  closures = simple_closures\n[]\n\n[AuxVariables]\n  [Hw]\n    family = monomial\n    order = constant\n    block = pipe1\n  []\n  [temperature]\n    initial_condition = 300.\n  []\n  [pressure]\n    initial_condition = 253727.1\n  []\n[]\n\n[AuxKernels]\n  [Hw_ak]\n    type = ADMaterialRealAux\n    variable = Hw\n    property = 'Hw'\n  []\n[]\n\n[Functions]\n  # This demonstrates how to define fluid properties that are functions\n  # of the LOCAL value of the (p,T) variables\n  # x for temperature\n  # y for pressure\n  [k]\n    type = ParsedFunction\n    expression = '14 + 1e-2 * x + 1e-5 * y'\n  []\n  [rho]\n    type = ParsedFunction\n    expression = '1.5e3 + 0.13 * x - 1.5e-4 * y'\n  []\n  [mu]\n    type = ParsedFunction\n    expression = '1e-3 + 2e-6 * x - 3e-9 * y'\n  []\n[]\n\n[FluidProperties]\n  [nak]\n    type = TemperaturePressureFunctionFluidProperties\n    cv = ${cv}\n    k = k\n    rho = rho\n    mu = mu\n  []\n[]\n\n[Materials]\n  [to_vars]\n    type = FluidPropertiesMaterialPT\n    fp = nak\n    outputs = 'all'\n    output_properties = 'density k cp cv viscosity e h'\n    pressure = pressure\n    temperature = temperature\n\n    compute_entropy = false\n    compute_sound_speed = false\n  []\n[]\n\n[Closures]\n  [simple_closures]\n    type = Closures1PhaseSimple\n  []\n[]\n\n[UserObjects]\n  [T_uo]\n    type = LayeredAverage\n    direction = y\n    variable = T\n    num_layers = 10\n    block = pipe1\n  []\n  [Hw_uo]\n    type = LayeredAverage\n    direction = y\n    variable = Hw\n    num_layers = 10\n    block = pipe1\n  []\n[]\n\n[Components]\n  [pipe1]\n    type = FlowChannel1Phase\n    position = '0 0 0'\n    orientation = '0 1 0'\n    length = 1\n    n_elems = 10\n    A   = 1.28584e-01\n    D_h = 8.18592e-01\n    f = 0.01\n    fp = nak\n  []\n\n  [hxconn]\n    type = HeatTransferFromExternalAppTemperature1Phase\n    flow_channel = pipe1\n    Hw = 10000\n    P_hf = 6.28319e-01\n    initial_T_wall = 300.\n    var_type = elemental\n  []\n\n  [inlet]\n    type = InletMassFlowRateTemperature1Phase\n    input = 'pipe1:in'\n    m_dot = 10\n    T = 400\n  []\n\n  [outlet]\n    type = Outlet1Phase\n    input = 'pipe1:out'\n    p = 1e5\n  []\n[]\n\n[Preconditioning]\n  [pc]\n    type = SMP\n    full = true\n  []\n[]\n\n[Postprocessors]\n  [T_wall_avg]\n    type = ElementAverageValue\n    variable = T_wall\n    execute_on = 'INITIAL TIMESTEP_END'\n  []\n\n  [htc_avg]\n    type = ElementAverageValue\n    variable = Hw\n    execute_on = 'INITIAL TIMESTEP_END'\n  []\n\n  [T_avg]\n    type = ElementAverageValue\n    variable = T\n    execute_on = 'INITIAL TIMESTEP_END'\n  []\n[]\n\n[Executioner]\n  type = Transient\n  scheme = 'bdf2'\n  dt = 0.1\n  dtmin = 1e-7\n  abort_on_solve_fail = true\n\n  solve_type = 'NEWTON'\n  line_search = 'basic'\n  nl_rel_tol = 1e-7\n  nl_abs_tol = 1e-4\n  nl_max_its = 20\n\n  l_tol = 1e-3\n  l_max_its = 300\n\n  start_time = 0.0\n\n  petsc_options_iname = '-pc_type'\n  petsc_options_value = ' lu'\n[]\n\n[Outputs]\n  [out]\n    type = Exodus\n    show = 'T_wall T Hw'\n  []\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9527127",
                          "updatedAt": "2024-05-22T20:52:35Z",
                          "publishedAt": "2024-05-22T20:52:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the error is not coming from the FluidProperties, it s coming from adding this FluidPropertiesMaterialPT",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9527176",
                          "updatedAt": "2024-05-22T21:01:57Z",
                          "publishedAt": "2024-05-22T21:01:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "joshuahansel"
                          },
                          "bodyText": "Right, so your first step is to make a FluidProperties object that you're happy with. Assuming that your relationships do not fit well with StiffenedGasFluidProperties, make your TemperaturePressureFunctionFluidProperties object and then try running with it in THM. As Guillaume hinted to, there might need to be additional development for this to work (because THM requires some minimum set of interfaces), but we should be able to add whatever interfaces are missing.\nAs Guillaume says, remove FluidPropertiesMaterialPT from your input file - THM does not want that.",
                          "url": "https://github.com/idaholab/moose/discussions/27692#discussioncomment-9527543",
                          "updatedAt": "2024-05-22T22:03:17Z",
                          "publishedAt": "2024-05-22T22:03:16Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "how to apply boundary condition on an auxiliary variable?",
          "author": {
            "login": "zuckarm"
          },
          "bodyText": "hi all,\ni am solving a phase field problem, the geometry is that of an edge-cracked body. i have defined a sideset 'crack', and i want to apply the condition that phase field auxiliary variable d = 1 on 'crack'. can anyone please guide on how to execute this?",
          "url": "https://github.com/idaholab/moose/discussions/27657",
          "updatedAt": "2024-05-28T08:19:31Z",
          "publishedAt": "2024-05-17T09:17:28Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou can apply boundary conditions to auxiliary variables.\nThis seems like a DirichletBC.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/27657#discussioncomment-9469920",
                  "updatedAt": "2024-05-17T12:07:51Z",
                  "publishedAt": "2024-05-17T12:07:50Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "zuckarm"
                          },
                          "bodyText": "hi, sorry for the late response.\ni have applied DirichletBC, as you have suggested.\ncode snippet:\n[crack]\ntype = DirichletBC\nvariable = d\nboundary = crack\nvalue = 1\n[]\ni am getting the following error: No solver variable named d found. Did you specify an auxiliary variable when you meant to specify a solver variable?",
                          "url": "https://github.com/idaholab/moose/discussions/27657#discussioncomment-9517650",
                          "updatedAt": "2024-05-22T07:17:08Z",
                          "publishedAt": "2024-05-22T07:17:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "maxnezdyur"
                          },
                          "bodyText": "I think you just want to run an AuxKernel that sets the changes the value of the AuxVariable on the boundary. AuxKernels can be boundary restricted too. So you just use the ConstantAux and the boundary = crack. The only problem is that if you have multiple auxkernels for the same variable they can override each other.",
                          "url": "https://github.com/idaholab/moose/discussions/27657#discussioncomment-9520129",
                          "updatedAt": "2024-05-22T11:03:53Z",
                          "publishedAt": "2024-05-22T11:03:52Z",
                          "isAnswer": true
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Inquiry Regarding Long Computation Time for Jacobian and Residual Calculation",
          "author": {
            "login": "PengWei97"
          },
          "bodyText": "Dear Moose Experts,\nI am currently attempting to replicate a crystal plasticity-phase field coupled model as described in the paper \"On the plastic driving force of grain boundary migration: A fully coupled phase field and crystal plasticity model\". The authors have claimed that this model has already been implemented in MOOSE/MARMOT. However, in my own implementation of the crystal plasticity-phase field coupled model, I have encountered prolonged computation time for Jacobian and residual calculation when the simulation reaches \"Time Step 75, time = 3.27713, dt = 0.0855946\", compared to the time steps before.\n\nSpecifically, according to the description of the coupling method outlined by the authors (see Sec 2.4 coupling method), at the grain boundaries or interfaces, it is necessary to compute individual crystal plasticity models for each activated grain or order parameter (GrainTracker), followed by the construction of kernels (StressDivergenceTensors) using the weighted average Cauchy stress and Jacobian matric.\nTo achieve this coupling model, based on the crystal plasticity modelsComputeElasticityTensorCP, ComputeMultipleCrystalPlasticityStress, and CrystalPlasticityKalidindiUpdate provided in the example file exception.i, I have extended the paradigm to consider multiple crystal plasticity models for each activated grain at every quadrature point. The specific construction approach is illustrated in the attached diagram,\n\nThe main idea is to extend the state parameters in the crystal plasticity constitutive model to vector types, where the size of the vector-type material parameters corresponds to the number of order parameters. The material parameters associated with each grain include elastic tensor, rotation matrix, plastic deformation gradient, second Piola-Kirchhoff stress, Cauchy strain, and Jacobian matrix. The existing material parameters in MOOSE's crystal plasticity constitutive model are replaced with the aforementioned material parameters indexed by order parameters. At each quadrature point, after computing the crystal plasticity models corresponding to each activated order parameter, weighted Cauchy stresses _stress[_qp] and Jacobian matrices _Jacobian_mult[_qp] are used to construct the kernel based on the weighting method proposed in the paper.\nIn summary, the above is my approach to constructing the coupled model based on the coupling method described in the paper. The current issue I am facing is the prolonged computation time for Jacobian and residual calculation at approximately 3.3 seconds, where the run time is 1552.32 seconds, whereas before 3.3 seconds, the run time was less than 5.0 seconds. I am seeking assistance in understanding the reasons behind the extended computation time at \"Time Step 75\".\nI would greatly appreciate any insights or suggestions from the community to help resolve this issue.\nThank you very much for your time and consideration.\nBest regards,\nWei",
          "url": "https://github.com/idaholab/moose/discussions/27307",
          "updatedAt": "2024-05-21T22:19:48Z",
          "publishedAt": "2024-04-07T15:25:13Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nso you are suspecting the material property computation is slow?\nWould you mind generating a profile with a profiler? There is a page explaining how to do that on the moose website.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9037026",
                  "updatedAt": "2024-04-07T16:30:21Z",
                  "publishedAt": "2024-04-07T16:30:20Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Hi @GiudGiud,\nThanks for your quick reply and advice.\n\nso you are suspecting the material property computation is slow?\n\nIt's not actually slow when calculating material properties, because I try to insert the statement in the function ComputeMultiCPStressFullyCoupled::computeQpStress(), in fact the statement can run through quickly, but stays at Computing Residual..... ....................., so now I am mainly not sure where the problem lies, and it takes so long to display the calculation residual or Jacobian matrix.\n\nWould you mind generating a profile with a profiler? There is a page explaining how to do that on the moose website.\n\nI would be happy to create a profile to help me find where the problem lies. Can you provide me with a link to this web page? At the same time, I am also happy to share my current semi-finished code, which is actually based on the existing classes related to crystal plasticity.\nWei",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9040127",
                          "updatedAt": "2024-04-08T02:23:57Z",
                          "publishedAt": "2024-04-08T02:23:44Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "hello\nthe page for profiling is here\nhttps://mooseframework.inl.gov/application_development/profiling.html\n\nin fact the statement can run through quickly, but stays at Computing Residual..... .....................\n\ninteresting. I think profiling will tell us more about what is happening",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9047409",
                          "updatedAt": "2024-04-08T14:47:11Z",
                          "publishedAt": "2024-04-08T14:47:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Hi @GiudGiud,\nFollowing your suggestion, I attempted to build and utilize gperftools to identify functions with long running times. However, despite spending considerable time configuring the environment based on the webpage you provided, I encountered an error even after running the command MOOSE_PROFILE_BASE=run1_ mpiexec -n 36 ~/projects/panda/panda-oprof -i s2_bicrystal_cp_elastic3.i > 01.log. Subsequently, when I used pprof run1.prof, I still encountered the following error:\n$ pprof run1.prof\nUsing remote profile at run1.prof.\nUse of uninitialized value $line in substitution (s///) at /home/pw-moose/miniforge/envs/moose/bin/pprof line 3326.\nhttp://run1.prof/pprof/symbol doesn't exist\nTherefore, regarding the issue with setting up the environment, could you please provide some advice? Alternatively, if possible, could you run the example s2_bicrystal_cp_elastic3.i in the panda::prm-fully environment to identify where the long running time occurs? Of course, I could also email you the files run1_0.prof through run1_35.prof.\nBest regards,\nWei",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9102416",
                          "updatedAt": "2024-04-13T07:52:42Z",
                          "publishedAt": "2024-04-13T07:52:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Furthermore, I attempted to set the parameter 'ao = 0' in CPKalidindiFullyCoupledUpdate, which effectively disables plasticity behavior in the constitutive model, leaving only the elastic Hookean behavior. Strangely, the simulation of crystal plasticity-phase field coupling proceeded as expected, with grain boundaries migrating under elastic driving forces, as shown below:\n\nHowever, when setting 'ao = 0.001' to activate plasticity in the constitutive model, the simulation still encountered a significant computational process during the time step calculation, indicated by the display of 'Residual' in the terminal as follows:\nTime Step 8, time = 0.108816, dt = 0.020736\n\nGrain Tracker Status:\nGrains active index 0: 1 -> 1\nGrains active index 1: 1 -> 1\n\nFinished inside of GrainTracker\n\n    Computing Residual.......................................................................................................................................................................................................................................................................................................................................................\n\nTherefore, I suspect that the need for long-duration residual calculations arises from the plastic constitutive model in the mechanical model. However, I currently lack specific insights into why this situation occurs. I earnestly request advice from MOOSE experts.\nAlternatively, I believe it may be necessary to re-examine the coupling strategy and modeling methods outlined in the Zhao's paper. Of course, any guidance or suggestions regarding the modeling of crystal plasticity-phase field coupling would be greatly appreciated.\nBest regards,\nWei",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9102475",
                          "updatedAt": "2024-04-13T08:11:46Z",
                          "publishedAt": "2024-04-13T08:11:45Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "wrt to your first message, I wont have time for another two weeks at least to profile that for you.\n\npanda::prm-fully environment\n\nyou mean the prm-fully branch of panda?\n@laagesen thoughts on the last message?",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9102972",
                          "updatedAt": "2024-04-13T10:21:59Z",
                          "publishedAt": "2024-04-13T10:21:58Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "wrt to your first message, I wont have time for another two weeks at least to profile that for you.\n\nOkay, thank you very much for your attention to this. I will also try to solve this problem in the two weeks of class. If it is not solved yet, I will also let you know the news.\n\nyou mean the prm-fully branch of panda?\n\nYes, I have placed the complete the input file and the new classes I created into my own app, panda, in the branch prm3-fully.",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9103675",
                          "updatedAt": "2024-04-13T13:19:09Z",
                          "publishedAt": "2024-04-13T13:19:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Hi @GiudGiud,\nIt is very regrettable to say that we have not yet obtained the performance analysis report of the program running. In the past two weeks, we have successfully configured the pprof environment  and now have encountered new problems #27467.\nGiven these circumstances, I am reaching out to see if you might have the time and willingness to assist me with this task. Your expertise and insights would be invaluable in helping me navigate these challenges, and any assistance you could provide in profiling the program for me would be greatly appreciated.\nThank you for considering my request. I am looking forward to your favorable response and am hopeful for your support.\nWarm regards,\nWei",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9223496",
                          "updatedAt": "2024-04-25T10:14:58Z",
                          "publishedAt": "2024-04-25T10:14:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "why are you using 32 processes btw? I just run your input and it was fine with 2\nWith 2, the top is\nWelcome to pprof!  For help, type 'help'.\n(pprof) Total: 2773 samples\n     187   6.7%   6.7%      192   6.9% RankFourTensorTempl::operator*@101fb94\n     149   5.4%  12.1%      149   5.4% 0x0000000184d2ab70\n     141   5.1%  17.2%      145   5.2% RestartableDataReader::deserializeValue\n     121   4.4%  21.6%      121   4.4% 0x0000000184d22de0\n      73   2.6%  24.2%       73   2.6% 0x0000000184d92f5c\n      61   2.2%  26.4%       89   3.2% RankTwoTensorTempl::times@a72c\n      60   2.2%  28.6%       60   2.2% 0x0000000184d260c4\n      59   2.1%  30.7%       74   2.7% CPKalidindiFullyCoupledUpdate::calculateStateVariableEvolutionRateComponent\n      54   1.9%  32.6%       54   1.9% RankFourTensorTempl::operator+=\n      44   1.6%  34.2%       44   1.6% libMesh::Parameters::Parameter::print@a6a140\n(pprof) \n\nsome symbols are not resolved. This is likely due to my computer being hosed with 'security' stuff. It should work fine for yours",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9242163",
                          "updatedAt": "2024-04-26T23:39:10Z",
                          "publishedAt": "2024-04-26T23:39:08Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Thank you very much for your efforts.\nAh ha, that's weird. Even if I use 2 cores for parallel computing, the persistence of \"Computing Residual...\" still occurs at Time Step 8, time = 0.108816, dt = 0.020736, as follows:\nTime Step 8, time = 0.108816, dt = 0.020736\n\nGrain Tracker Status:\nGrains active index 0: 1 -> 1\nGrains active index 1: 1 -> 1\n\nFinished inside of GrainTracker\n\n\n     Computing Residual.............\n\nI use the configuration of 788258e49531eb24bfd347a600d69a16f966c495 historical node. So what I want to ask is, did you run to this simulation time, that is, time = 0.108816, and did it pass?",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9242440",
                          "updatedAt": "2024-04-27T01:20:24Z",
                          "publishedAt": "2024-04-27T01:20:24Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "ok I only profiled the first two time steps.\nI am seeing it stuck on time step 2",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9248639",
                          "updatedAt": "2024-04-28T00:13:05Z",
                          "publishedAt": "2024-04-28T00:13:04Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "PengWei97"
                  },
                  "bodyText": "Hi @GiudGiud, @jiangwen84, and @sapitts,\nUsing the strategy proposed in #27468, I got a profiling file for this problem and the results are as follows:\n\nThe results show that a long time is spent ComputeMultiCPStressFullyCoupled::calculateJacobian(). After that, I will carefully chech which statement takes a long time to calculate and what is the  reasion. Additionally, I am guessing that the fetch may be caused by inappropriate tensor values.\nFinally, I would greatly appreciate any insights or ang guidance.\nBest regards,\nWei",
                  "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9283848",
                  "updatedAt": "2024-05-01T10:14:49Z",
                  "publishedAt": "2024-05-01T10:13:23Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I see a lot of time being spent in *, times and tensor_product, which are operations on tensors\nAny way to simplify the tensor math to have less operations? Are you using the most compact (symmetric?) representation there is?",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9284635",
                          "updatedAt": "2024-05-01T12:13:08Z",
                          "publishedAt": "2024-05-01T12:13:08Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Hi @GiudGiud,\nI'm very sorry for taking so long to reply to you. In fact, I have found the reason why \"Calculated Residual\" is displayed for a long time in the first place. Since I set maximum_substep_iteration = 100\uff0cthe loop of Line 316 in ComputeMultiCPStressFullyCoupled can reach an astonishing 2^100 times.\nWhen I set maximum_substep_iteration = 10, the following message is displayed indicating that the calculation of the CP constitutive model failed, and there are two activated order parameters in the element where the constitutive calculation failed.\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nthe id of current element: 7\nthe num of activate op: 2\nthe grain_id: 0\nthe num of substep: 1\nthe istep: 0\nthe num of substep: 2\nthe istep: 0\nthe num of substep: 4\nthe istep: 0\nthe num of substep: 8\nthe istep: 0\nthe num of substep: 16\nthe istep: 0\nthe num of substep: 32\nthe istep: 0\nthe num of substep: 64\nthe istep: 0\nthe num of substep: 128\nthe istep: 0\nthe num of substep: 256\nthe istep: 0\nthe num of substep: 512\nthe istep: 0\n\nComputeMultiCPStressFullyCoupled: Constitutive failure\nTo recover, the solution will fail and then be re-attempted with a reduced time step\n\nA MooseException was raised during FEProblemBase::computeResidualTags\nComputeMultiCPStressFullyCoupled: Constitutive failure\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\nNonlinear solve did not converge due to DIVERGED_FUNCTION_DOMAIN iterations 0\n Solve Did NOT Converge!\nAborting as solve did not converge\n\n\n*** ERROR ***\n/home/pw-moose/projects/panda/simulation/prm3/step01_elastic_energy/s2_bicrystal_cp_elastic3.i:403.3:\nThe following error occurred in the TimeStepper 'IterationAdaptiveDT' of type IterationAdaptiveDT.\n\nSolve failed and timestep already at dtmin, cannot continue!\n\nTime Step 20, time = 0.15474, dt = 1e-12\n\nGrain Tracker Status:\nGrains active index 0: 1 -> 1\nGrains active index 1: 1 -> 1\n\nFinished inside of GrainTracker\n\nComputeMultiCPStressFullyCoupled: Constitutive failure\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n\nA MooseException was raised during FEProblemBase::computeResidualTags\nComputeMultiCPStressFullyCoupled: Constitutive failure\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\nNonlinear solve did not converge due to DIVERGED_FUNCTION_DOMAIN iterations 0\n Solve Did NOT Converge!\nAborting as solve did not converge\n\n\n*** ERROR ***\n/home/pw-moose/projects/panda/simulation/prm3/step01_elastic_energy/s2_bicrystal_cp_elastic3.i:403.3:\nThe following error occurred in the TimeStepper 'IterationAdaptiveDT' of type IterationAdaptiveDT.\n\nSolve failed and timestep already at dtmin, cannot continue!\n\nStack frames: 14\nSo, what is certain now is that the problem occurs during the constitutive calculation process. As for the specific reason, I am still looking for it.\nI would greatly appreciate any insights or suggestions from the community to help resolve this issue.\nWei",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9327089",
                          "updatedAt": "2024-05-09T01:22:59Z",
                          "publishedAt": "2024-05-06T09:37:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "@dschwen @laagesen on advice on constitutive models",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9328975",
                          "updatedAt": "2024-05-06T12:54:04Z",
                          "publishedAt": "2024-05-06T12:54:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "laagesen"
                          },
                          "bodyText": "Sorry, not in my wheelhouse. @sapitts or @jiangwen84 might be able to help",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9331583",
                          "updatedAt": "2024-05-06T16:32:44Z",
                          "publishedAt": "2024-05-06T16:32:43Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "sapitts"
                          },
                          "bodyText": "Likely you have a state variable in the crystal plasticity model that is not converging properly. You will probably have to add in some numerical bounds/ guards on the variable(s) that are causing the problem. To start identifying the problematic variables, I'd recommend adding\nprint_state_variable_convergence_error_messages = true\n\nto both your stress input file block and your crystal plasticity constitutive model input file block. Please note this will give you A LOT of console output.\nThis new output will help you identify where in the crystal plasticity stress and/or constitutive model the simulation is struggling; you will likely still need to add variable specific print statements or use a debug to track the evolution of the variables updated in that part of the code",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9358103",
                          "updatedAt": "2024-05-08T17:32:13Z",
                          "publishedAt": "2024-05-08T17:32:12Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Hi @sapitts,\nYour suggestion is greatly appreciated,. We've attempted to incorporate print_state_variable_convergence_error_messages = true within CrystalPlasticityKalidindiUpdate, and tried printing out key variables of elements where constitutive computations failed using print statements. The output to the terminal is as follows:\nTime Step 28, time = 0.151255, dt = 0.001\n\nGrain Tracker Status:\nGrains active index 0: 1 -> 1\nGrains active index 1: 1 -> 1\n\nFinished inside of GrainTracker\n\nComputeMultiCPStressFullyCoupled::preSolveQp()\n[_qp]: 0\n_activate_op_index: 1\n(*_vals[op_index])[_qp]: 0.00784244\n(*_pk2_gr[_active_op_index])[_qp]: (xx,xy,xz)=(       0,        0,        0)\n(yx,yy,yz)=(       0,        0,        0)\n(zx,zy,zz)=(       0,        0,        0)\n\nCPStressFullyCoupledUpdateBase::calculateShearStress\n[_qp]: 0\npk2: (xx,xy,xz)=(       0,        0,        0)\n(yx,yy,yz)=(       0,        0,        0)\n(zx,zy,zz)=(       0,        0,        0)\n\n_flow_direction: (xx,xy,xz)=(       0,        0,       -0)\n(yx,yy,yz)=(0.408248, 0.408248, -0.408248)\n(zx,zy,zz)=(0.408248, 0.408248, -0.408248)\n\n_tau: 0\n_slip_increment[_qp][i]: 0\n_substep_dt: 0.001\n_tau[_qp][i]: 0\n(*_slip_resistance_gr[_active_op_index])[_qp][i]: 10\n\nCPStressFullyCoupledUpdateBase::calculateShearStress\n[_qp]: 0\npk2: (xx,xy,xz)=( 193.258, 1.67442e-06,        0)\n(yx,yy,yz)=(1.67442e-06,  260.941,        0)\n(zx,zy,zz)=(       0,        0,  190.268)\n\n_flow_direction: (xx,xy,xz)=(       0,        0,       -0)\n(yx,yy,yz)=(0.408248, 0.408248, -0.408248)\n(zx,zy,zz)=(0.408248, 0.408248, -0.408248)\n\n_tau: 28.8521\n_slip_increment[_qp][i]: 1.59794e+06\n_substep_dt: 0.001\n_tau[_qp][i]: 28.8521\n(*_slip_resistance_gr[_active_op_index])[_qp][i]: 10\n\n*** Warning ***\n/home/pengwei/projects/panda/simulation/prm3/step01_elastic_energy/s2_bicrystal_cp_elastic3.i:313.3:\nThe following warning occurred in the MaterialBase 'trial_xtalpl' of type CPKalidindiFullyCoupledUpdate.\n\nMaximum allowable slip increment exceeded 1.59794e+06\n\nComputeMultiCPStressFullyCoupled: Constitutive failure\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n\nA MooseException was raised during FEProblemBase::computeResidualTags\nComputeMultiCPStressFullyCoupled: Constitutive failure\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\nNonlinear solve did not converge due to DIVERGED_FUNCTION_DOMAIN iterations 0\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nThe element is activated at Time Step 27 with only one active order parameter, hence only one constitutive model is active. However, at Time Step 28, another order parameter (gr1) is activated, requiring the calculation of a new crystal plasticity constitutive model with the same total deformation gradient. However, the output indicates that the slip increment in the newly created constitutive model far exceeds its maximum allowable value (0.02). We believe this discrepancy leads to the failure of constitutive solving.\nThis situation is akin to suddenly applying a large load or strain, rather than a gradually increasing strain rate load. To validate this hypothesis, we created a simplified case based on exception.i considering only crystal plasticity mechanics, where boundary conditions are set as follows:\n  [tdisp]\n    type = FunctionDirichletBC\n    variable = uy\n    boundary = top\n    function = 'if(t<0.2, 0.0, 0.05)'\n  []\nThis case still encounters the same issue and displays identical error messages. Thus, we believe this simple case confirms our suspicion that the newly created crystal plasticity model fails to converge numerically when subjected to a sudden large total deformation gradient, instead of a gradual strain rate.\nIn conclusion, within crystal plasticity-phase field coupling simulations, when activating new order parameters, new crystal plasticity constitutive models need to be continuously created. While the total deformation gradient remains the same at each quadrature point, elastic and plastic deformation gradients, as well as internal state variables, vary. This was confirmed in discussion with Professor Michael R. Tonks.\nGiven your extensive experience in writing crystal plasticity constitutive models, do you have any suggestions regarding this issue?\nI would greatly appreciate any insights or suggestions from the community to help resolve this issue.\nWei",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9370288",
                          "updatedAt": "2024-05-09T14:50:27Z",
                          "publishedAt": "2024-05-09T14:50:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "sapitts"
                          },
                          "bodyText": "Hi Wei,\nFirst, please accept my apologies for my long delay in responding to your message.\nI'm not surprised that the crystal plasticity code failed in the sudden-large-load case. The Kalidindi model is a fairly simple crystal plasticity model, and it likely does not have all the dislocation motion mechanisms necessary to accommodate a large sudden load. The crystal plasticity models that we have in main MOOSE are much more suited to lower loading rates because they are built using the quasi-static assumptions.\nIf you are still continuing with the simulation, a couple of options you might try, either separately or in combination:\n\ngradually apply the load to the crystal plasticity model\nchange the tolerance on the maximum slip tolerance rate (I wouldn't be comfortable with a slip increment of 1e+6 personally, but you might increase the tolerance amount some to allow the simulation to run)\n\nI know you had previously tried to apply suggestion 1. with substepping and ran into a hanging simulation. You might try to more explicitly trying this substepping by providing the crystal plasticity model simulation, maybe with a MultiApp approach that might allow the crystal plasticity model to take a much smaller timestep than the phase field model.\nHope this helps, or, that since I took so long to respond, that you have already found a suitable solution for this problem,\nStephanie\np.s. your Schmid tensor (the flow direction tensor) looks odd to me--have you checked to ensure that Schmid tensor calculation is giving the result you expect?",
                          "url": "https://github.com/idaholab/moose/discussions/27307#discussioncomment-9514244",
                          "updatedAt": "2024-05-21T22:19:48Z",
                          "publishedAt": "2024-05-21T22:19:48Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Multiphase Porous Flow (pliquid/h) does not converge with steam",
          "author": {
            "login": "aikubo"
          },
          "bodyText": "Hello all (@cpgr especially)\nI am working on modeling the hydrothermal system of a dike intruded into granite and struggling with nonlinear convergence. I've prepared a simple example to demonstrate but the goal is to eventually\n\nbenchmark with USGS Hydrotherm Code\ncouple this to a Navier Stokes flow model multiapp of flow of magma in the dike\nconjugate heat transfer with magma in the dike cooling\n\nThe problem is as follows:\nA dike intrudes into granite host rock at temperature of 500 C. It  is a constant temperature BC for 2 (6.3e7 s) then shuts off and cools (Neuman BC, value = 0).\nThe boundary at the dike is impermeable to flow (NeumanBC for porepressure).\nI've expanded the domain to include what I consider the \"far field\" so the right most boundaries\nshould be uneffected by the dike heating (4000m).\nThe simulation stops at 200 m depth and goes down to 2000 m depth. There is a hydrostatic pressure gradient and geothermal temperature gradient. Water is the only fluid phase.\nSo far to deal with convergence issues I've tried the following\n\nUsing PorousFlowPiecewiseLinearSink BCs instead of DirichletBC - This helped it run longer\nUsing SimpleFluidProperties instead of Water97FluidProperties - This helps the simulation runs to  completion and works fine but I'd like to use water properties and especially want to look at multiphase effects and benchmarking\nChanging permeablitiy - Decreasing permeability to 1e-15 causes it to fail to converge after only a few timesteps\nTrying different BCs such as `PorousFlowOutflowBC' didn't help.\nAdding dampers to pressure and temperature. This helps a bit but not in the long run since it will eventually cause convergence issues becuase I keep getting unphysical pressure.\nRamping up temperature (enthalpy) slowly over time - it stops converging when the temperature reaches a critical point and phase chanage occurs ~5000-10000 seconds\nconstant capillary pressure with pc = 0\nIf i lower the enthalpy BC to a level with no phase change it converges fine and runs to completion\nreducing nl_abs_tol to as low as 1e-4, still convergence issues associated with steam\n\nI believe this is a boundary condition issue because when I get problems with pressure or temperature out of bounds (dampers off) it usually occurs on the top right corner or left corner.\nIs this boundary conditions, initial conditions (try an IC with some steam initially?), or maybe capillary pressure?\nThings I've observed that seem strange to me :\n\ndespite scaling the residual for enthalpy \"h\" is often much larger than for pressure and increases faster, Does it need more BCS?\nsimulation reaches a point where there is no change in residual despite iterations for example:\n\n\n[DBG][0] Max 1 residuals\n[DBG][0] -2191180.71139573 'h' in subdomain(s) {''} at node 441: (x,y,z)=(     100,     -380,        0)\n 6 Nonlinear |R| = 2.597688e+06\n      0 Linear |R| = 2.597688e+06\n      1 Linear |R| = 1.601581e-09\n Damping factor: 0\n    |residual|_2 of individual variables:\n                    pliquid: 25.6896\n                    h:       2.59769e+06\n[DBG][0] Max 1 residuals\n[DBG][0] -2191180.71139573 'h' in subdomain(s) {''} at node 441: (x,y,z)=(     100,     -380,        0)\n 7 Nonlinear |R| = 2.597688e+06\n      0 Linear |R| = 2.597688e+06\n      1 Linear |R| = 1.601581e-09\n Damping factor: 0\n    |residual|_2 of individual variables:\n                    pliquid: 25.6896\n                    h:       2.59769e+06\n[DBG][0] Max 1 residuals\n[DBG][0] -2191180.71139573 'h' in subdomain(s) {''} at node 441: (x,y,z)=(     100,     -380,        0)\n 8 Nonlinear |R| = 2.597688e+06\n      0 Linear |R| = 2.597688e+06\n      1 Linear |R| = 1.601581e-09\n Damping factor: 0\n    |residual|_2 of individual variables:\n                    pliquid: 25.6896\n                    h:       2.59769e+06\n[DBG][0] Max 1 residuals\n[DBG][0] -2191180.71139573 'h' in subdomain(s) {''} at node 441: (x,y,z)=(     100,     -380,        0)\n 9 Nonlinear |R| = 2.597688e+06\n      0 Linear |R| = 2.597688e+06\n      1 Linear |R| = 1.601581e-09\n\n\nHere is a simplified version of the input file:\n# can you have an adaptive BC?\n# perfectly matched layers \n# check the pressures at the BC and the flux through the boundary \n# doesn't have to be atmospheric\n\n# nusselt number \n# scaling \n# heat flux at surface - can caluculate it from space \n# what is the thermal annomaly from space?\n\n#trying nonzero cap pressure \n# might have issues because cap pressure is infinite when sat water is low \n# BC pressure is what is used in the watervapor.i model\n\n\n[Mesh]\n    [gen]\n      type = GeneratedMeshGenerator\n      dim = 2\n      nx = 20\n      ny = 20\n      xmin = 0\n      xmax = 4000\n      ymax = -200\n      ymin = -2000\n    []\n    [dike]\n      type = ParsedGenerateSideset\n      input = gen\n      combinatorial_geometry = 'y <= -400 & x = 0'\n      new_sideset_name = dike\n    []\n\n  []\n  \n  [Dampers]\n    [./limit]\n      type = BoundingValueNodalDamper\n      variable = pliquid\n      max_value = 1e8\n      min_value = 1e1\n    [../]\n    [./limit2]\n        type = BoundingValueNodalDamper\n        variable = h\n        max_value = 1e6\n        min_value = 1e2\n\n    [../]\n  []\n\n  [GlobalParams]\n    PorousFlowDictator = dictator\n    gravity = '0 -9.81 0'\n  []\n\n  [UserObjects]\n    [dictator]\n      type = PorousFlowDictator\n      porous_flow_vars = 'pliquid h'\n      number_fluid_phases = 2\n      number_fluid_components = 1\n    []\n    [pc] #from porousflow/test/tests/fluidstate/watervapor.i\n      type = PorousFlowCapillaryPressureBC\n      pe = 1e5\n      lambda = 2\n      pc_max = 1e6\n    []\n    [fs]\n      type = PorousFlowWaterVapor\n      water_fp = water97 # you can't use tabulated fluids here!\n      capillary_pressure = pc\n    []\n  []\n  \n  \n  [AuxVariables]\n    [temperature]\n      family = MONOMIAL\n      order = CONSTANT\n    []\n    [water_darcy_vel_x]\n      family = MONOMIAL\n      order = CONSTANT\n    []\n    [water_darcy_vel_y]\n      family = MONOMIAL\n      order = CONSTANT\n    []\n    [gas_darcy_vel_x]\n      family = MONOMIAL\n      order = CONSTANT\n    []\n    [gas_darcy_vel_y]\n      family = MONOMIAL\n      order = CONSTANT\n    []\n    [pgas]\n      family = MONOMIAL\n      order = CONSTANT\n    []\n    [gas_sat]\n        family = MONOMIAL\n        order = CONSTANT  \n    []\n    [hydrostat]\n        family = MONOMIAL\n        order = CONSTANT\n    []\n    [geotherm]\n      order = FIRST\n      family = LAGRANGE\n    []\n[]\n  \n  \n  [AuxKernels]\n    [temperature]\n      type = PorousFlowPropertyAux\n      variable = temperature\n      property = temperature\n      execute_on = 'initial timestep_end'  \n    []\n    [darcy_vel_x_kernel]\n      type = PorousFlowDarcyVelocityComponent\n      component = x\n      variable = water_darcy_vel_x\n      fluid_phase = 0                            \n      execute_on = 'initial timestep_end'\n       \n    []\n    [darcy_vel_y_kernel]\n      type = PorousFlowDarcyVelocityComponent\n      component = y\n      variable = water_darcy_vel_y\n      fluid_phase = 0                             \n      execute_on = 'initial timestep_end'\n    []\n    [darcy_vel_x_kernel_gas]\n      type = PorousFlowDarcyVelocityComponent\n      component = x\n      variable =gas_darcy_vel_x\n      fluid_phase = 1                            \n      execute_on = 'initial timestep_end'\n       \n    []\n    [darcy_vel_y_kernel_gas]\n      type = PorousFlowDarcyVelocityComponent\n      component = y\n      variable = gas_darcy_vel_y\n      fluid_phase = 1                             \n      execute_on = 'initial timestep_end'\n       \n    []\n    [pressure_gas]\n      type = PorousFlowPropertyAux\n      variable = pgas\n      property = pressure\n      phase = 1\n      execute_on = 'initial timestep_end'\n    []\n    [gas_sat]\n        type = PorousFlowPropertyAux\n        variable = gas_sat\n        property = saturation\n        phase = 1\n        execute_on = 'initial timestep_end'\n    []\n    [hydrostat]\n        type = FunctionAux\n        function = ppfunc\n        variable = hydrostat\n    []\n  []\n  \n  [Variables]\n    [pliquid]\n      order = FIRST\n      family = LAGRANGE\n      scaling = 1e1\n    []\n    [h]\n      order = FIRST\n      family = LAGRANGE\n    []\n  []\n  \n  [Functions]\n    [dike_temp]\n        type = ParsedFunction\n        expression = '500000*(1-exp(-t/5000))+40000'    \n      []\n    [ppfunc]\n      type = ParsedFunction\n      expression = 1.0135e5-(y)*9.81*1000 #hydrostatic gradientose   + atmospheric pressure in Pa\n    []\n    [tfunc]\n      type = ParsedFunction\n      expression = 285+(-y)*10/1000 # geothermal 10 C per kilometer in kelvin\n    []\n  []\n  \n\n  \n  [ICs]\n    [t_ic]\n      type = FunctionIC\n      variable = geotherm\n      function = tfunc\n    []\n    [ppic]\n      type = FunctionIC # pressure is hydrostatic\n      variable = pliquid\n      function = ppfunc\n    []\n    [hic]\n      type = PorousFlowFluidPropertyIC\n      variable = h\n      temperature = geotherm\n      property = enthalpy\n      temperature_unit = Kelvin\n      porepressure = pliquid\n      fp = water97\n    []\n\n  []\n  \n  [BCs]\n    [t_dike_dirichlet]\n        type = FunctionDirichletBC\n        variable = h\n        function = dike_temp\n        boundary = 'dike'\n    []\n    [t_dike_neumann]\n        type = NeumannBC\n        variable = h\n        boundary = 'dike'\n        value = 0\n    []\n\n    [pp_like_dirichlet]\n        type = PorousFlowPiecewiseLinearSink\n        variable = pliquid\n        boundary = 'top bottom right'\n        pt_vals = '1e-9 1e9'\n        multipliers = '1e-9 1e9'\n        PT_shift = hydrostat\n        flux_function = 1e-5\n        use_mobility = true \n        use_relperm = true\n        fluid_phase = 0\n    []\n    [ptop_gas]\n        type = PorousFlowPiecewiseLinearSink\n        # allow fluid to flow out or in of the top boundary\n        # based on pliquid - Pe\n        variable = pliquid\n        boundary = 'top bottom right'\n        pt_vals = '1e-9 1e9'\n        multipliers = '1e-9 1e9'\n        PT_shift = hydrostat\n        flux_function = 1e-5\n        fluid_phase = 1\n        use_mobility = true\n        use_relperm = true\n    []\n  []\n  \n  [Kernels]\n    [mass]\n      type = PorousFlowMassTimeDerivative\n      variable = pliquid\n      \n    []\n    [massflux]\n      type = PorousFlowAdvectiveFlux\n      variable = pliquid\n       \n    []\n    [heat]\n      type = PorousFlowEnergyTimeDerivative\n      variable = h\n       \n    []\n    [heatflux]\n      type = PorousFlowHeatAdvection\n      variable = h\n       \n    []\n    [heatcond]\n      type = PorousFlowHeatConduction\n      variable = h \n    []\n  []\n  \n \n  [FluidProperties]\n    [water97]\n      type = Water97FluidProperties    # IAPWS-IF97\n    []\n    [water_tab]\n      type = TabulatedBicubicFluidProperties\n      fp = water97\n      temperature_min=274\n      temperature_max=1000\n      pressure_min=1\n      pressure_max=1e9\n      error_on_out_of_bounds = false\n      save_file = true\n    []\n  []\n  \n  [Materials]\n      [watervapor]\n        type = PorousFlowFluidStateSingleComponent\n        porepressure = pliquid\n        enthalpy = h\n        capillary_pressure = pc\n        fluid_state = fs\n        temperature_unit = Kelvin\n      []\n\n      [porosity_wallrock]\n        type = PorousFlowPorosityConst\n        porosity = 0.1\n      []\n      [permeability]\n        type = PorousFlowPermeabilityConst\n        permeability = '1E-15 0 0   0 1E-15 0   0 0 1E-15'\n      []\n      [relperm_water] # from watervapor.i\n        type = PorousFlowRelativePermeabilityCorey\n        n = 2\n        phase = 0\n      []\n      [relperm_gas]  # from watervapor.i\n        type = PorousFlowRelativePermeabilityCorey\n        n = 3\n        phase = 1\n      []\n      [internal_energy] \n        type = PorousFlowMatrixInternalEnergy\n        density = 2400 # kg/m^3\n        specific_heat_capacity = 790 # J/kg/K\n      []\n      [rock_thermal_conductivity]\n        type = PorousFlowThermalConductivityIdeal\n        dry_thermal_conductivity = '4 0 0  0 4 0  0 0 4' # W/m/K\n      []  \n  []\n  \n  [Preconditioning]\n    [smp]\n      type = SMP\n      full = true\n      petsc_options_iname = '-pc_type -pc_factor_mat_solver_package'\n      petsc_options_value = ' lu       mumps'\n    []\n  []\n  \n  [Executioner]\n    type = Transient\n    solve_type = NEWTON\n    end_time = 3.0e9\n    line_search = none\n    dtmin = 100\n    [TimeStepper]\n      type = IterationAdaptiveDT\n      dt = 1000\n    []\n    [Adaptivity]\n        interval = 1\n        refine_fraction = 0.2\n        coarsen_fraction = 0.3\n        max_h_level = 4\n      []\n  []\n  \n  [Postprocessors]\n   [max_gassat] #check boundary behaves as expected\n        type = ElementExtremeValue\n        variable = gas_sat\n        execute_on = 'initial timestep_end'\n    []\n[]\n\n[Controls]\n    [period0]\n        type = TimePeriod\n        disable_objects = 'BoundaryCondition::t_dike_neumann'\n        enable_objects = 'BoundaryCondition::t_dike_dirichlet'\n        start_time = '0'\n        end_time = '63072000'\n        execute_on = 'initial timestep_begin'\n      []\n    \n      [period2]\n        type = TimePeriod\n        disable_objects = 'BoundaryCondition::t_dike_dirichlet'\n        enable_objects = 'BoundaryCondition::t_dike_neumann'\n        start_time = '63072000'\n        end_time = '3e9'\n        execute_on = 'initial timestep_begin'\n      []\n[]\n\n  [Outputs]\n    perf_graph = true\n    exodus = true\n    execute_on = 'initial timestep_end failed'\n    [residuals]\n        type = TopResidualDebugOutput\n        num_residuals = 1\n        execute_on = 'NONLINEAR TIMESTEP_END INITIAL'\n    []\n  []\n  \n  [Debug]\n    show_var_residual_norms = true\n  []\n\n\n\nThank you for your attention!",
          "url": "https://github.com/idaholab/moose/discussions/27159",
          "updatedAt": "2024-05-21T20:04:22Z",
          "publishedAt": "2024-03-20T23:06:38Z",
          "category": {
            "name": "Q&A Modules: Porous Flow"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "cpgr"
                  },
                  "bodyText": "Just letting you know that I've seen this but am away until next week so can't look at it until then. Sounds interesting though so make sure that you bug me if I forget to look at it early next week \ud83d\ude05",
                  "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-8863382",
                  "updatedAt": "2024-03-21T09:48:44Z",
                  "publishedAt": "2024-03-21T09:48:43Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "@cpgr Following up on this. I really appreciate your time.",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-8930727",
                          "updatedAt": "2024-03-27T16:08:00Z",
                          "publishedAt": "2024-03-27T16:08:00Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "Any thoughts on this @cpgr or @WilkAndy",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-8975087",
                          "updatedAt": "2024-04-01T17:36:32Z",
                          "publishedAt": "2024-04-01T17:36:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "@cpgr, @WilkAndy, @GiudGiud\nA couple updates and another request for assistance. I'm hoping to get this written up for my dissertation for graduation in June so I really appreciate your time and attention on this. I appreciate that this is a free community with a lot of great documentation and resources.\n\n\nOne of the issues I was having was the classic \"Pressure out of bounds\", the solution normally would be to use TabulatedFluidProperties however PorousFlowWaterVapor userobject does not work with tabulated fluid properties. So I've rewritten Water97FluidProperties to remove the MooseException on out of bound so it just gives a warning instead. I know this might lead to unphysical results but I had to try something.\n\n\nI tried with SVD with this new fluid properties and doesn't have any singular values but the condition number was high (4.7e9) so I added automatic scaling but this time with compute_scaling_once=false in hopes this would address the problem I mentioned above where the residual for h becomes much larger than the residual for pliquid. This does seem to help but I still get issues when I get to the critical temperature\n\n\nHere's an example of what the convergence looks like:\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | max_gassat     | max_temp       |\n+----------------+----------------+----------------+\n:                :                :                :\n|   4.032963e+02 |   0.000000e+00 |   3.630635e+02 |\n|   4.032963e+02 |   0.000000e+00 |   3.630635e+02 |\n+----------------+----------------+----------------+\n\n[DBG][0] Max 1 residuals\n[DBG][0] -3.91568755730987e-06 'h' in subdomain(s) {''} at node 0: (x,y,z)=(       0,    -2000,        0)\nMesh unchanged, skipping remaining steps...\n\nTime Step 28, time = 403.296, dt = 1.81899e-09\nPre-SMO residual: 8.63758e-06\n\nPerforming automatic scaling calculation\n\n    |residual|_2 of individual variables:\n                    pliquid: 0.000598393\n                    h:       1.70492e-06\n[DBG][0] Max 1 residuals\n[DBG][0] -0.000179414795588558 'pliquid' in subdomain(s) {''} at node 106: (x,y,z)=(       0,    -1550,        0)\n 0 Nonlinear |R| = 5.983956e-04\n      0 Linear |R| = 5.983956e-04\n      1 Linear |R| = 2.427520e-05\n      2 Linear |R| = 5.028450e-06\n      3 Linear |R| = 1.306079e-06\n      4 Linear |R| = 1.867992e-07\n      5 Linear |R| = 2.200727e-08\n      6 Linear |R| = 5.238316e-09\n    |residual|_2 of individual variables:\n                    pliquid: 1.95181e+06\n                    h:       2.61064e+48\n[DBG][0] Max 1 residuals\n[DBG][0] 2.61063768205785e+48 'h' in subdomain(s) {''} at node 0: (x,y,z)=(       0,    -2000,        0)\n 1 Nonlinear |R| = 2.610638e+48\nNonlinear solve did not converge due to DIVERGED_DTOL iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nSolve failed, cutting timestep.\n\nTime Step 28, time = 403.296, dt = 9.09495e-10\nPre-SMO residual: 6.00394e-06\n\nPerforming automatic scaling calculation\n\n    |residual|_2 of individual variables:\n                    pliquid: 0.000328146\n                    h:       9.35113e-07\n[DBG][0] Max 1 residuals\n[DBG][0] -9.84100512907783e-05 'pliquid' in subdomain(s) {''} at node 106: (x,y,z)=(       0,    -1550,        0)\n 0 Nonlinear |R| = 3.281475e-04\n      0 Linear |R| = 3.281475e-04\n      1 Linear |R| = 1.454876e-05\n      2 Linear |R| = 3.509655e-06\n      3 Linear |R| = 9.578692e-07\n      4 Linear |R| = 1.816085e-07\n      5 Linear |R| = 3.547549e-08\n      6 Linear |R| = 4.969955e-09\n      7 Linear |R| = 1.588303e-09\n    |residual|_2 of individual variables:\n                    pliquid: 1.95181e+06\n                    h:       2.61064e+48\n[DBG][0] Max 1 residuals\n[DBG][0] 2.61063768198739e+48 'h' in subdomain(s) {''} at node 0: (x,y,z)=(       0,    -2000,        0)\n 1 Nonlinear |R| = 2.610638e+48\nNonlinear solve did not converge due to DIVERGED_DTOL iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nSolve failed, cutting timestep.\n\nTime Step 28, time = 403.296, dt = 4.54747e-10\nPre-SMO residual: 4.79489e-06\n\nPerforming automatic scaling calculation\n\n    |residual|_2 of individual variables:\n                    pliquid: 0.00019397\n                    h:       5.50038e-07\n[DBG][0] Max 1 residuals\n[DBG][0] -5.91104849096966e-05 'pliquid' in subdomain(s) {''} at node 106: (x,y,z)=(       0,    -1550,        0)\n 0 Nonlinear |R| = 1.939710e-04\n      0 Linear |R| = 1.939710e-04\n      1 Linear |R| = 1.074573e-05\n      2 Linear |R| = 2.636189e-06\n      3 Linear |R| = 9.424006e-07\n      4 Linear |R| = 1.956206e-07\n      5 Linear |R| = 5.982122e-08\n      6 Linear |R| = 7.405004e-09\n      7 Linear |R| = 1.980791e-09\n      8 Linear |R| = 6.424076e-10\n    |residual|_2 of individual variables:\n                    pliquid: 1.95181e+06\n                    h:       2.61064e+48\n[DBG][0] Max 1 residuals\n[DBG][0] 2.61063768196143e+48 'h' in subdomain(s) {''} at node 0: (x,y,z)=(       0,    -2000,        0)\n 1 Nonlinear |R| = 2.610638e+48\nNonlinear solve did not converge due to DIVERGED_DTOL iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nSolve failed, cutting timestep.",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9204475",
                          "updatedAt": "2024-04-23T18:47:17Z",
                          "publishedAt": "2024-04-23T18:47:17Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "PorousFlowWaterVapor userobject does not work with tabulated fluid properties\n\nthis could be fixed.  I want TFPs to work across the board. Do you have a MWE?\n\ncompute_scaling_once=false\n\nthat's usually not a great idea. If the residuals for a variable are converging (approaching steady state for example), we will start tightening to no-end the convergence criteria",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9205331",
                          "updatedAt": "2024-04-23T20:36:10Z",
                          "publishedAt": "2024-04-23T20:36:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "this could be fixed. I want TFPs to work across the board. Do you have a MWE?\n\n# MWE showing that PorousFlowWaterVapor does not work with TabulatedBicubicFluidProperties\n# based on water_vapor_phase_change.i\n\n[Mesh]\n  type = GeneratedMesh\n  dim = 3\n  xmax = 10\n  ymax = 10\n  zmax = 10\n[]\n\n[GlobalParams]\n  PorousFlowDictator = dictator\n[]\n\n[Variables]\n  [pliq]\n    initial_condition = 9e6\n  []\n  [h]\n    scaling = 1e-3\n  []\n[]\n\n[ICs]\n  [hic]\n    type = PorousFlowFluidPropertyIC\n    variable = h\n    porepressure = pliq\n    property = enthalpy\n    temperature = 300\n    temperature_unit = Celsius\n    fp = water_tab\n  []\n[]\n\n[DiracKernels]\n  [mass]\n    type = ConstantPointSource\n    point = '5 5 5'\n    variable = pliq\n    value = -1\n  []\n  [heat]\n    type = ConstantPointSource\n    point = '5 5 5'\n    variable = h\n    value = -1.344269e6\n  []\n[]\n\n[Kernels]\n  [mass]\n    type = PorousFlowMassTimeDerivative\n    variable = pliq\n  []\n  [heat]\n    type = PorousFlowEnergyTimeDerivative\n    variable = h\n  []\n[]\n\n[UserObjects]\n  [dictator]\n    type = PorousFlowDictator\n    porous_flow_vars = 'pliq h'\n    number_fluid_phases = 2\n    number_fluid_components = 1\n  []\n  [pc]\n    type = PorousFlowCapillaryPressureBC\n    pe = 1e5\n    lambda = 2\n    pc_max = 1e6\n  []\n  [fs]\n    type = PorousFlowWaterVapor\n    water_fp = water_tab\n    capillary_pressure = pc\n  []\n[]\n\n[FluidProperties]\n  [water]\n    type = Water97FluidProperties\n  []\n  [water_tab]\n    type = TabulatedBicubicFluidProperties\n    fp = water\n    save_file = false\n\n  []\n[]\n\n[Materials]\n  [watervapor]\n    type = PorousFlowFluidStateSingleComponent\n    porepressure = pliq\n    enthalpy = h\n    temperature_unit = Celsius\n    capillary_pressure = pc\n    fluid_state = fs\n  []\n  [permeability]\n    type = PorousFlowPermeabilityConst\n    permeability = '1e-14 0 0 0 1e-14 0 0 0 1e-14'\n  []\n  [relperm0]\n    type = PorousFlowRelativePermeabilityCorey\n    n = 2\n    phase = 0\n  []\n  [relperm1]\n    type = PorousFlowRelativePermeabilityCorey\n    n = 3\n    phase = 1\n  []\n  [porosity]\n    type = PorousFlowPorosityConst\n    porosity = 0.2\n  []\n  [internal_energy]\n    type = PorousFlowMatrixInternalEnergy\n    density = 2650\n    specific_heat_capacity = 1000\n  []\n[]\n\n\n[AuxVariables]\n\n    [temperature]\n      order = CONSTANT\n      family = MONOMIAL\n    []\n\n  []\n  \n  [AuxKernels]\n\n\n    [temperature]\n      type = PorousFlowPropertyAux\n      variable = temperature\n      property = temperature\n      execute_on = 'initial timestep_end'\n    []\n  []\n  \n\n[Executioner]\n  type = Transient\n  solve_type = NEWTON\n  end_time = 1e3\n  nl_abs_tol = 1e-12\n  [TimeStepper]\n    type = IterationAdaptiveDT\n    dt = 10\n  []\n[]\n\n[Preconditioning]\n  [smp]\n    type = SMP\n    full = true\n  []\n[]\n\n\n[Outputs]\n  csv = true\n  perf_graph = false\n[]\n\n\nwhich gives this error:\n*** ERROR ***\n/home/akh/myprojects/moose_projects/dikes/sims/benchmark/mwe_porousflowwatervapor_tab.i:87.3:\nThe following error occurred in the FluidProperties 'water_tab' of type TabulatedBicubicFluidProperties.\n\nvirtual libMesh::Real SinglePhaseFluidProperties::triplePointPressure() const not implemented.\n\nI'd be happy to fix this with a bit of guidance on the correct way. The issues is pretty simple: TabulatedFluidProperties inherits from SinglePhaseFluidProperties and Water97FluidProperties overrides and implements triplePointPressure() and several other functions. So the fix would be for TabulatedFluidProperties to check for those implementations in _fp and use the ones implemented there and if there isn't one it would need to read another column from TFP file with a couple more things like triple point pressure, temperature, something with vapor pressure and vapor temperature, etc. I think that would work but could use a pointer in the right direction.",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9205632",
                          "updatedAt": "2024-04-23T21:20:00Z",
                          "publishedAt": "2024-04-23T21:20:00Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "So the fix would be for TabulatedFluidProperties to check for those implementations in _fp and use the ones implemented there\n\nthis could be fine as a backup method.\na boolean parameter like \"use_parameter_fp_for_missing_implementations\" and then explicitly forwarding to _fp for all the ones we need when it is set to true",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9205740",
                          "updatedAt": "2024-04-23T21:39:00Z",
                          "publishedAt": "2024-04-23T21:38:59Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "cpgr"
                          },
                          "bodyText": "This is probably my fault! I'm happy to help make this work.\nAlso, I totally forgot about your earlier question. I'm really sorry about that!",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9205874",
                          "updatedAt": "2024-04-23T22:01:50Z",
                          "publishedAt": "2024-04-23T22:01:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "I opened a new issue about TabulatedFluidProperties: #27457",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9206117",
                          "updatedAt": "2024-04-23T22:48:57Z",
                          "publishedAt": "2024-04-23T22:48:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "This is probably my fault! I'm happy to help make this work.\nAlso, I totally forgot about your earlier question. I'm really sorry about that!\n\nNo worries @cpgr ! I hope that using tabulated fluid properties will help but I'm not positive it will. The blow up of the residual for enthalpy is my major concern which I noted above. Do you have insight to what causes that?",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9206157",
                          "updatedAt": "2024-04-23T22:57:31Z",
                          "publishedAt": "2024-04-23T22:57:30Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aikubo"
                          },
                          "bodyText": "Adding tabulated fluid properties doesn't seem to help with convergence. Any help on this @cpgr ?\nthis pull request is mostly done #27506",
                          "url": "https://github.com/idaholab/moose/discussions/27159#discussioncomment-9513100",
                          "updatedAt": "2024-05-21T20:04:45Z",
                          "publishedAt": "2024-05-21T20:04:22Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "install magpie in conda environment",
          "author": {
            "login": "lvkas521424"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A Getting Started is the most appropriate category for my question (trouble installing, beginner user, ...)\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (avoid screenshots if possible, triple back quotes before/after pasted text, etc)\n\nIssue or question about MOOSE\nHello, contributors\nAfter configuring the moose environment in ubuntu, I followed magpie's instructions to install it, but had this problem\n(moose) lvjiahui@lvkas:~/projects$ git clone https://github.com/idaholab/magpie.git\nCloning into 'magpie'...\nremote: Enumerating objects: 10920, done.\nremote: Counting objects: 100% (1853/1853), done.\nremote: Compressing objects: 100% (1014/1014), done.\nremote: Total 10920 (delta 850), reused 1812 (delta 836), pack-reused 9067\nReceiving objects: 100% (10920/10920), 12.47 MiB | 1.04 MiB/s, done.\nResolving deltas: 100% (6084/6084), done.\n(moose) lvjiahui@lvkas:~/projects$ git config --global http.postBuffer 4096M\n(moose) lvjiahui@lvkas:~/projects/magpie$ git checkout master\nbranch 'master' set up to track 'origin/master'.\nSwitched to a new branch 'master'\n(moose) lvjiahui@lvkas:~/projects/magpie$ git submodule update --init --recursive\nCloning into '/home/lvjiahui/projects/magpie/moose'...\nfatal: unable to access 'https://github.com/idaholab/moose.git/': Could not resolve host: github.com\nfatal: clone of 'https://github.com/idaholab/moose.git' into submodule path '/home/lvjiahui/projects/magpie/moose' failed\nFailed to clone 'moose'. Retry scheduled\nCloning into '/home/lvjiahui/projects/magpie/moose'...\n\nIs it just my network or is it not configured properly?\nlvjiahui",
          "url": "https://github.com/idaholab/moose/discussions/27675",
          "updatedAt": "2024-05-21T03:10:42Z",
          "publishedAt": "2024-05-20T16:21:36Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "git config --global http.postBuffer 4096M\nthis is not in our instructions?",
                  "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9498612",
                  "updatedAt": "2024-05-20T16:26:11Z",
                  "publishedAt": "2024-05-20T16:26:10Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "lvkas521424"
                          },
                          "bodyText": "yeah\uff0cI suspected that there was a problem with my network, so I tried to fix it with this command, but it didn't seem to do anything.",
                          "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9498648",
                          "updatedAt": "2024-05-20T16:29:56Z",
                          "publishedAt": "2024-05-20T16:29:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "does git clone https://github.com/idaholab/moose.git work outside of magpie?",
                          "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9498738",
                          "updatedAt": "2024-05-20T16:38:36Z",
                          "publishedAt": "2024-05-20T16:38:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lvkas521424"
                          },
                          "bodyText": "Sure, it's normal.\n\n(moose) lvjiahui@lvkas:~/projects$ git clone [https://github.com/idaholab/moose.git](https://github.com/idaholab/moose.git%60) Cloning into 'moose'... remote: Enumerating objects: 752762, done. remote: Counting objects: 100% (3802/3802), done. remote: Compressing objects: 100% (1947/1947), done. Receiving objects: 3% (26559/752762), 7.41 MiB | 1001.00 KiB",
                          "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9498760",
                          "updatedAt": "2024-05-20T16:41:41Z",
                          "publishedAt": "2024-05-20T16:41:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "ok. can you rm -rf moose in magpie/ and try again?\nand also did you modify any of the .git files in magpie?",
                          "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9498778",
                          "updatedAt": "2024-05-20T16:43:23Z",
                          "publishedAt": "2024-05-20T16:43:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lvkas521424"
                          },
                          "bodyText": "Ok, I will try it tomorrow and I didn't modify anything.\nIt's time to sleep in my country. Thank you very much. Godbye and Good night.",
                          "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9498807",
                          "updatedAt": "2024-05-20T16:46:50Z",
                          "publishedAt": "2024-05-20T16:46:50Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lvkas521424"
                          },
                          "bodyText": "@GiudGiud Thanks sir, after deleting the moose folder, I re-downloaded and compiled the magpie. And now it's successful.\nLvjiahui",
                          "url": "https://github.com/idaholab/moose/discussions/27675#discussioncomment-9502952",
                          "updatedAt": "2024-05-21T03:12:10Z",
                          "publishedAt": "2024-05-21T03:10:42Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Elemental to nodal variable",
          "author": {
            "login": "lyyc199586"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nHi all,\nIs there a way to transfer an elemental variable to a nodal variable in MOOSE? I am trying to translate a material property to nodal variable to do some other manipulations (I want to get the position of the maximum value)",
          "url": "https://github.com/idaholab/moose/discussions/27678",
          "updatedAt": "2024-05-20T20:43:05Z",
          "publishedAt": "2024-05-20T20:37:17Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "lyyc199586"
                  },
                  "bodyText": "NVM, ProjectionAux is what I need",
                  "url": "https://github.com/idaholab/moose/discussions/27678#discussioncomment-9500759",
                  "updatedAt": "2024-05-20T20:43:04Z",
                  "publishedAt": "2024-05-20T20:43:03Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "MultiApp transfer material property",
          "author": {
            "login": "tqcthai"
          },
          "bodyText": "Dear all,\nI start using Multi-app but fail in running it. In the main-app, I try to push the information of 'elastic_energy' which is computed from the stress function to the sub-app, and pull the 'fracture_energy' from it.\nThe error I encounter is sub_app0: Material property 'elastic_energy', requested by 'fracture_driving_energy' is not defined on block 1 \nMain-app\n[AuxVariables]\n  [elastic_energy]\n   order = FIRST\n   family = MONOMIAL\n  []\n[]\n[AuxKernels]\n [elastic_energy]\n  type = MaterialRealAux\n  variable = elastic_energy\n  property = elastic_energy\n []\n[]\n\n\n[Materials]\n  [elasticity_tensor]\n    type = ComputeElasticityTensor\n    C_ijkl = '136.5e3 70.3e3'\n    fill_method = symmetric_isotropic\n  []\n  [compute_stress]\n    c = c\n    type = ComputeJ2PlasticityPFStress\n    E_name = 'elastic_energy'\n    F_name = 'local_fracture_energy'\n  []\n[]\n\n\n[MultiApps]\n  [sub_app]\n    type = TransientMultiApp\n    positions = '0 0 0'\n    input_files = 'PF.i'\n  []\n[]\n\n[Transfers]\n  [pull_v]\n    type = MultiAppProjectionTransfer\n    from_multi_app = sub_app\n    source_variable = c\n    variable = local_fracture_energy\n  []\n  [push_u]\n    type = MultiAppProjectionTransfer\n    to_multi_app = sub_app\n    source_variable = displacement\n    variable = elastic_energy\n  []\n[]\n\nSub-app\n\n[AuxVariables]\n  [local_fracture_energy]\n    order = FIRST\n    family = MONOMIAL\n  []\n  [elastic_energy]\n  []\n[]\n\n[AuxKernels]\n  [local_fracture_energy]\n    type = MaterialRealAux\n    variable = local_fracture_energy\n    property = local_fracture_energy\n  []\n[]\n\n\n[Materials]\n  [local_fracture_energy]\n    type = DerivativeParsedMaterial\n    property_name = local_fracture_energy\n    coupled_variables = 'c'\n    material_property_names = 'gc_prop l'\n    expression = 'c^2 * gc_prop / 2 / l'\n    derivative_order = 2\n  []\n  [fracture_driving_energy]\n    type = DerivativeSumMaterial\n    coupled_variables = c\n    sum_materials = 'elastic_energy local_fracture_energy'\n    derivative_order = 2\n    property_name = F\n  []\n[]\n\nHope to get your help.",
          "url": "https://github.com/idaholab/moose/discussions/27586",
          "updatedAt": "2024-05-20T15:43:47Z",
          "publishedAt": "2024-05-09T17:29:23Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThe first issue is this block\n  [pull_v]\n    type = MultiAppProjectionTransfer\n    from_multi_app = sub_app\n    source_variable = c\n    variable = local_fracture_energy\n  []\n\nwhich refers to a 'local_fracture_energy' variable when it looks like it s only a material property.\nYou can use the material property output (on each material) to trigger the output of the property to a variable.\nFor debugging other material property issues, use this:\n[Debug]\n  show_material_props = true\n[]",
                  "url": "https://github.com/idaholab/moose/discussions/27586#discussioncomment-9372921",
                  "updatedAt": "2024-05-09T17:35:11Z",
                  "publishedAt": "2024-05-09T17:35:11Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "tqcthai"
                          },
                          "bodyText": "That's true. But I think there is also an error for passing the 'elastic energy' from the main-app to the sub-app. The error I get is in the sub_app : \"sub_app0: Material property 'elastic_energy', requested by 'fracture_driving_energy' is not defined on block 1\". Is the way I define 'elastic_energy' as an AuxVariable correct to pass it as\n[push_u]\n    type = MultiAppProjectionTransfer\n    to_multi_app = sub_app\n    source_variable = displacement\n    variable = elastic_energy\n  []\n\n?",
                          "url": "https://github.com/idaholab/moose/discussions/27586#discussioncomment-9373070",
                          "updatedAt": "2024-05-09T17:50:36Z",
                          "publishedAt": "2024-05-09T17:49:08Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the object returning the error 'fracture_driving_energy is not the transfer.\nit's a DerivativeSumMaterial\nand it's telling you there's no elastic_energy material property. Only a variable is available.\nSo either create a material property from the variable (using a VarMaterial if that exists, or similar)\nor use a variable in the DerivativeSumMaterial",
                          "url": "https://github.com/idaholab/moose/discussions/27586#discussioncomment-9373101",
                          "updatedAt": "2024-05-09T17:53:29Z",
                          "publishedAt": "2024-05-09T17:53:29Z",
                          "isAnswer": true
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "tqcthai"
                          },
                          "bodyText": "Thanks @GiudGiud. I made it work.\nOne more question: In case I am using the Newton solver for both the main-problem and the sub-problem, as far as I can see, the Multiapp solves the equation of the main-problem by iterating until the convergence criteria are fulfilled. Then it transfers the data to the sub-problem and solves it in the same way, i.e., by iterating and checking for convergence.\nHow can I set up a framework like this:\n\nRun the first Newton iteration for the main-problem.\nTransfer the data from the main problem to the sub-problem.\nRun the first Newton iteration for the sub-problem.\nCheck for convergence and repeat step 1 for the next Newton iteration until both solutions converge, then move to the next loading/time step.\n\nAnother question: Is transferring data between different apps expensive?",
                          "url": "https://github.com/idaholab/moose/discussions/27586#discussioncomment-9498128",
                          "updatedAt": "2024-05-20T15:39:40Z",
                          "publishedAt": "2024-05-20T15:39:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "hello\n\nRun the first Newton iteration for the main-problem.\n\n\nIf you mean WITHIN the newton solve\nyou can do this using transfers and multiapps (both) executed on (set the execute_on parameter) on NONLINEAR.\n\n\nAnother question: Is transferring data between different apps expensive?\n\nshould not be as expensive as solving in the vast majority of cases.\n\nIf you mean fixed point iterations OUTSIDE the newton solve, WITHIN one loading step:\n\nin the execution block, set the fixed_point_max_its parameter to trigger fixed point iterations outside of the nonlinear solve",
                          "url": "https://github.com/idaholab/moose/discussions/27586#discussioncomment-9498178",
                          "updatedAt": "2024-05-20T15:48:16Z",
                          "publishedAt": "2024-05-20T15:43:46Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Problems in installing recent version of moose",
          "author": {
            "login": "anuragjha2015"
          },
          "bodyText": "I am getting this error,\n/home/user/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::dir_name(std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&)'\nPreviously I had installed moose on multiple HPC terminals without error. But after the wasp rollout there is some issue. If I already have a scheduler in the HPC then I am guessing I dont need the wasp scheduler. But I am not able to compile the code without wasp. Is there some way I can do this ?",
          "url": "https://github.com/idaholab/moose/discussions/27424",
          "updatedAt": "2024-05-20T14:01:03Z",
          "publishedAt": "2024-04-20T07:10:29Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nWasp isn't a scheduler. It s an input file parser and many other things\nYou do have to install it. For HPC, the script to do that is in moose/scripts\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9172922",
                  "updatedAt": "2024-04-20T07:31:13Z",
                  "publishedAt": "2024-04-20T07:31:12Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "Okay Thanks Guillaume! I was confused.\nI got this error\nLinking Executable /home/khushbu22/projects/moose/test/moose_test-opt...\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::dir_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::NodeView::data[abi:cxx11]() const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::Value::operator[](std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::strip_quotes(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildCompletionObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool, bool, int)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::RPCStringToObject(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, wasp::DataObject&, std::ostream&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::last_as_string[abi:cxx11](bool*) const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::DataObject::operator[](std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::first_child_by_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildLocationObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, int, int, int)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::path[abi:cxx11]() const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildDocumentSymbolObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, bool, int, int, int, int, int, int, int, int)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::objectToRPCString(wasp::DataObject&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, std::ostream&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildTextEditObject(wasp::DataObject&, std::ostream&, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildDiagnosticObject(wasp::DataObject&, std::ostream&, int, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::child_count_by_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) const'\ncollect2: error: ld returned 1 exit status\n\nI had followed the steps as on the website, after installing all the pre-requisites.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9173627",
                          "updatedAt": "2024-04-22T13:25:13Z",
                          "publishedAt": "2024-04-20T10:42:52Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "You mentioned wasp on your HPC cluster as if it was being provided by another means. So to me this feels like some sort of version mismatch requirement.\nIs there a WASP_DIR set?\necho $WASP_DIR\nIf not, then we might only need to rebuild wasp accordingly, using the script:\ncd /home/khushbu22/projects/moose/scripts\n./update_and_rebuild_wasp.sh",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9189094",
                          "updatedAt": "2024-04-22T13:30:49Z",
                          "publishedAt": "2024-04-22T13:30:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "Hello Jason,\nI did as you said, it is still generating the same error. Please tell me what if there are any changes in the requirements.\nThanks,\nAnurag",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9190371",
                          "updatedAt": "2024-04-22T15:53:51Z",
                          "publishedAt": "2024-04-22T15:12:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "After running the moose/scripts/ipdate_and_rebuild_wasp there is no WASP_DIR set?\nDid you clean the repository after installing wasp? With \"git clean -xfD\" in the moose/ folder\nChanging a dependency means previously compiled code with a previous version of wasp is no longer valid.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9190738",
                          "updatedAt": "2024-04-22T15:38:26Z",
                          "publishedAt": "2024-04-22T15:38:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "no @GiudGiud WASP_DIR is not set, how do I set that ? I am trying with \"git clean -xf\" there is no D option in git clean ! Yup i know I would have to rebuild petsc and libmesh. What is petsc_alt for ?\nThanks for the help.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9190851",
                          "updatedAt": "2024-04-22T15:52:36Z",
                          "publishedAt": "2024-04-22T15:45:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "xfd maybe?",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9190877",
                          "updatedAt": "2024-04-22T15:46:50Z",
                          "publishedAt": "2024-04-22T15:46:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "Ill try tomorrow, Will keep you posted,\nadieu.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9191075",
                          "updatedAt": "2024-04-22T16:03:27Z",
                          "publishedAt": "2024-04-22T16:03:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Sounds good\nPetsc alt is for continuous integration purposes. You don't need to worry about that",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9191224",
                          "updatedAt": "2024-04-22T16:18:24Z",
                          "publishedAt": "2024-04-22T16:17:43Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "When you get a chance, I would also like to see how the dependency libraries were linked. If you can report the results of the following;\nldd ~/projects/moose/petsc/arch-moose/lib/libpetsc.so",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9191366",
                          "updatedAt": "2024-04-22T16:33:13Z",
                          "publishedAt": "2024-04-22T16:33:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "It's really not a machine learning software in this context",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9193927",
                          "updatedAt": "2024-04-22T21:35:53Z",
                          "publishedAt": "2024-04-22T21:35:52Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "anuragjha2015"
                  },
                  "bodyText": "It yielded the following results,\nlinux-vdso.so.1 =>  (0x00007ffe285e5000)\nlibHYPRE-2.29.0.so => /home/khushbu22/projects/moose/petsc/arch-moose/lib/libHYPRE-2.29.0.so (0x00007f5207598000)\nlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007f520737c000)\nlibstrumpack.so.7.1 => /home/khushbu22/projects/moose/petsc/arch-moose/lib/libstrumpack.so.7.1 (0x00007f52062dd000)\nlibscalapack.so.2.2 => /home/khushbu22/projects/moose/petsc/arch-moose/lib/libscalapack.so.2.2 (0x00007f5205abe000)\nlibsuperlu_dist.so.8 => /home/khushbu22/projects/moose/petsc/arch-moose/lib/libsuperlu_dist.so.8 (0x00007f520576b000)\nlibparmetis.so => /home/khushbu22/projects/moose/petsc/arch-moose/lib/libparmetis.so (0x00007f520552b000)\nlibmetis.so => /home/khushbu22/projects/moose/petsc/arch-moose/lib/libmetis.so (0x00007f52052c9000)\nlibm.so.6 => /lib64/libm.so.6 (0x00007f5204fc7000)\nlibX11.so.6 => /lib64/libX11.so.6 (0x00007f5204c89000)\nlibdl.so.2 => /lib64/libdl.so.2 (0x00007f5204a85000)\nlibmpifort.so.12 => /home/khushbu22/opt/mpich/lib/libmpifort.so.12 (0x00007f520477a000)\nlibmpi.so.12 => /home/khushbu22/opt/mpich/lib/libmpi.so.12 (0x00007f5201c54000)\nlibgfortran.so.5 => /home/khushbu22/opt/gcc/lib64/libgfortran.so.5 (0x00007f5201784000)\nlibgcc_s.so.1 => /home/khushbu22/opt/gcc/lib64/libgcc_s.so.1 (0x00007f5201561000)\nlibquadmath.so.0 => /home/khushbu22/opt/gcc/lib64/libquadmath.so.0 (0x00007f520131c000)\nlibstdc++.so.6 => /home/khushbu22/opt/gcc/lib64/libstdc++.so.6 (0x00007f5200eca000)\nlibrt.so.1 => /lib64/librt.so.1 (0x00007f5200cc2000)\nlibgomp.so.1 => /home/khushbu22/opt/gcc/lib64/libgomp.so.1 (0x00007f5200a75000)\nlibc.so.6 => /lib64/libc.so.6 (0x00007f52006a7000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f52096cc000)\nlibmpicxx.so.12 => /home/khushbu22/opt/mpich/lib/libmpicxx.so.12 (0x00007f5200486000)\nlibxcb.so.1 => /lib64/libxcb.so.1 (0x00007f520025e000)\nlibhwloc.so.5 => /lib64/libhwloc.so.5 (0x00007f5200021000)\nlibucp.so.0 => /home/khushbu22/opt/mpich/lib/libucp.so.0 (0x00007f51ffcc0000)\nlibuct.so.0 => /home/khushbu22/opt/mpich/lib/libuct.so.0 (0x00007f51ffa77000)\nlibucs.so.0 => /home/khushbu22/opt/mpich/lib/libucs.so.0 (0x00007f51ff80a000)\nlibucm.so.0 => /home/khushbu22/opt/mpich/lib/libucm.so.0 (0x00007f51ff5ee000)\nlibXau.so.6 => /lib64/libXau.so.6 (0x00007f51ff3ea000)\nlibnuma.so.1 => /lib64/libnuma.so.1 (0x00007f51ff1df000)\nlibltdl.so.7 => /lib64/libltdl.so.7 (0x00007f51fefd5000)\n\nThanks\n\nWhen you get a chance, I would also like to see how the dependency libraries were linked. If you can report the results of the following;\nldd ~/projects/moose/petsc/arch-moose/lib/libpetsc.so",
                  "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9209592",
                  "updatedAt": "2024-04-24T07:48:55Z",
                  "publishedAt": "2024-04-24T07:48:38Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "Looks like you run with your own compiler suite. I can totally respect that :)\nThis all looks fine to me! I was expecting some sort of conflicting paths between system libraries and possibly what your HPC module system is providing. With that not being the case, maybe we should see how WASP was linked instead.\nCan you peruse around in moose/framework/contrib/wasp/install/lib, and run a couple more ldds on the libraries in there, see if you detect any oddities with the way those libraries linked?\nFailing any oddities, I think then I need to bug @brandonlangley for another helpful eye.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9212865",
                          "updatedAt": "2024-04-24T12:34:10Z",
                          "publishedAt": "2024-04-24T12:34:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "brandonlangley"
                          },
                          "bodyText": "@milljm @anuragjha2015 -\nI assume this is coming from running make inside your /home/khushbu22/projects/moose/test directory, right?\nLinking Executable /home/khushbu22/projects/moose/test/moose_test-opt...\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::dir_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::NodeView::data[abi:cxx11]() const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::Value::operator[](std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::strip_quotes(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildCompletionObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool, bool, int)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::RPCStringToObject(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, wasp::DataObject&, std::ostream&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::last_as_string[abi:cxx11](bool*) const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::DataObject::operator[](std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::first_child_by_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildLocationObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, int, int, int)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::path[abi:cxx11]() const'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildDocumentSymbolObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, bool, int, int, int, int, int, int, int, int)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::objectToRPCString(wasp::DataObject&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, std::ostream&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildTextEditObject(wasp::DataObject&, std::ostream&, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::lsp::buildDiagnosticObject(wasp::DataObject&, std::ostream&, int, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/home/khushbu22/projects/moose/framework/libmoose-opt.so: undefined reference to `wasp::HITNodeView::child_count_by_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) const'\n\nThis does not seem like a WASP version mismatch issue since most of those WASP functions have been around forever.\nIt looks like it is some linking issue to me. @anuragjha2015 - You mentioned:\n\nI am trying with \"git clean -xf\" there is no D option in git clean\n\nCould you try git clean -xfd (lower-case d) in your /home/khushbu22/projects/moose directory before your rebuild?\nWithout the d option, the clean step will not remove any .libs subdirectories that may be left over in your repository.\nThat is the only thing that currently comes to mind to try, but I am definitely not an expert on build infrastructure issues.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9216133",
                          "updatedAt": "2024-04-24T16:55:15Z",
                          "publishedAt": "2024-04-24T16:55:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "Yes, exactly ! running make for the test folder ~/projects/moose/test/\n@milljm I am trying this and will let you know asap.\nI tried with git clean -xfd and got the following,\n/usr/bin/ld: Dwarf Error: found dwarf version '5', this reader only handles version 2, 3 and 4 information.\n/tmp/ccgAYqLj.o: In function `hit::Comment::render(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)':\nparse.cc:(.text+0x2d90): undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/tmp/ccgAYqLj.o: In function `hit::Comment::setText(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':\nparse.cc:(.text+0x2feb): undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/tmp/ccgAYqLj.o: In function `hit::Section::clearLegacyMarkers()':\nparse.cc:(.text+0x32d0): undefined reference to `wasp::HITNodeView::first_child_by_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'\n/usr/bin/ld: Dwarf Error: found dwarf version '2310', this reader only handles version 2, 3 and 4 information.\n/tmp/ccgAYqLj.o: In function `hit::Section::render(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)':\nparse.cc:(.text+0x364c): undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/usr/bin/ld: Dwarf Error: found dwarf version '2104', this reader only handles version 2, 3 and 4 information.\nparse.cc:(.text+0x3969): undefined reference to `wasp::HITNodeView::first_child_by_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'\n/usr/bin/ld: Dwarf Error: found dwarf version '7', this reader only handles version 2, 3 and 4 information.\nparse.cc:(.text+0x39bc): undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/tmp/ccgAYqLj.o: In function `hit::Field::kind()':\nparse.cc:(.text+0x52c9): undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/usr/bin/ld: Dwarf Error: found dwarf version '29442', this reader only handles version 2, 3 and 4 information.\n/tmp/ccgAYqLj.o: In function `hit::Field::val[abi:cxx11]() const':\nparse.cc:(.text+0x55fa): undefined reference to `wasp::HITNodeView::data[abi:cxx11]() const'\n/usr/bin/ld: Dwarf Error: found dwarf version '512', this reader only handles version 2, 3 and 4 information.\n/tmp/ccgAYqLj.o: In function `wasp::Interpreter<wasp::TreeNodePool<unsigned char, unsigned int, wasp::TokenPool<unsigned char, unsigned int, unsigned int> > >::load_document(unsigned long, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':\nparse.cc:(.text._ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x3a): undefined reference to `wasp::strip_quotes(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/usr/bin/ld: Dwarf Error: found dwarf version '64523', this reader only handles version 2, 3 and 4 information.\nparse.cc:(.text._ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0xae): undefined reference to `wasp::dir_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/usr/bin/ld: Dwarf Error: found dwarf version '10496', this reader only handles version 2, 3 and 4 information.\nparse.cc:(.text._ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x156): undefined reference to `wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/usr/bin/ld: Dwarf Error: found dwarf version '14', this reader only handles version 2, 3 and 4 information.\nparse.cc:(.text._ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x22f): undefined reference to `wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/usr/bin/ld: Dwarf Error: found dwarf version '3293', this reader only handles version 2, 3 and 4 information.\nparse.cc:(.text._ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x275): undefined reference to `wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\nparse.cc:(.text._ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN4wasp11InterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE13load_documentEmRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x2a4): undefined reference to `wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/usr/bin/ld: Dwarf Error: found dwarf version '1020', this reader only handles version 2, 3 and 4 information.\n/tmp/ccgAYqLj.o: In function `wasp::HITInterpreter<wasp::TreeNodePool<unsigned char, unsigned int, wasp::TokenPool<unsigned char, unsigned int, unsigned int> > >::create_nested_interpreter(wasp::Interpreter<wasp::TreeNodePool<unsigned char, unsigned int, wasp::TokenPool<unsigned char, unsigned int, unsigned int> > >*)':\nparse.cc:(.text._ZN4wasp14HITInterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE25create_nested_interpreterEPNS_11InterpreterIS4_EE[_ZN4wasp14HITInterpreterINS_12TreeNodePoolIhjNS_9TokenPoolIhjjEEEEE25create_nested_interpreterEPNS_11InterpreterIS4_EE]+0x1ee): undefined reference to `wasp::dir_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\ncollect2: error: ld returned 1 exit status\n\nThanks",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9223241",
                          "updatedAt": "2024-04-25T13:14:37Z",
                          "publishedAt": "2024-04-25T09:50:32Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "RotmanC"
                  },
                  "bodyText": "Hello,\nI have some issues when update moose in the HPC, so I start the installation again, but I have some errors when I update and build libmesh:\nlibtool: warning: '/dragofs/sw/foss/0.2/software/GCCcore/11.2.0/lib64/libstdc++.la' seems to be moved\nMore information is enclosed in the logfile: libesh_update_rebuild.log\nHere is the logfile of the petsc update and build too (I didn't find any extrange):\npetsc_update_rebuild.log\nI run scripts/diagnostics.sh (moose_scripts_diagnostics.log) and it seems that I'm not using Conda MOOSE packages. But since I know, in HPC it's good to install it with no environments to use already modules like GCC, MPI, right? Also, HPC install guides don't mention to install conda MOOSE environment.\nHow can I fix it and continue with the installation?\nThank you in advance",
                  "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9214200",
                  "updatedAt": "2024-04-25T13:45:49Z",
                  "publishedAt": "2024-04-24T14:21:08Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "Thanks for the heads-up.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9214497",
                          "updatedAt": "2024-04-25T13:46:01Z",
                          "publishedAt": "2024-04-24T14:42:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "@RotmanC can you create a new discussion post for your issue? I don't believe the two are related, and therefore any answer selected by the OP (@anuragjha2015) will probably not be the answer which solves your issue.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9214788",
                          "updatedAt": "2024-04-25T13:46:09Z",
                          "publishedAt": "2024-04-24T14:57:58Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "anuragjha2015"
                  },
                  "bodyText": "I did that, everything seems fine. Wasp got built without errors, Should I paste the results here ?\nWhat should I do next ?\nI also did git clean -xfd, I am getting a new error as I have reported above. I think there is some error with the version of GCC or some dependency in that, do you think so ?\nThanks,\n\nLooks like you run with your own compiler suite. I can totally respect that :)\nThis all looks fine to me! I was expecting some sort of conflicting paths between system libraries and possibly what your HPC module system is providing. With that not being the case, maybe we should see how WASP was linked instead.\nCan you peruse around in moose/framework/contrib/wasp/install/lib, and run a couple more ldds on the libraries in there, see if you detect any oddities with the way those libraries linked?\nFailing any oddities, I think then I need to bug @brandonlangley for another helpful eye.",
                  "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9224647",
                  "updatedAt": "2024-04-25T12:19:03Z",
                  "publishedAt": "2024-04-25T12:18:37Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "It is odd that a git clean -xfd wouldn't result in the same errors if it was a compiler issue. The fact we are getting something different makes me believe there is still something strange we are not cleaning up.\nSpeaking of compilers, can you run the following:\nmoose/scripts/diagnostics.sh\nIt should print back a wealth of information about the environment we're building in.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9225684",
                          "updatedAt": "2024-04-25T13:54:00Z",
                          "publishedAt": "2024-04-25T13:54:00Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "I have updated the dependencies according to that given on website, there were some problems before,\nNow i am getting error with scalapack while installing petsc, the following is from the configure.log\ng BLACS INSTALL Testing to set correct variables\n-- Configure in the INSTALL directory successful\n-- Build in the BLACS INSTALL directory successful\n-- =========\n-- Testing FORTRAN_MANGLING\n--  xintface Output:\n\n-- Configuring incomplete, errors occurred!CMake Deprecation Warning at CMakeLists.txt:1 (cmake_minimum_required):\n  Compatibility with CMake < 3.5 will be removed from a future version of\n  CMake.\n\n  Update the VERSION argument <min> value or use a ...<max> suffix to tell\n  CMake that the project\n .... more error .....",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9442951",
                          "updatedAt": "2024-05-15T11:56:49Z",
                          "publishedAt": "2024-05-15T08:42:50Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "it's telling you to use a newer cmake.\nYou can pass these options when installing petsc\nCMAKE:\n  --with-cmake=<bool>\n       Indicate if you wish to test for cmake  current: 1\n  --with-cmake-dir=<dir>\n       Indicate the root directory of the cmake installation\n  --with-cmake-pkg-config=<dir>\n       Look for cmake using pkg-config utility optional directory to look in\n  --download-cmake=<no,yes,filename,url>\n       Download and install cmake  current: no\n  --download-cmake-commit=commitid\n       The commit id from a git repository to use for the build of cmake  current: 0\n  --download-cmake-shared=<bool>\n       Install CMAKE with shared libraries  current: 0\n  --download-cmake-configure-arguments=string\n       Additional GNU autoconf configure arguments for the build of cmake  current: 0\n  --download-cmake-cc=<prog>\n       C compiler for Cmake configure\n  --download-cmake-cxx=<prog>\n       C++ compiler for Cmake configure\n  --with-cmake-exec=<executable>\n       CMake executable to look for\n  --with-ctest-exec=<executable>\n       Ctest executable to look for\n\nYou could download a fresh cmake on this step",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9444942",
                          "updatedAt": "2024-05-15T12:05:54Z",
                          "publishedAt": "2024-05-15T12:05:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "i was using the most recent one cmake-3.29 and using the option\n--with-cmake-dir=\nwhich sets the directory, after which I get this error. Now I am building with an earlier MOOSE version, which was running on one of the accounts, hoping it turns out fine.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9445058",
                          "updatedAt": "2024-05-15T12:20:55Z",
                          "publishedAt": "2024-05-15T12:13:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "Now I am able to install Petsc, but libmesh fails with error:\nutil/bytecoderules_parser: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.26' not found (required by util/bytecoderules_parser)\nutil/bytecoderules_parser: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by util/bytecoderules_parser)\nutil/bytecoderules_parser: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by util/bytecoderules_parser)\nutil/bytecoderules_parser: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by util/bytecoderules_parser)\nmake[2]: *** [Makefile:3146: extrasrc/fp_opcode_add.inc] Error 1",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9445350",
                          "updatedAt": "2024-05-15T12:45:22Z",
                          "publishedAt": "2024-05-15T12:36:41Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "this is typically caused by different compilers being picked up at different moments in the installation\ncan you paste the output of the diagnostics script in moose/scripts?",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9445449",
                          "updatedAt": "2024-05-15T12:46:00Z",
                          "publishedAt": "2024-05-15T12:46:00Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "I made sure now that all compilers are the same as far as I could understand and I could build everything (petsc/libmesh/wasp), but still I get an error while running make on combined module. I think this is because the python2 is being picked up from the linux usr/bin rather than the local python .localpython that I have setup which has python3. is this the error ? I have attached the diagnostics log as requested.\ndiagnostics.txt\nit shows the python3 problem. I have installed python3 locally in my .localpython . Please tell me what to do.",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9478039",
                          "updatedAt": "2024-05-18T14:44:18Z",
                          "publishedAt": "2024-05-18T10:39:43Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "what does /usr/bin/python --version report?",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9478964",
                          "updatedAt": "2024-05-18T12:29:12Z",
                          "publishedAt": "2024-05-18T12:29:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "anuragjha2015"
                          },
                          "bodyText": "python 2.7.5\non the same note, this is the error i was receiving connected to wasp\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::dir_name(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::HITNodeView::dataabi:cxx11 const'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::NodeView::data[abi:cxx11]() const' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::Value::operator[](std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&)'\n/home/khushbu22/projects1/moose/modules/navier_stokes/lib/libnavier_stokes-opt.so: undefined reference to Moose::FV::setInterpolationMethods(MooseObject const&, Moose::FV::InterpMethod&, Moose::FV::InterpMethod&)' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::strip_quotes(std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&)'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::buildCompletionObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool, bool, int)' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::RPCStringToObject(std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&, wasp::DataObject&, std::ostream&)'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::HITNodeView::last_as_string[abi:cxx11](bool*) const' /home/khushbu22/projects1/moose/modules/navier_stokes/test/lib/libnavier_stokes_test-opt.so: undefined reference to FaceCenteredMapFunctor<libMesh::VectorValue, std::unordered_map<unsigned long, libMesh::VectorValue, std::hash, std::equal_to, std::allocator<std::pair<unsigned long const, libMesh::VectorValue > > > >::evaluate(Moose::ElemArg const&, Moose::StateArg const&) const'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::DataObject::operator[](std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::HITNodeView::first_child_by_name(std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&) const'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::buildLocationObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, int, int, int)' /home/khushbu22/projects1/moose/modules/navier_stokes/lib/libnavier_stokes-opt.so: undefined reference to Moose::FV::interpolationParameters()'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::HITNodeView::path[abi:cxx11]() const' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::buildDocumentSymbolObject(wasp::DataObject&, std::ostream&, std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&, std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&, int, bool, int, int, int, int, int, int, int, int)'\n/home/khushbu22/projects1/moose/modules/navier_stokes/lib/libnavier_stokes-opt.so: undefined reference to NS::isPorosityJumpFace(Moose::FunctorEnvelope<MetaPhysicL::DualNumber<double, MetaPhysicL::SemiDynamicSparseNumberArray<double, unsigned long, MetaPhysicL::NWrapper<64ul> >, true> > const&, FaceInfo const&, Moose::StateArg const&)' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::objectToRPCString(wasp::DataObject&, std::__cxx11::basic_string<char, std::char_traits, std::allocator >&, std::ostream&)'\n/home/khushbu22/projects1/moose/modules/navier_stokes/test/lib/libnavier_stokes_test-opt.so: undefined reference to FaceCenteredMapFunctor<libMesh::VectorValue<double>, std::unordered_map<unsigned long, libMesh::VectorValue<double>, std::hash<unsigned long>, std::equal_to<unsigned long>, std::allocator<std::pair<unsigned long const, libMesh::VectorValue<double> > > > >::evaluate(Moose::FaceArg const&, Moose::StateArg const&) const' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::buildTextEditObject(wasp::DataObject&, std::ostream&, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&)'\n/home/khushbu22/projects1/moose/modules/navier_stokes/lib/libnavier_stokes-opt.so: undefined reference to FaceCenteredMapFunctor<libMesh::VectorValue<double>, std::unordered_map<unsigned long, libMesh::VectorValue<double>, std::hash<unsigned long>, std::equal_to<unsigned long>, std::allocator<std::pair<unsigned long const, libMesh::VectorValue<double> > > > >::evaluate(FaceInfo const*) const' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::file_exists(std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&)'\n/home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::lsp::buildDiagnosticObject(wasp::DataObject&, std::ostream&, int, int, int, int, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)' /home/khushbu22/projects1/moose/framework/libmoose-opt.so: undefined reference to wasp::HITNodeView::child_count_by_name(std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&, unsigned long) const'\ncollect2: error: ld returned 1 exit status\nmake: *** [/home/khushbu22/projects1/moose/framework/app.mk:457: /home/khushbu22",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9479654",
                          "updatedAt": "2024-05-18T14:23:17Z",
                          "publishedAt": "2024-05-18T14:13:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Ok that s definitely something you want to fix by adding the other Python earlier in your path maybe?\nYou could use an alias for Python if that is not enough\nFor the second error this looks like your version of wasp is not in sync with your version of moose.\nYou can fix that by updating your conda packages if you installed wasp with conda\nOr running the update and rebuild wasp script",
                          "url": "https://github.com/idaholab/moose/discussions/27424#discussioncomment-9483977",
                          "updatedAt": "2024-05-18T22:38:15Z",
                          "publishedAt": "2024-05-18T22:38:14Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Deactivate/delete elements based on material property",
          "author": {
            "login": "Traiwit"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nHi guys,\njust wondering is there a way to deactivate/delete element based on material property?\nfor example, if porosity of this element = 1, then don't solve/ignore this element in the system (mimic the excavation)\nI checked CoupledVarThresholdElementSubdomainModifier this is more like re-grouping blocks to me, my simulation is element-based, all material properties are imported via .csv, I kinda don't want to deal with block (element-set) system.\nThank you!\nTraiwit",
          "url": "https://github.com/idaholab/moose/discussions/27583",
          "updatedAt": "2024-05-20T02:14:59Z",
          "publishedAt": "2024-05-09T13:33:32Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nNo it hasnt been added.\nYou can add a new object, or you can convert a material property to an auxiliary variable with an MaterialRealAux for example then use the current way\nCoupledVarThresholdElementSubdomainModifier is exactly how we do this currently. You re-assign the elements you do not care to solve on to a block which does not have any kernels / equations defined on\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9369238",
                  "updatedAt": "2024-05-09T13:56:17Z",
                  "publishedAt": "2024-05-09T13:55:58Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @GiudGiud, yep make sense\nalso, I don't want a new surface around the new block (I already have pre-defined surfaces), if complement_moving_boundary_name isnt specified, will it still create a new surface?\nalso for the Kernels, is there a way to input all blocks except this new block?\nit's an Abaqus mesh, and it has more than a 1000 blocks, which isnt messy when inputting all of them.\nRegards,\nTraiwit",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9376944",
                          "updatedAt": "2024-05-10T02:02:06Z",
                          "publishedAt": "2024-05-10T02:02:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": ", if complement_moving_boundary_name isnt specified, will it still create a new surface?\n\nit should not\n\nalso for the Kernels, is there a way to input all blocks except this new block?\n\nI would do a list at the top of the input file that does not include the excluded block\nblocks_matter = 'block1 block2 .....'\nthen use that for the block restriction\n[Kernels]\n  [k1]\n    type = ...\n    block = ${blocks_matter}\n\nyou can use an input file include (with !include file.i) to hide it in another input",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9377505",
                          "updatedAt": "2024-05-10T03:32:48Z",
                          "publishedAt": "2024-05-10T03:32:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Thank you! this will defs work.\nHowever, I'm just trying to find an easier way to do it (so others in my team can use my input file as well).\nis there a way to merge all the subdomains (without having to list all of the subdomains) into 1 subdomain and then apply CoupledVarThresholdElementSubdomainModifier to separate the unwanted subdomain out?\nor is there a way to print out all the subdomain names?\nRegards,\nTraiwit",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9377682",
                          "updatedAt": "2024-05-10T03:50:50Z",
                          "publishedAt": "2024-05-10T03:50:50Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "or is there a way to print out all the subdomain names?\n\nYou could add that to one of your object? Using blocks() from the BlockRestrictable interface then printing it with\n_console << Moose::stringify(blocks()) << std::endl;\n\n\nis there a way to merge all the subdomains (without having to list all of the subdomains) into 1 subdomain and then apply CoupledVarThresholdElementSubdomainModifier to separate the unwanted subdomain out?\n\nYes, in a way. You can remove all subdomains but one with a ParsedSubdomainGenerator at the end of the mesh generator step and only leave one.\nYou can do the same with a CoupledVarThresholdElementSubdomainModifier and a well chosen threshold.\nBut are you trying to remove the blocks from the mesh or not? An element can only have one block.\nIf you need more flexibility than that, you'll want to work with extra element integer IDs.\nThere are less objects for those (than using subdomains/blocks), but the objects missing are easy enough to re-create",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9382028",
                          "updatedAt": "2024-05-10T12:16:44Z",
                          "publishedAt": "2024-05-10T12:16:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "merge all subdomains into 1 wont work, I have different element types in my mesh (c3d6 and c4d6)\nback to print all the print out all the subdomain names\nI tried to make a userobject that does this, but I got this error during the simulation\n*** ERROR ***\nThe parameter \"_dual_restrictable\" is being retrieved before being set.\n\nbelow is my .C\n#include \"PrintBlockNames.h\"\n#include \"MooseMesh.h\"\n#include \"BlockRestrictable.h\"\n\nregisterMooseObject(\"moose_behApp\", PrintBlockNames);\n\nInputParameters\nPrintBlockNames::validParams()\n{\n  InputParameters params = GeneralUserObject::validParams();\n  params.addClassDescription(\"Prints the names of the blocks that the object is restricted to.\");\n  return params;\n}\n\nPrintBlockNames::PrintBlockNames(const InputParameters & parameters) :\n  GeneralUserObject(parameters),\n  BlockRestrictable(this)\n\n{\n}\n\nvoid\nPrintBlockNames::execute()\n{\n\n    _console << Moose::stringify(blocks()) << std::endl;\n\n}\n\n.h\n#include \"GeneralUserObject.h\"\n#include \"BlockRestrictable.h\"\n\nclass PrintBlockNames : public GeneralUserObject, public BlockRestrictable\n{\npublic:\n  static InputParameters validParams();\n\n  PrintBlockNames(const InputParameters & parameters);\n  virtual void execute() override;\n  virtual void initialize() override {}\n  virtual void finalize() override {}\n\nprotected:\n\n};\n\nmore question, is there a way to store it in text, so I can just pass it to the kernel like block = PrintBlockNames\nKind regards,\nTraiwit",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9414098",
                          "updatedAt": "2024-05-13T05:13:27Z",
                          "publishedAt": "2024-05-13T05:13:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I think general UOs cannot be block-restricted if you get this error. You ll want to go for just UserObject, or maybe ElementUserObject",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9418271",
                          "updatedAt": "2024-05-13T11:04:13Z",
                          "publishedAt": "2024-05-13T11:04:12Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "alternatively just set all the missing parameters in validParams():\nparams.set<bool>(\"_dual_restrictable\") = false;",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9418279",
                          "updatedAt": "2024-05-13T11:05:11Z",
                          "publishedAt": "2024-05-13T11:05:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @GiudGiud,\nThank you for your help, at the end, it still doesn't work: CoupledVarThresholdElementSubdomainModifier groups both type of element that is above/below the threshold into the same subdomains, and i got this error\n    Still Outputting Step....libMesh terminating:\nError: Exodus requires all elements with a given subdomain ID to be the same type.\nCan't write both PRISM6 and TET4 in the same block!\n[0] ../src/mesh/exodusII_io_helper.C, line 2836, compiled Nov 30 2023 at 16:46:29\n\nit's okay, this approach is way too try-hard\nI come up with another method, which is just modify the Kernel, I want the Kernel to just ignore when _state[_qp] = 1\nis below current? i'm not sure what to return, is 0 the right thing to return when i want to ignore\n  if (_state[_qp] == 1.0) {\n    return 0.0;  // Skip computation for this element\n  }\n\n\nReal\nPorousFlowMassTimeDerivative::computeQpResidual()\n{\n\n  if (_state[_qp] == 1.0) {\n    return 0.0;  // Skip computation for this element\n  }\n  Real mass = 0.0;\n  Real mass_old = 0.0;\n  for (unsigned ph = 0; ph < _num_phases; ++ph)\n  {\n    const Real dens = (_multiply_by_density ? (*_fluid_density)[_i][ph] : 1.0);\n    mass += dens * _fluid_saturation_nodal[_i][ph] * _mass_frac[_i][ph][_fluid_component];\n    const Real dens_old = (_multiply_by_density ? (*_fluid_density_old)[_i][ph] : 1.0);\n    mass_old +=\n        dens_old * _fluid_saturation_nodal_old[_i][ph] * _mass_frac_old[_i][ph][_fluid_component];\n  }\n  const Real strain = (_has_total_strain ? (*_total_strain_old)[_qp].trace() : 0.0);\n\n  return _test[_i][_qp] * (1.0 + strain) * (_porosity[_i] * mass - _porosity_old[_i] * mass_old) /\n         _dt;\n}\n\nReal\nPorousFlowMassTimeDerivative::computeQpJacobian()\n{\n  // If the variable is not a PorousFlow variable (very unusual), the diag Jacobian terms are 0\n  if (!_var_is_porflow_var)\n    return 0.0;\n  return computeQpJac(_dictator.porousFlowVariableNum(_var.number()));\n}\n\nReal\nPorousFlowMassTimeDerivative::computeQpOffDiagJacobian(unsigned int jvar)\n{\n  if (_state[_qp] == 1.0) {\n    return 0.0;  // Skip computation for this element\n  }\n  // If the variable is not a PorousFlow variable, the OffDiag Jacobian terms are 0\n  if (_dictator.notPorousFlowVariable(jvar))\n    return 0.0;\n  return computeQpJac(_dictator.porousFlowVariableNum(jvar));\n}\n\nReal\nPorousFlowMassTimeDerivative::computeQpJac(unsigned int pvar)\n{\n  if (_state[_qp] == 1.0) {\n    return 0.0;  // Skip computation for this element\n  }\n  const unsigned nearest_qp = (_strain_at_nearest_qp ? (*_nearest_qp)[_i] : _i);\n\n  const Real strain = (_has_total_strain ? (*_total_strain_old)[_qp].trace() : 0.0);\n\n  // porosity is dependent on variables that are lumped to the nodes,\n  // but it can depend on the gradient\n  // of variables, which are NOT lumped to the nodes, hence:\n  Real dmass = 0.0;\n  for (unsigned ph = 0; ph < _num_phases; ++ph)\n  {\n    const Real dens = (_multiply_by_density ? (*_fluid_density)[_i][ph] : 1.0);\n    dmass += dens * _fluid_saturation_nodal[_i][ph] * _mass_frac[_i][ph][_fluid_component] *\n             _dporosity_dgradvar[_i][pvar] * _grad_phi[_j][nearest_qp];\n  }\n\n  if (_i != _j)\n    return _test[_i][_qp] * (1.0 + strain) * dmass / _dt;\n\n  // As the fluid mass is lumped to the nodes, only non-zero terms are for _i==_j\n  for (unsigned ph = 0; ph < _num_phases; ++ph)\n  {\n    if (_multiply_by_density)\n      dmass += (*_dfluid_density_dvar)[_i][ph][pvar] * _fluid_saturation_nodal[_i][ph] *\n               _mass_frac[_i][ph][_fluid_component] * _porosity[_i];\n    const Real dens = (_multiply_by_density ? (*_fluid_density)[_i][ph] : 1.0);\n    dmass += dens * _dfluid_saturation_nodal_dvar[_i][ph][pvar] *\n             _mass_frac[_i][ph][_fluid_component] * _porosity[_i];\n    dmass += dens * _fluid_saturation_nodal[_i][ph] *\n             _dmass_frac_dvar[_i][ph][_fluid_component][pvar] * _porosity[_i];\n    dmass += dens * _fluid_saturation_nodal[_i][ph] * _mass_frac[_i][ph][_fluid_component] *\n             _dporosity_dvar[_i][pvar];\n  }\n  return _test[_i][_qp] * (1.0 + strain) * dmass / _dt;\n}\n\nabove is from PorousFlowMassTimeDerivative.C\nThank you!\nTraiwit",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9418732",
                          "updatedAt": "2024-05-13T11:40:31Z",
                          "publishedAt": "2024-05-13T11:40:30Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "A bunch of 0 residuals is likely to create entire rows of 0s in the system, which will cause convergence issues because the solution is no longer unique.\nI think the CoupledVarThresholdElementSubdomainModifier ought to be fixed to have an option to not group elements with different element types. @hugary1995\nThat would be a fairly straightforward change, just add a new parameter for the alternate group for tets / hexes and assign accordingly\nWe actually support elements in the same block with different types, except for exodus output.",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9418880",
                          "updatedAt": "2024-05-13T11:54:43Z",
                          "publishedAt": "2024-05-13T11:54:42Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "ok looking at it, maybe there should be one CoupledVarThresholdElementSubdomainModifier for each type of element. That should already work\nMoving elements to inactive subdomains is our main way of doing this.\nThere options in PETSc to deal with the null space a bunch of no-kernel regions will create, but I have not ever used this",
                          "url": "https://github.com/idaholab/moose/discussions/27583#discussioncomment-9419277",
                          "updatedAt": "2024-05-13T12:22:48Z",
                          "publishedAt": "2024-05-13T12:22:31Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "An Potential Error in source code ComputeLinearElasticPFFractureStress.C",
          "author": {
            "login": "DanielChou0916"
          },
          "bodyText": "Dear MOOSE community\nI'm currently doing research on phase field fracture model, and when I take a look as the source code \"ComputeLinearElasticPFFractureStress.C\"\nI found that in \"computeStrainSpectral\" function, there is an potential error.\nIn the source file:\nhttps://github.com/idaholab/moose/blob/next/modules/solid_mechanics/src/materials/ComputeLinearElasticPFFractureStress.C\nLine 106 is given as\nF_neg = -lambda * etrneg * etrneg / 2.0 + mu * nval;\nHowever, the negative sign on the first term  -lambda * etrneg * etrneg / 2.0 does not make sense to me.\nIn the official website, the compressive part of elastic energy is given as shwon in following figure:\nhttps://mooseframework.inl.gov/source/materials/ComputeLinearElasticPFFractureStress.html\n\nI also checked several papers to verify this portion, such as\nhttps://www.sciencedirect.com/science/article/pii/S0020768324001744?ref=cra_js_challenge&fr=RR-1 (page 3, equation 11)\nAnd\nhttps://materialstheory.springeropen.com/articles/10.1186/s41313-021-00037-1 (page 5, equation 16).\nCould someone verify if this negative sign is indeed an error? If so, correcting it might be important for ensuring the accuracy of the energy calculations in the phase field fracture models.\nAppreciate for your time and patience.\nSincerely",
          "url": "https://github.com/idaholab/moose/discussions/27663",
          "updatedAt": "2024-05-19T23:17:31Z",
          "publishedAt": "2024-05-18T20:17:25Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "@jiangwen84",
                  "url": "https://github.com/idaholab/moose/discussions/27663#discussioncomment-9490716",
                  "updatedAt": "2024-05-19T23:17:31Z",
                  "publishedAt": "2024-05-19T23:17:31Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}